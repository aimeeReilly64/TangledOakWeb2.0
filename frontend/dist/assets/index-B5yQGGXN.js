function gS(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function zs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yS(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}var ff={exports:{}},hl={},pf={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function vS(){if(Ky)return Oe;Ky=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,U={};function D(V,Y,me){this.props=V,this.context=Y,this.refs=U,this.updater=me||A}D.prototype.isReactComponent={},D.prototype.setState=function(V,Y){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Y,"setState")},D.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=D.prototype;function te(V,Y,me){this.props=V,this.context=Y,this.refs=U,this.updater=me||A}var W=te.prototype=new Q;W.constructor=te,O(W,D.prototype),W.isPureReactComponent=!0;var H=Array.isArray,pe=Object.prototype.hasOwnProperty,_e={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function R(V,Y,me){var Pe,be={},De=null,Fe=null;if(Y!=null)for(Pe in Y.ref!==void 0&&(Fe=Y.ref),Y.key!==void 0&&(De=""+Y.key),Y)pe.call(Y,Pe)&&!M.hasOwnProperty(Pe)&&(be[Pe]=Y[Pe]);var qe=arguments.length-2;if(qe===1)be.children=me;else if(1<qe){for(var Ke=Array(qe),Ct=0;Ct<qe;Ct++)Ke[Ct]=arguments[Ct+2];be.children=Ke}if(V&&V.defaultProps)for(Pe in qe=V.defaultProps,qe)be[Pe]===void 0&&(be[Pe]=qe[Pe]);return{$$typeof:n,type:V,key:De,ref:Fe,props:be,_owner:_e.current}}function k(V,Y){return{$$typeof:n,type:V.type,key:Y,ref:V.ref,props:V.props,_owner:V._owner}}function L(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function x(V){var Y={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return Y[me]})}var b=/\/+/g;function C(V,Y){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):Y.toString(36)}function se(V,Y,me,Pe,be){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Fe=!1;if(V===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(V.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=V,be=be(Fe),V=Pe===""?"."+C(Fe,0):Pe,H(be)?(me="",V!=null&&(me=V.replace(b,"$&/")+"/"),se(be,Y,me,"",function(Ct){return Ct})):be!=null&&(L(be)&&(be=k(be,me+(!be.key||Fe&&Fe.key===be.key?"":(""+be.key).replace(b,"$&/")+"/")+V)),Y.push(be)),1;if(Fe=0,Pe=Pe===""?".":Pe+":",H(V))for(var qe=0;qe<V.length;qe++){De=V[qe];var Ke=Pe+C(De,qe);Fe+=se(De,Y,me,Ke,be)}else if(Ke=I(V),typeof Ke=="function")for(V=Ke.call(V),qe=0;!(De=V.next()).done;)De=De.value,Ke=Pe+C(De,qe++),Fe+=se(De,Y,me,Ke,be);else if(De==="object")throw Y=String(V),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Fe}function ae(V,Y,me){if(V==null)return V;var Pe=[],be=0;return se(V,Pe,"","",function(De){return Y.call(me,De,be++)}),Pe}function Se(V){if(V._status===-1){var Y=V._result;Y=Y(),Y.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=Y)}if(V._status===1)return V._result.default;throw V._result}var q={current:null},G={transition:null},ue={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:G,ReactCurrentOwner:_e};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:ae,forEach:function(V,Y,me){ae(V,function(){Y.apply(this,arguments)},me)},count:function(V){var Y=0;return ae(V,function(){Y++}),Y},toArray:function(V){return ae(V,function(Y){return Y})||[]},only:function(V){if(!L(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Oe.Component=D,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=te,Oe.StrictMode=i,Oe.Suspense=f,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Oe.act=ie,Oe.cloneElement=function(V,Y,me){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Pe=O({},V.props),be=V.key,De=V.ref,Fe=V._owner;if(Y!=null){if(Y.ref!==void 0&&(De=Y.ref,Fe=_e.current),Y.key!==void 0&&(be=""+Y.key),V.type&&V.type.defaultProps)var qe=V.type.defaultProps;for(Ke in Y)pe.call(Y,Ke)&&!M.hasOwnProperty(Ke)&&(Pe[Ke]=Y[Ke]===void 0&&qe!==void 0?qe[Ke]:Y[Ke])}var Ke=arguments.length-2;if(Ke===1)Pe.children=me;else if(1<Ke){qe=Array(Ke);for(var Ct=0;Ct<Ke;Ct++)qe[Ct]=arguments[Ct+2];Pe.children=qe}return{$$typeof:n,type:V.type,key:be,ref:De,props:Pe,_owner:Fe}},Oe.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},Oe.createElement=R,Oe.createFactory=function(V){var Y=R.bind(null,V);return Y.type=V,Y},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:h,render:V}},Oe.isValidElement=L,Oe.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:Se}},Oe.memo=function(V,Y){return{$$typeof:m,type:V,compare:Y===void 0?null:Y}},Oe.startTransition=function(V){var Y=G.transition;G.transition={};try{V()}finally{G.transition=Y}},Oe.unstable_act=ie,Oe.useCallback=function(V,Y){return q.current.useCallback(V,Y)},Oe.useContext=function(V){return q.current.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V){return q.current.useDeferredValue(V)},Oe.useEffect=function(V,Y){return q.current.useEffect(V,Y)},Oe.useId=function(){return q.current.useId()},Oe.useImperativeHandle=function(V,Y,me){return q.current.useImperativeHandle(V,Y,me)},Oe.useInsertionEffect=function(V,Y){return q.current.useInsertionEffect(V,Y)},Oe.useLayoutEffect=function(V,Y){return q.current.useLayoutEffect(V,Y)},Oe.useMemo=function(V,Y){return q.current.useMemo(V,Y)},Oe.useReducer=function(V,Y,me){return q.current.useReducer(V,Y,me)},Oe.useRef=function(V){return q.current.useRef(V)},Oe.useState=function(V){return q.current.useState(V)},Oe.useSyncExternalStore=function(V,Y,me){return q.current.useSyncExternalStore(V,Y,me)},Oe.useTransition=function(){return q.current.useTransition()},Oe.version="18.3.1",Oe}var Gy;function la(){return Gy||(Gy=1,pf.exports=vS()),pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function _S(){if(Qy)return hl;Qy=1;var n=la(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,m){var _,E={},I=null,A=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(A=f.ref);for(_ in f)i.call(f,_)&&!a.hasOwnProperty(_)&&(E[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)E[_]===void 0&&(E[_]=f[_]);return{$$typeof:e,type:h,key:I,ref:A,props:E,_owner:o.current}}return hl.Fragment=t,hl.jsx=u,hl.jsxs=u,hl}var Yy;function wS(){return Yy||(Yy=1,ff.exports=_S()),ff.exports}var v=wS(),X=la();const Go=zs(X),ES=gS({__proto__:null,default:Go},[X]);var yc={},mf={exports:{}},ln={},gf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function TS(){return Xy||(Xy=1,function(n){function e(G,ue){var ie=G.length;G.push(ue);e:for(;0<ie;){var V=ie-1>>>1,Y=G[V];if(0<o(Y,ue))G[V]=ue,G[ie]=Y,ie=V;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ue=G[0],ie=G.pop();if(ie!==ue){G[0]=ie;e:for(var V=0,Y=G.length,me=Y>>>1;V<me;){var Pe=2*(V+1)-1,be=G[Pe],De=Pe+1,Fe=G[De];if(0>o(be,ie))De<Y&&0>o(Fe,be)?(G[V]=Fe,G[De]=ie,V=De):(G[V]=be,G[Pe]=ie,V=Pe);else if(De<Y&&0>o(Fe,ie))G[V]=Fe,G[De]=ie,V=De;else break e}}return ue}function o(G,ue){var ie=G.sortIndex-ue.sortIndex;return ie!==0?ie:G.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,E=null,I=3,A=!1,O=!1,U=!1,D=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(G){for(var ue=t(m);ue!==null;){if(ue.callback===null)i(m);else if(ue.startTime<=G)i(m),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=t(m)}}function H(G){if(U=!1,W(G),!O)if(t(f)!==null)O=!0,Se(pe);else{var ue=t(m);ue!==null&&q(H,ue.startTime-G)}}function pe(G,ue){O=!1,U&&(U=!1,Q(R),R=-1),A=!0;var ie=I;try{for(W(ue),E=t(f);E!==null&&(!(E.expirationTime>ue)||G&&!x());){var V=E.callback;if(typeof V=="function"){E.callback=null,I=E.priorityLevel;var Y=V(E.expirationTime<=ue);ue=n.unstable_now(),typeof Y=="function"?E.callback=Y:E===t(f)&&i(f),W(ue)}else i(f);E=t(f)}if(E!==null)var me=!0;else{var Pe=t(m);Pe!==null&&q(H,Pe.startTime-ue),me=!1}return me}finally{E=null,I=ie,A=!1}}var _e=!1,M=null,R=-1,k=5,L=-1;function x(){return!(n.unstable_now()-L<k)}function b(){if(M!==null){var G=n.unstable_now();L=G;var ue=!0;try{ue=M(!0,G)}finally{ue?C():(_e=!1,M=null)}}else _e=!1}var C;if(typeof te=="function")C=function(){te(b)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=b,C=function(){ae.postMessage(null)}}else C=function(){D(b,0)};function Se(G){M=G,_e||(_e=!0,C())}function q(G,ue){R=D(function(){G(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){O||A||(O=!0,Se(pe))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(G){switch(I){case 1:case 2:case 3:var ue=3;break;default:ue=I}var ie=I;I=ue;try{return G()}finally{I=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ue){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=I;I=G;try{return ue()}finally{I=ie}},n.unstable_scheduleCallback=function(G,ue,ie){var V=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,G){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ie+Y,G={id:_++,callback:ue,priorityLevel:G,startTime:ie,expirationTime:Y,sortIndex:-1},ie>V?(G.sortIndex=ie,e(m,G),t(f)===null&&G===t(m)&&(U?(Q(R),R=-1):U=!0,q(H,ie-V))):(G.sortIndex=Y,e(f,G),O||A||(O=!0,Se(pe))),G},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(G){var ue=I;return function(){var ie=I;I=ue;try{return G.apply(this,arguments)}finally{I=ie}}}}(yf)),yf}var Jy;function IS(){return Jy||(Jy=1,gf.exports=TS()),gf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function SS(){if(Zy)return ln;Zy=1;var n=la(),e=IS();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(r){return f.call(E,r)?!0:f.call(_,r)?!1:m.test(r)?E[r]=!0:(_[r]=!0,!1)}function A(r,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function O(r,s,l,d){if(s===null||typeof s>"u"||A(r,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,l,d,p,y,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=T}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){D[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];D[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){D[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){D[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){D[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){D[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){D[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){D[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){D[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function te(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(Q,te);D[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(Q,te);D[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(Q,te);D[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){D[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),D.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){D[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function W(r,s,l,d){var p=D.hasOwnProperty(s)?D[s]:null;(p!==null?p.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(O(s,l,p,d)&&(l=null),d||p===null?I(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,d=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?r.setAttributeNS(d,s,l):r.setAttribute(s,l))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),_e=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),G=Symbol.iterator;function ue(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Object.assign,V;function Y(r){if(V===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+r}var me=!1;function Pe(r,s){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var d=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){d=$}r.call(s.prototype)}else{try{throw Error()}catch($){d=$}r()}}catch($){if($&&d&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),y=d.stack.split(`
`),T=p.length-1,P=y.length-1;1<=T&&0<=P&&p[T]!==y[P];)P--;for(;1<=T&&0<=P;T--,P--)if(p[T]!==y[P]){if(T!==1||P!==1)do if(T--,P--,0>P||p[T]!==y[P]){var N=`
`+p[T].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=T&&0<=P);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?Y(r):""}function be(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case M:return"Fragment";case _e:return"Portal";case k:return"Profiler";case R:return"StrictMode";case C:return"Suspense";case se:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case L:return(r._context.displayName||"Context")+".Provider";case b:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ae:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case Se:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function Fe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function qe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ke(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ct(r){var s=Ke(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,y.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Cr(r){r._valueTracker||(r._valueTracker=Ct(r))}function Qs(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return r&&(d=Ke(r)?r.checked?"true":"false":r.value),r=d,r!==l?(s.setValue(r),!0):!1}function ti(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function es(r,s){var l=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ys(r,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=qe(s.value!=null?s.value:l),r._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ya(r,s){s=s.checked,s!=null&&W(r,"checked",s,!1)}function va(r,s){ya(r,s);var l=qe(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Xs(r,s.type,l):s.hasOwnProperty("defaultValue")&&Xs(r,s.type,qe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function nu(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Xs(r,s,l){(s!=="number"||ti(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Rr=Array.isArray;function Pr(r,s,l,d){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&d&&(r[l].defaultSelected=!0)}else{for(l=""+qe(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,d&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function _a(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Js(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Rr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:qe(l)}}function Zs(r,s){var l=qe(s.value),d=qe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),d!=null&&(r.defaultValue=""+d)}function wa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var kr,Ea=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,d,p)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(kr=kr||document.createElement("div"),kr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=kr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ni(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(r){ns.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ts[s]=ts[r]})});function Ta(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ts.hasOwnProperty(r)&&ts[r]?(""+s).trim():s+"px"}function Ia(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=Ta(l,s[l],d);l==="float"&&(l="cssFloat"),d?r.setProperty(l,p):r[l]=p}}var Sa=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(r,s){if(s){if(Sa[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ca(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function eo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var to=null,An=null,lr=null;function no(r){if(r=Ya(r)){if(typeof to!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Nu(s),to(r.stateNode,r.type,s))}}function ur(r){An?lr?lr.push(r):lr=[r]:An=r}function Ra(){if(An){var r=An,s=lr;if(lr=An=null,no(r),s)for(r=0;r<s.length;r++)no(s[r])}}function is(r,s){return r(s)}function Pa(){}var xr=!1;function ka(r,s,l){if(xr)return r(s,l);xr=!0;try{return is(r,s,l)}finally{xr=!1,(An!==null||lr!==null)&&(Pa(),Ra())}}function ct(r,s){var l=r.stateNode;if(l===null)return null;var d=Nu(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var ro=!1;if(h)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{ro=!1}function ss(r,s,l,d,p,y,T,P,N){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(ne){this.onError(ne)}}var os=!1,io=null,Bn=!1,xa=null,Fh={onError:function(r){os=!0,io=r}};function so(r,s,l,d,p,y,T,P,N){os=!1,io=null,ss.apply(Fh,arguments)}function ru(r,s,l,d,p,y,T,P,N){if(so.apply(this,arguments),os){if(os){var $=io;os=!1,io=null}else throw Error(t(198));Bn||(Bn=!0,xa=$)}}function zn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function as(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function qn(r){if(zn(r)!==r)throw Error(t(188))}function iu(r){var s=r.alternate;if(!s){if(s=zn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,d=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return qn(p),r;if(y===d)return qn(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=y;else{for(var T=!1,P=p.child;P;){if(P===l){T=!0,l=p,d=y;break}if(P===d){T=!0,d=p,l=y;break}P=P.sibling}if(!T){for(P=y.child;P;){if(P===l){T=!0,l=y,d=p;break}if(P===d){T=!0,d=y,l=p;break}P=P.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ba(r){return r=iu(r),r!==null?oo(r):null}function oo(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=oo(r);if(s!==null)return s;r=r.sibling}return null}var ao=e.unstable_scheduleCallback,Na=e.unstable_cancelCallback,su=e.unstable_shouldYield,Bh=e.unstable_requestPaint,Ge=e.unstable_now,ou=e.unstable_getCurrentPriorityLevel,ls=e.unstable_ImmediatePriority,ri=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,Oa=e.unstable_LowPriority,au=e.unstable_IdlePriority,us=null,mn=null;function lu(r){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(us,r,void 0,(r.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:cu,Da=Math.log,uu=Math.LN2;function cu(r){return r>>>=0,r===0?32:31-(Da(r)/uu|0)|0}var lo=64,uo=4194304;function ii(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function cs(r,s){var l=r.pendingLanes;if(l===0)return 0;var d=0,p=r.suspendedLanes,y=r.pingedLanes,T=l&268435455;if(T!==0){var P=T&~p;P!==0?d=ii(P):(y&=T,y!==0&&(d=ii(y)))}else T=l&~p,T!==0?d=ii(T):y!==0&&(d=ii(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&p)===0&&(p=d&-d,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)l=31-Gt(s),p=1<<l,d|=r[l],s&=~p;return d}function zh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(r,s){for(var l=r.suspendedLanes,d=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var T=31-Gt(y),P=1<<T,N=p[T];N===-1?((P&l)===0||(P&d)!==0)&&(p[T]=zh(P,s)):N<=s&&(r.expiredLanes|=P),y&=~P}}function gn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function hs(){var r=lo;return lo<<=1,(lo&4194240)===0&&(lo=64),r}function si(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function oi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Gt(s),r[s]=l}function We(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-Gt(l),y=1<<p;s[p]=0,d[p]=-1,r[p]=-1,l&=~y}}function ai(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var d=31-Gt(l),p=1<<d;p&s|r[d]&s&&(r[d]|=s),l&=~p}}var Ve=0;function li(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var hu,co,du,fu,pu,La=!1,cr=[],Ot=null,$n=null,Hn=null,ui=new Map,Rn=new Map,hr=[],qh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mu(r,s){switch(r){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":ui.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(s.pointerId)}}function en(r,s,l,d,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Ya(s),s!==null&&co(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function $h(r,s,l,d,p){switch(s){case"focusin":return Ot=en(Ot,r,s,l,d,p),!0;case"dragenter":return $n=en($n,r,s,l,d,p),!0;case"mouseover":return Hn=en(Hn,r,s,l,d,p),!0;case"pointerover":var y=p.pointerId;return ui.set(y,en(ui.get(y)||null,r,s,l,d,p)),!0;case"gotpointercapture":return y=p.pointerId,Rn.set(y,en(Rn.get(y)||null,r,s,l,d,p)),!0}return!1}function gu(r){var s=gs(r.target);if(s!==null){var l=zn(s);if(l!==null){if(s=l.tag,s===13){if(s=as(l),s!==null){r.blockedOn=s,pu(r.priority,function(){du(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=ho(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);rs=d,l.target.dispatchEvent(d),rs=null}else return s=Ya(l),s!==null&&co(s),r.blockedOn=l,!1;s.shift()}return!0}function ds(r,s,l){Nr(r)&&l.delete(s)}function yu(){La=!1,Ot!==null&&Nr(Ot)&&(Ot=null),$n!==null&&Nr($n)&&($n=null),Hn!==null&&Nr(Hn)&&(Hn=null),ui.forEach(ds),Rn.forEach(ds)}function Wn(r,s){r.blockedOn===s&&(r.blockedOn=null,La||(La=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yu)))}function Kn(r){function s(p){return Wn(p,r)}if(0<cr.length){Wn(cr[0],r);for(var l=1;l<cr.length;l++){var d=cr[l];d.blockedOn===r&&(d.blockedOn=null)}}for(Ot!==null&&Wn(Ot,r),$n!==null&&Wn($n,r),Hn!==null&&Wn(Hn,r),ui.forEach(s),Rn.forEach(s),l=0;l<hr.length;l++)d=hr[l],d.blockedOn===r&&(d.blockedOn=null);for(;0<hr.length&&(l=hr[0],l.blockedOn===null);)gu(l),l.blockedOn===null&&hr.shift()}var Or=H.ReactCurrentBatchConfig,ci=!0;function Ze(r,s,l,d){var p=Ve,y=Or.transition;Or.transition=null;try{Ve=1,Ma(r,s,l,d)}finally{Ve=p,Or.transition=y}}function Hh(r,s,l,d){var p=Ve,y=Or.transition;Or.transition=null;try{Ve=4,Ma(r,s,l,d)}finally{Ve=p,Or.transition=y}}function Ma(r,s,l,d){if(ci){var p=ho(r,s,l,d);if(p===null)nd(r,s,d,fs,l),mu(r,d);else if($h(p,r,s,l,d))d.stopPropagation();else if(mu(r,d),s&4&&-1<qh.indexOf(r)){for(;p!==null;){var y=Ya(p);if(y!==null&&hu(y),y=ho(r,s,l,d),y===null&&nd(r,s,d,fs,l),y===p)break;p=y}p!==null&&d.stopPropagation()}else nd(r,s,d,null,l)}}var fs=null;function ho(r,s,l,d){if(fs=null,r=eo(d),r=gs(r),r!==null)if(s=zn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=as(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return fs=r,null}function Va(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ou()){case ls:return 1;case ri:return 4;case Cn:case Oa:return 16;case au:return 536870912;default:return 16}default:return 16}}var yn=null,fo=null,tn=null;function ja(){if(tn)return tn;var r,s=fo,l=s.length,d,p="value"in yn?yn.value:yn.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var T=l-r;for(d=1;d<=T&&s[l-d]===p[y-d];d++);return tn=p.slice(r,1<d?1-d:void 0)}function po(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function dr(){return!0}function Ua(){return!1}function Dt(r){function s(l,d,p,y,T){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(l=r[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?dr:Ua,this.isPropagationStopped=Ua,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),s}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=Dt(Gn),fr=ie({},Gn,{view:0,detail:0}),Wh=Dt(fr),go,Dr,hi,ps=ie({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hi&&(hi&&r.type==="mousemove"?(go=r.screenX-hi.screenX,Dr=r.screenY-hi.screenY):Dr=go=0,hi=r),go)},movementY:function(r){return"movementY"in r?r.movementY:Dr}}),yo=Dt(ps),Fa=ie({},ps,{dataTransfer:0}),vu=Dt(Fa),vo=ie({},fr,{relatedTarget:0}),_o=Dt(vo),_u=ie({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lr=Dt(_u),wu=ie({},Gn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eu=Dt(wu),Tu=ie({},Gn,{data:0}),Ba=Dt(Tu),wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Su(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Iu[r])?!!s[r]:!1}function pr(){return Su}var c=ie({},fr,{key:function(r){if(r.key){var s=wo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=po(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(r){return r.type==="keypress"?po(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?po(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Dt(c),w=ie({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Dt(w),F=ie({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),K=Dt(F),le=ie({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Dt(le),Et=ie({},ps,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),je=Dt(Et),Rt=[9,13,27,32],mt=h&&"CompositionEvent"in window,Pn=null;h&&"documentMode"in document&&(Pn=document.documentMode);var vn=h&&"TextEvent"in window&&!Pn,ms=h&&(!mt||Pn&&8<Pn&&11>=Pn),Eo=" ",Bm=!1;function zm(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var To=!1;function fI(r,s){switch(r){case"compositionend":return qm(s);case"keypress":return s.which!==32?null:(Bm=!0,Eo);case"textInput":return r=s.data,r===Eo&&Bm?null:r;default:return null}}function pI(r,s){if(To)return r==="compositionend"||!mt&&zm(r,s)?(r=ja(),tn=fo=yn=null,To=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ms&&s.locale!=="ko"?null:s.data;default:return null}}var mI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $m(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!mI[r.type]:s==="textarea"}function Hm(r,s,l,d){ur(d),s=ku(s,"onChange"),0<s.length&&(l=new mo("onChange","change",null,l,d),r.push({event:l,listeners:s}))}var za=null,qa=null;function gI(r){ug(r,0)}function Au(r){var s=Ro(r);if(Qs(s))return r}function yI(r,s){if(r==="change")return s}var Wm=!1;if(h){var Kh;if(h){var Gh="oninput"in document;if(!Gh){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),Gh=typeof Km.oninput=="function"}Kh=Gh}else Kh=!1;Wm=Kh&&(!document.documentMode||9<document.documentMode)}function Gm(){za&&(za.detachEvent("onpropertychange",Qm),qa=za=null)}function Qm(r){if(r.propertyName==="value"&&Au(qa)){var s=[];Hm(s,qa,r,eo(r)),ka(gI,s)}}function vI(r,s,l){r==="focusin"?(Gm(),za=s,qa=l,za.attachEvent("onpropertychange",Qm)):r==="focusout"&&Gm()}function _I(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Au(qa)}function wI(r,s){if(r==="click")return Au(s)}function EI(r,s){if(r==="input"||r==="change")return Au(s)}function TI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:TI;function $a(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(s,p)||!Qn(r[p],s[p]))return!1}return!0}function Ym(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xm(r,s){var l=Ym(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=s&&d>=s)return{node:l,offset:s-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ym(l)}}function Jm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Jm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Zm(){for(var r=window,s=ti();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=ti(r.document)}return s}function Qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function II(r){var s=Zm(),l=r.focusedElem,d=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Jm(l.ownerDocument.documentElement,l)){if(d!==null&&Qh(l)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!r.extend&&y>d&&(p=d,d=y,y=p),p=Xm(l,y);var T=Xm(l,d);p&&T&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),y>d?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var SI=h&&"documentMode"in document&&11>=document.documentMode,Io=null,Yh=null,Ha=null,Xh=!1;function eg(r,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xh||Io==null||Io!==ti(d)||(d=Io,"selectionStart"in d&&Qh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ha&&$a(Ha,d)||(Ha=d,d=ku(Yh,"onSelect"),0<d.length&&(s=new mo("onSelect","select",null,s,l),r.push({event:s,listeners:d}),s.target=Io)))}function Cu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var So={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},Jh={},tg={};h&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Ru(r){if(Jh[r])return Jh[r];if(!So[r])return r;var s=So[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in tg)return Jh[r]=s[l];return r}var ng=Ru("animationend"),rg=Ru("animationiteration"),ig=Ru("animationstart"),sg=Ru("transitionend"),og=new Map,ag="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(r,s){og.set(r,s),a(s,[r])}for(var Zh=0;Zh<ag.length;Zh++){var ed=ag[Zh],AI=ed.toLowerCase(),CI=ed[0].toUpperCase()+ed.slice(1);di(AI,"on"+CI)}di(ng,"onAnimationEnd"),di(rg,"onAnimationIteration"),di(ig,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(sg,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function lg(r,s,l){var d=r.type||"unknown-event";r.currentTarget=l,ru(d,s,void 0,r),r.currentTarget=null}function ug(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],p=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var T=d.length-1;0<=T;T--){var P=d[T],N=P.instance,$=P.currentTarget;if(P=P.listener,N!==y&&p.isPropagationStopped())break e;lg(p,P,$),y=N}else for(T=0;T<d.length;T++){if(P=d[T],N=P.instance,$=P.currentTarget,P=P.listener,N!==y&&p.isPropagationStopped())break e;lg(p,P,$),y=N}}}if(Bn)throw r=xa,Bn=!1,xa=null,r}function Ye(r,s){var l=s[ld];l===void 0&&(l=s[ld]=new Set);var d=r+"__bubble";l.has(d)||(cg(s,r,2,!1),l.add(d))}function td(r,s,l){var d=0;s&&(d|=4),cg(l,r,d,s)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Ka(r){if(!r[Pu]){r[Pu]=!0,i.forEach(function(l){l!=="selectionchange"&&(RI.has(l)||td(l,!1,r),td(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Pu]||(s[Pu]=!0,td("selectionchange",!1,s))}}function cg(r,s,l,d){switch(Va(s)){case 1:var p=Ze;break;case 4:p=Hh;break;default:p=Ma}l=p.bind(null,s,l,r),p=void 0,!ro||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function nd(r,s,l,d,p){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var P=d.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(T===4)for(T=d.return;T!==null;){var N=T.tag;if((N===3||N===4)&&(N=T.stateNode.containerInfo,N===p||N.nodeType===8&&N.parentNode===p))return;T=T.return}for(;P!==null;){if(T=gs(P),T===null)return;if(N=T.tag,N===5||N===6){d=y=T;continue e}P=P.parentNode}}d=d.return}ka(function(){var $=y,ne=eo(l),re=[];e:{var ee=og.get(r);if(ee!==void 0){var ce=mo,ge=r;switch(r){case"keypress":if(po(l)===0)break e;case"keydown":case"keyup":ce=g;break;case"focusin":ge="focus",ce=_o;break;case"focusout":ge="blur",ce=_o;break;case"beforeblur":case"afterblur":ce=_o;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=K;break;case ng:case rg:case ig:ce=Lr;break;case sg:ce=He;break;case"scroll":ce=Wh;break;case"wheel":ce=je;break;case"copy":case"cut":case"paste":ce=Eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=S}var ye=(s&4)!==0,ht=!ye&&r==="scroll",B=ye?ee!==null?ee+"Capture":null:ee;ye=[];for(var j=$,z;j!==null;){z=j;var oe=z.stateNode;if(z.tag===5&&oe!==null&&(z=oe,B!==null&&(oe=ct(j,B),oe!=null&&ye.push(Ga(j,oe,z)))),ht)break;j=j.return}0<ye.length&&(ee=new ce(ee,ge,null,l,ne),re.push({event:ee,listeners:ye}))}}if((s&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",ee&&l!==rs&&(ge=l.relatedTarget||l.fromElement)&&(gs(ge)||ge[Mr]))break e;if((ce||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(ge=l.relatedTarget||l.toElement,ce=$,ge=ge?gs(ge):null,ge!==null&&(ht=zn(ge),ge!==ht||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=$),ce!==ge)){if(ye=yo,oe="onMouseLeave",B="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(ye=S,oe="onPointerLeave",B="onPointerEnter",j="pointer"),ht=ce==null?ee:Ro(ce),z=ge==null?ee:Ro(ge),ee=new ye(oe,j+"leave",ce,l,ne),ee.target=ht,ee.relatedTarget=z,oe=null,gs(ne)===$&&(ye=new ye(B,j+"enter",ge,l,ne),ye.target=z,ye.relatedTarget=ht,oe=ye),ht=oe,ce&&ge)t:{for(ye=ce,B=ge,j=0,z=ye;z;z=Ao(z))j++;for(z=0,oe=B;oe;oe=Ao(oe))z++;for(;0<j-z;)ye=Ao(ye),j--;for(;0<z-j;)B=Ao(B),z--;for(;j--;){if(ye===B||B!==null&&ye===B.alternate)break t;ye=Ao(ye),B=Ao(B)}ye=null}else ye=null;ce!==null&&hg(re,ee,ce,ye,!1),ge!==null&&ht!==null&&hg(re,ht,ge,ye,!0)}}e:{if(ee=$?Ro($):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var ve=yI;else if($m(ee))if(Wm)ve=EI;else{ve=_I;var Ee=vI}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ve=wI);if(ve&&(ve=ve(r,$))){Hm(re,ve,l,ne);break e}Ee&&Ee(r,ee,$),r==="focusout"&&(Ee=ee._wrapperState)&&Ee.controlled&&ee.type==="number"&&Xs(ee,"number",ee.value)}switch(Ee=$?Ro($):window,r){case"focusin":($m(Ee)||Ee.contentEditable==="true")&&(Io=Ee,Yh=$,Ha=null);break;case"focusout":Ha=Yh=Io=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,eg(re,l,ne);break;case"selectionchange":if(SI)break;case"keydown":case"keyup":eg(re,l,ne)}var Te;if(mt)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else To?zm(r,l)&&(Ce="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(ms&&l.locale!=="ko"&&(To||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&To&&(Te=ja()):(yn=ne,fo="value"in yn?yn.value:yn.textContent,To=!0)),Ee=ku($,Ce),0<Ee.length&&(Ce=new Ba(Ce,r,null,l,ne),re.push({event:Ce,listeners:Ee}),Te?Ce.data=Te:(Te=qm(l),Te!==null&&(Ce.data=Te)))),(Te=vn?fI(r,l):pI(r,l))&&($=ku($,"onBeforeInput"),0<$.length&&(ne=new Ba("onBeforeInput","beforeinput",null,l,ne),re.push({event:ne,listeners:$}),ne.data=Te))}ug(re,s)})}function Ga(r,s,l){return{instance:r,listener:s,currentTarget:l}}function ku(r,s){for(var l=s+"Capture",d=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ct(r,l),y!=null&&d.unshift(Ga(r,y,p)),y=ct(r,s),y!=null&&d.push(Ga(r,y,p))),r=r.return}return d}function Ao(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function hg(r,s,l,d,p){for(var y=s._reactName,T=[];l!==null&&l!==d;){var P=l,N=P.alternate,$=P.stateNode;if(N!==null&&N===d)break;P.tag===5&&$!==null&&(P=$,p?(N=ct(l,y),N!=null&&T.unshift(Ga(l,N,P))):p||(N=ct(l,y),N!=null&&T.push(Ga(l,N,P)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var PI=/\r\n?/g,kI=/\u0000|\uFFFD/g;function dg(r){return(typeof r=="string"?r:""+r).replace(PI,`
`).replace(kI,"")}function xu(r,s,l){if(s=dg(s),dg(r)!==s&&l)throw Error(t(425))}function bu(){}var rd=null,id=null;function sd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var od=typeof setTimeout=="function"?setTimeout:void 0,xI=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(r){return fg.resolve(null).then(r).catch(NI)}:od;function NI(r){setTimeout(function(){throw r})}function ad(r,s){var l=s,d=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){r.removeChild(p),Kn(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Kn(s)}function fi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function pg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Co=Math.random().toString(36).slice(2),mr="__reactFiber$"+Co,Qa="__reactProps$"+Co,Mr="__reactContainer$"+Co,ld="__reactEvents$"+Co,OI="__reactListeners$"+Co,DI="__reactHandles$"+Co;function gs(r){var s=r[mr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Mr]||l[mr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=pg(r);r!==null;){if(l=r[mr])return l;r=pg(r)}return s}r=l,l=r.parentNode}return null}function Ya(r){return r=r[mr]||r[Mr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ro(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Nu(r){return r[Qa]||null}var ud=[],Po=-1;function pi(r){return{current:r}}function Xe(r){0>Po||(r.current=ud[Po],ud[Po]=null,Po--)}function Qe(r,s){Po++,ud[Po]=r.current,r.current=s}var mi={},Ft=pi(mi),nn=pi(!1),ys=mi;function ko(r,s){var l=r.type.contextTypes;if(!l)return mi;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function rn(r){return r=r.childContextTypes,r!=null}function Ou(){Xe(nn),Xe(Ft)}function mg(r,s,l){if(Ft.current!==mi)throw Error(t(168));Qe(Ft,s),Qe(nn,l)}function gg(r,s,l){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in s))throw Error(t(108,Fe(r)||"Unknown",p));return ie({},l,d)}function Du(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||mi,ys=Ft.current,Qe(Ft,r),Qe(nn,nn.current),!0}function yg(r,s,l){var d=r.stateNode;if(!d)throw Error(t(169));l?(r=gg(r,s,ys),d.__reactInternalMemoizedMergedChildContext=r,Xe(nn),Xe(Ft),Qe(Ft,r)):Xe(nn),Qe(nn,l)}var Vr=null,Lu=!1,cd=!1;function vg(r){Vr===null?Vr=[r]:Vr.push(r)}function LI(r){Lu=!0,vg(r)}function gi(){if(!cd&&Vr!==null){cd=!0;var r=0,s=Ve;try{var l=Vr;for(Ve=1;r<l.length;r++){var d=l[r];do d=d(!0);while(d!==null)}Vr=null,Lu=!1}catch(p){throw Vr!==null&&(Vr=Vr.slice(r+1)),ao(ls,gi),p}finally{Ve=s,cd=!1}}return null}var xo=[],bo=0,Mu=null,Vu=0,kn=[],xn=0,vs=null,jr=1,Ur="";function _s(r,s){xo[bo++]=Vu,xo[bo++]=Mu,Mu=r,Vu=s}function _g(r,s,l){kn[xn++]=jr,kn[xn++]=Ur,kn[xn++]=vs,vs=r;var d=jr;r=Ur;var p=32-Gt(d)-1;d&=~(1<<p),l+=1;var y=32-Gt(s)+p;if(30<y){var T=p-p%5;y=(d&(1<<T)-1).toString(32),d>>=T,p-=T,jr=1<<32-Gt(s)+p|l<<p|d,Ur=y+r}else jr=1<<y|l<<p|d,Ur=r}function hd(r){r.return!==null&&(_s(r,1),_g(r,1,0))}function dd(r){for(;r===Mu;)Mu=xo[--bo],xo[bo]=null,Vu=xo[--bo],xo[bo]=null;for(;r===vs;)vs=kn[--xn],kn[xn]=null,Ur=kn[--xn],kn[xn]=null,jr=kn[--xn],kn[xn]=null}var _n=null,wn=null,et=!1,Yn=null;function wg(r,s){var l=Dn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Eg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,_n=r,wn=fi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,_n=r,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=vs!==null?{id:jr,overflow:Ur}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Dn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,_n=r,wn=null,!0):!1;default:return!1}}function fd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function pd(r){if(et){var s=wn;if(s){var l=s;if(!Eg(r,s)){if(fd(r))throw Error(t(418));s=fi(l.nextSibling);var d=_n;s&&Eg(r,s)?wg(d,l):(r.flags=r.flags&-4097|2,et=!1,_n=r)}}else{if(fd(r))throw Error(t(418));r.flags=r.flags&-4097|2,et=!1,_n=r}}}function Tg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;_n=r}function ju(r){if(r!==_n)return!1;if(!et)return Tg(r),et=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!sd(r.type,r.memoizedProps)),s&&(s=wn)){if(fd(r))throw Ig(),Error(t(418));for(;s;)wg(r,s),s=fi(s.nextSibling)}if(Tg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){wn=fi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}wn=null}}else wn=_n?fi(r.stateNode.nextSibling):null;return!0}function Ig(){for(var r=wn;r;)r=fi(r.nextSibling)}function No(){wn=_n=null,et=!1}function md(r){Yn===null?Yn=[r]:Yn.push(r)}var MI=H.ReactCurrentBatchConfig;function Xa(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,r));var p=d,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(T){var P=p.refs;T===null?delete P[y]:P[y]=T},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Uu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Sg(r){var s=r._init;return s(r._payload)}function Ag(r){function s(B,j){if(r){var z=B.deletions;z===null?(B.deletions=[j],B.flags|=16):z.push(j)}}function l(B,j){if(!r)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function d(B,j){for(B=new Map;j!==null;)j.key!==null?B.set(j.key,j):B.set(j.index,j),j=j.sibling;return B}function p(B,j){return B=Si(B,j),B.index=0,B.sibling=null,B}function y(B,j,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<j?(B.flags|=2,j):z):(B.flags|=2,j)):(B.flags|=1048576,j)}function T(B){return r&&B.alternate===null&&(B.flags|=2),B}function P(B,j,z,oe){return j===null||j.tag!==6?(j=af(z,B.mode,oe),j.return=B,j):(j=p(j,z),j.return=B,j)}function N(B,j,z,oe){var ve=z.type;return ve===M?ne(B,j,z.props.children,oe,z.key):j!==null&&(j.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Se&&Sg(ve)===j.type)?(oe=p(j,z.props),oe.ref=Xa(B,j,z),oe.return=B,oe):(oe=uc(z.type,z.key,z.props,null,B.mode,oe),oe.ref=Xa(B,j,z),oe.return=B,oe)}function $(B,j,z,oe){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=lf(z,B.mode,oe),j.return=B,j):(j=p(j,z.children||[]),j.return=B,j)}function ne(B,j,z,oe,ve){return j===null||j.tag!==7?(j=Rs(z,B.mode,oe,ve),j.return=B,j):(j=p(j,z),j.return=B,j)}function re(B,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=af(""+j,B.mode,z),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case pe:return z=uc(j.type,j.key,j.props,null,B.mode,z),z.ref=Xa(B,null,j),z.return=B,z;case _e:return j=lf(j,B.mode,z),j.return=B,j;case Se:var oe=j._init;return re(B,oe(j._payload),z)}if(Rr(j)||ue(j))return j=Rs(j,B.mode,z,null),j.return=B,j;Uu(B,j)}return null}function ee(B,j,z,oe){var ve=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ve!==null?null:P(B,j,""+z,oe);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case pe:return z.key===ve?N(B,j,z,oe):null;case _e:return z.key===ve?$(B,j,z,oe):null;case Se:return ve=z._init,ee(B,j,ve(z._payload),oe)}if(Rr(z)||ue(z))return ve!==null?null:ne(B,j,z,oe,null);Uu(B,z)}return null}function ce(B,j,z,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return B=B.get(z)||null,P(j,B,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case pe:return B=B.get(oe.key===null?z:oe.key)||null,N(j,B,oe,ve);case _e:return B=B.get(oe.key===null?z:oe.key)||null,$(j,B,oe,ve);case Se:var Ee=oe._init;return ce(B,j,z,Ee(oe._payload),ve)}if(Rr(oe)||ue(oe))return B=B.get(z)||null,ne(j,B,oe,ve,null);Uu(j,oe)}return null}function ge(B,j,z,oe){for(var ve=null,Ee=null,Te=j,Ce=j=0,xt=null;Te!==null&&Ce<z.length;Ce++){Te.index>Ce?(xt=Te,Te=null):xt=Te.sibling;var ze=ee(B,Te,z[Ce],oe);if(ze===null){Te===null&&(Te=xt);break}r&&Te&&ze.alternate===null&&s(B,Te),j=y(ze,j,Ce),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze,Te=xt}if(Ce===z.length)return l(B,Te),et&&_s(B,Ce),ve;if(Te===null){for(;Ce<z.length;Ce++)Te=re(B,z[Ce],oe),Te!==null&&(j=y(Te,j,Ce),Ee===null?ve=Te:Ee.sibling=Te,Ee=Te);return et&&_s(B,Ce),ve}for(Te=d(B,Te);Ce<z.length;Ce++)xt=ce(Te,B,Ce,z[Ce],oe),xt!==null&&(r&&xt.alternate!==null&&Te.delete(xt.key===null?Ce:xt.key),j=y(xt,j,Ce),Ee===null?ve=xt:Ee.sibling=xt,Ee=xt);return r&&Te.forEach(function(Ai){return s(B,Ai)}),et&&_s(B,Ce),ve}function ye(B,j,z,oe){var ve=ue(z);if(typeof ve!="function")throw Error(t(150));if(z=ve.call(z),z==null)throw Error(t(151));for(var Ee=ve=null,Te=j,Ce=j=0,xt=null,ze=z.next();Te!==null&&!ze.done;Ce++,ze=z.next()){Te.index>Ce?(xt=Te,Te=null):xt=Te.sibling;var Ai=ee(B,Te,ze.value,oe);if(Ai===null){Te===null&&(Te=xt);break}r&&Te&&Ai.alternate===null&&s(B,Te),j=y(Ai,j,Ce),Ee===null?ve=Ai:Ee.sibling=Ai,Ee=Ai,Te=xt}if(ze.done)return l(B,Te),et&&_s(B,Ce),ve;if(Te===null){for(;!ze.done;Ce++,ze=z.next())ze=re(B,ze.value,oe),ze!==null&&(j=y(ze,j,Ce),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze);return et&&_s(B,Ce),ve}for(Te=d(B,Te);!ze.done;Ce++,ze=z.next())ze=ce(Te,B,Ce,ze.value,oe),ze!==null&&(r&&ze.alternate!==null&&Te.delete(ze.key===null?Ce:ze.key),j=y(ze,j,Ce),Ee===null?ve=ze:Ee.sibling=ze,Ee=ze);return r&&Te.forEach(function(mS){return s(B,mS)}),et&&_s(B,Ce),ve}function ht(B,j,z,oe){if(typeof z=="object"&&z!==null&&z.type===M&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case pe:e:{for(var ve=z.key,Ee=j;Ee!==null;){if(Ee.key===ve){if(ve=z.type,ve===M){if(Ee.tag===7){l(B,Ee.sibling),j=p(Ee,z.props.children),j.return=B,B=j;break e}}else if(Ee.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Se&&Sg(ve)===Ee.type){l(B,Ee.sibling),j=p(Ee,z.props),j.ref=Xa(B,Ee,z),j.return=B,B=j;break e}l(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}z.type===M?(j=Rs(z.props.children,B.mode,oe,z.key),j.return=B,B=j):(oe=uc(z.type,z.key,z.props,null,B.mode,oe),oe.ref=Xa(B,j,z),oe.return=B,B=oe)}return T(B);case _e:e:{for(Ee=z.key;j!==null;){if(j.key===Ee)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){l(B,j.sibling),j=p(j,z.children||[]),j.return=B,B=j;break e}else{l(B,j);break}else s(B,j);j=j.sibling}j=lf(z,B.mode,oe),j.return=B,B=j}return T(B);case Se:return Ee=z._init,ht(B,j,Ee(z._payload),oe)}if(Rr(z))return ge(B,j,z,oe);if(ue(z))return ye(B,j,z,oe);Uu(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(l(B,j.sibling),j=p(j,z),j.return=B,B=j):(l(B,j),j=af(z,B.mode,oe),j.return=B,B=j),T(B)):l(B,j)}return ht}var Oo=Ag(!0),Cg=Ag(!1),Fu=pi(null),Bu=null,Do=null,gd=null;function yd(){gd=Do=Bu=null}function vd(r){var s=Fu.current;Xe(Fu),r._currentValue=s}function _d(r,s,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===l)break;r=r.return}}function Lo(r,s){Bu=r,gd=Do=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(sn=!0),r.firstContext=null)}function bn(r){var s=r._currentValue;if(gd!==r)if(r={context:r,memoizedValue:s,next:null},Do===null){if(Bu===null)throw Error(t(308));Do=r,Bu.dependencies={lanes:0,firstContext:r}}else Do=Do.next=r;return s}var ws=null;function wd(r){ws===null?ws=[r]:ws.push(r)}function Rg(r,s,l,d){var p=s.interleaved;return p===null?(l.next=l,wd(s)):(l.next=p.next,p.next=l),s.interleaved=l,Fr(r,d)}function Fr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var yi=!1;function Ed(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Br(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function vi(r,s,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Be&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,Fr(r,l)}return p=d.interleaved,p===null?(s.next=s,wd(d)):(s.next=p.next,p.next=s),d.interleaved=s,Fr(r,l)}function zu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,ai(r,l)}}function kg(r,s){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function qu(r,s,l,d){var p=r.updateQueue;yi=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var N=P,$=N.next;N.next=null,T===null?y=$:T.next=$,T=N;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,P=ne.lastBaseUpdate,P!==T&&(P===null?ne.firstBaseUpdate=$:P.next=$,ne.lastBaseUpdate=N))}if(y!==null){var re=p.baseState;T=0,ne=$=N=null,P=y;do{var ee=P.lane,ce=P.eventTime;if((d&ee)===ee){ne!==null&&(ne=ne.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=r,ye=P;switch(ee=s,ce=l,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(ce,re,ee);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,ee=typeof ge=="function"?ge.call(ce,re,ee):ge,ee==null)break e;re=ie({},re,ee);break e;case 2:yi=!0}}P.callback!==null&&P.lane!==0&&(r.flags|=64,ee=p.effects,ee===null?p.effects=[P]:ee.push(P))}else ce={eventTime:ce,lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ne===null?($=ne=ce,N=re):ne=ne.next=ce,T|=ee;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;ee=P,P=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);if(ne===null&&(N=re),p.baseState=N,p.firstBaseUpdate=$,p.lastBaseUpdate=ne,s=p.shared.interleaved,s!==null){p=s;do T|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);Is|=T,r.lanes=T,r.memoizedState=re}}function xg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Ja={},gr=pi(Ja),Za=pi(Ja),el=pi(Ja);function Es(r){if(r===Ja)throw Error(t(174));return r}function Td(r,s){switch(Qe(el,s),Qe(Za,r),Qe(gr,Ja),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=wt(s,r)}Xe(gr),Qe(gr,s)}function Mo(){Xe(gr),Xe(Za),Xe(el)}function bg(r){Es(el.current);var s=Es(gr.current),l=wt(s,r.type);s!==l&&(Qe(Za,r),Qe(gr,l))}function Id(r){Za.current===r&&(Xe(gr),Xe(Za))}var rt=pi(0);function $u(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Sd=[];function Ad(){for(var r=0;r<Sd.length;r++)Sd[r]._workInProgressVersionPrimary=null;Sd.length=0}var Hu=H.ReactCurrentDispatcher,Cd=H.ReactCurrentBatchConfig,Ts=0,it=null,Tt=null,Pt=null,Wu=!1,tl=!1,nl=0,VI=0;function Bt(){throw Error(t(321))}function Rd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Qn(r[l],s[l]))return!1;return!0}function Pd(r,s,l,d,p,y){if(Ts=y,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Hu.current=r===null||r.memoizedState===null?BI:zI,r=l(d,p),tl){y=0;do{if(tl=!1,nl=0,25<=y)throw Error(t(301));y+=1,Pt=Tt=null,s.updateQueue=null,Hu.current=qI,r=l(d,p)}while(tl)}if(Hu.current=Qu,s=Tt!==null&&Tt.next!==null,Ts=0,Pt=Tt=it=null,Wu=!1,s)throw Error(t(300));return r}function kd(){var r=nl!==0;return nl=0,r}function yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?it.memoizedState=Pt=r:Pt=Pt.next=r,Pt}function Nn(){if(Tt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var s=Pt===null?it.memoizedState:Pt.next;if(s!==null)Pt=s,Tt=r;else{if(r===null)throw Error(t(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Pt===null?it.memoizedState=Pt=r:Pt=Pt.next=r}return Pt}function rl(r,s){return typeof s=="function"?s(r):s}function xd(r){var s=Nn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var d=Tt,p=d.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}d.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,d=d.baseState;var P=T=null,N=null,$=y;do{var ne=$.lane;if((Ts&ne)===ne)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:r(d,$.action);else{var re={lane:ne,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(P=N=re,T=d):N=N.next=re,it.lanes|=ne,Is|=ne}$=$.next}while($!==null&&$!==y);N===null?T=d:N.next=P,Qn(d,s.memoizedState)||(sn=!0),s.memoizedState=d,s.baseState=T,s.baseQueue=N,l.lastRenderedState=d}if(r=l.interleaved,r!==null){p=r;do y=p.lane,it.lanes|=y,Is|=y,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function bd(r){var s=Nn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var d=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);Qn(y,s.memoizedState)||(sn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,d]}function Ng(){}function Og(r,s){var l=it,d=Nn(),p=s(),y=!Qn(d.memoizedState,p);if(y&&(d.memoizedState=p,sn=!0),d=d.queue,Nd(Mg.bind(null,l,d,r),[r]),d.getSnapshot!==s||y||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,il(9,Lg.bind(null,l,d,p,s),void 0,null),kt===null)throw Error(t(349));(Ts&30)!==0||Dg(l,s,p)}return p}function Dg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Lg(r,s,l,d){s.value=l,s.getSnapshot=d,Vg(s)&&jg(r)}function Mg(r,s,l){return l(function(){Vg(s)&&jg(r)})}function Vg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Qn(r,l)}catch{return!0}}function jg(r){var s=Fr(r,1);s!==null&&er(s,r,1,-1)}function Ug(r){var s=yr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:r},s.queue=r,r=r.dispatch=FI.bind(null,it,r),[s.memoizedState,r]}function il(r,s,l,d){return r={tag:r,create:s,destroy:l,deps:d,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,s.lastEffect=r)),r}function Fg(){return Nn().memoizedState}function Ku(r,s,l,d){var p=yr();it.flags|=r,p.memoizedState=il(1|s,l,void 0,d===void 0?null:d)}function Gu(r,s,l,d){var p=Nn();d=d===void 0?null:d;var y=void 0;if(Tt!==null){var T=Tt.memoizedState;if(y=T.destroy,d!==null&&Rd(d,T.deps)){p.memoizedState=il(s,l,y,d);return}}it.flags|=r,p.memoizedState=il(1|s,l,y,d)}function Bg(r,s){return Ku(8390656,8,r,s)}function Nd(r,s){return Gu(2048,8,r,s)}function zg(r,s){return Gu(4,2,r,s)}function qg(r,s){return Gu(4,4,r,s)}function $g(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Hg(r,s,l){return l=l!=null?l.concat([r]):null,Gu(4,4,$g.bind(null,s,r),l)}function Od(){}function Wg(r,s){var l=Nn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Rd(s,d[1])?d[0]:(l.memoizedState=[r,s],r)}function Kg(r,s){var l=Nn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Rd(s,d[1])?d[0]:(r=r(),l.memoizedState=[r,s],r)}function Gg(r,s,l){return(Ts&21)===0?(r.baseState&&(r.baseState=!1,sn=!0),r.memoizedState=l):(Qn(l,s)||(l=hs(),it.lanes|=l,Is|=l,r.baseState=!0),s)}function jI(r,s){var l=Ve;Ve=l!==0&&4>l?l:4,r(!0);var d=Cd.transition;Cd.transition={};try{r(!1),s()}finally{Ve=l,Cd.transition=d}}function Qg(){return Nn().memoizedState}function UI(r,s,l){var d=Ti(r);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Yg(r))Xg(s,l);else if(l=Rg(r,s,l,d),l!==null){var p=Xt();er(l,r,d,p),Jg(l,s,d)}}function FI(r,s,l){var d=Ti(r),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yg(r))Xg(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,P=y(T,l);if(p.hasEagerState=!0,p.eagerState=P,Qn(P,T)){var N=s.interleaved;N===null?(p.next=p,wd(s)):(p.next=N.next,N.next=p),s.interleaved=p;return}}catch{}finally{}l=Rg(r,s,p,d),l!==null&&(p=Xt(),er(l,r,d,p),Jg(l,s,d))}}function Yg(r){var s=r.alternate;return r===it||s!==null&&s===it}function Xg(r,s){tl=Wu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Jg(r,s,l){if((l&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,ai(r,l)}}var Qu={readContext:bn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},BI={readContext:bn,useCallback:function(r,s){return yr().memoizedState=[r,s===void 0?null:s],r},useContext:bn,useEffect:Bg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Ku(4194308,4,$g.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Ku(4194308,4,r,s)},useInsertionEffect:function(r,s){return Ku(4,2,r,s)},useMemo:function(r,s){var l=yr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var d=yr();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=UI.bind(null,it,r),[d.memoizedState,r]},useRef:function(r){var s=yr();return r={current:r},s.memoizedState=r},useState:Ug,useDebugValue:Od,useDeferredValue:function(r){return yr().memoizedState=r},useTransition:function(){var r=Ug(!1),s=r[0];return r=jI.bind(null,r[1]),yr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var d=it,p=yr();if(et){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),kt===null)throw Error(t(349));(Ts&30)!==0||Dg(d,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Bg(Mg.bind(null,d,y,r),[r]),d.flags|=2048,il(9,Lg.bind(null,d,y,l,s),void 0,null),l},useId:function(){var r=yr(),s=kt.identifierPrefix;if(et){var l=Ur,d=jr;l=(d&~(1<<32-Gt(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=nl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=VI++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},zI={readContext:bn,useCallback:Wg,useContext:bn,useEffect:Nd,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:qg,useMemo:Kg,useReducer:xd,useRef:Fg,useState:function(){return xd(rl)},useDebugValue:Od,useDeferredValue:function(r){var s=Nn();return Gg(s,Tt.memoizedState,r)},useTransition:function(){var r=xd(rl)[0],s=Nn().memoizedState;return[r,s]},useMutableSource:Ng,useSyncExternalStore:Og,useId:Qg,unstable_isNewReconciler:!1},qI={readContext:bn,useCallback:Wg,useContext:bn,useEffect:Nd,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:qg,useMemo:Kg,useReducer:bd,useRef:Fg,useState:function(){return bd(rl)},useDebugValue:Od,useDeferredValue:function(r){var s=Nn();return Tt===null?s.memoizedState=r:Gg(s,Tt.memoizedState,r)},useTransition:function(){var r=bd(rl)[0],s=Nn().memoizedState;return[r,s]},useMutableSource:Ng,useSyncExternalStore:Og,useId:Qg,unstable_isNewReconciler:!1};function Xn(r,s){if(r&&r.defaultProps){s=ie({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Dd(r,s,l,d){s=r.memoizedState,l=l(d,s),l=l==null?s:ie({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Yu={isMounted:function(r){return(r=r._reactInternals)?zn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var d=Xt(),p=Ti(r),y=Br(d,p);y.payload=s,l!=null&&(y.callback=l),s=vi(r,y,p),s!==null&&(er(s,r,p,d),zu(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var d=Xt(),p=Ti(r),y=Br(d,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=vi(r,y,p),s!==null&&(er(s,r,p,d),zu(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Xt(),d=Ti(r),p=Br(l,d);p.tag=2,s!=null&&(p.callback=s),s=vi(r,p,d),s!==null&&(er(s,r,d,l),zu(s,r,d))}};function Zg(r,s,l,d,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,T):s.prototype&&s.prototype.isPureReactComponent?!$a(l,d)||!$a(p,y):!0}function ey(r,s,l){var d=!1,p=mi,y=s.contextType;return typeof y=="object"&&y!==null?y=bn(y):(p=rn(s)?ys:Ft.current,d=s.contextTypes,y=(d=d!=null)?ko(r,p):mi),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Yu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),s}function ty(r,s,l,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==r&&Yu.enqueueReplaceState(s,s.state,null)}function Ld(r,s,l,d){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},Ed(r);var y=s.contextType;typeof y=="object"&&y!==null?p.context=bn(y):(y=rn(s)?ys:Ft.current,p.context=ko(r,y)),p.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Dd(r,s,y,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Yu.enqueueReplaceState(p,p.state,null),qu(r,l,p,d),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Vo(r,s){try{var l="",d=s;do l+=be(d),d=d.return;while(d);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:p,digest:null}}function Md(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Vd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var $I=typeof WeakMap=="function"?WeakMap:Map;function ny(r,s,l){l=Br(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){rc||(rc=!0,Jd=d),Vd(r,s)},l}function ry(r,s,l){l=Br(-1,l),l.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;l.payload=function(){return d(p)},l.callback=function(){Vd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Vd(r,s),typeof d!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function iy(r,s,l){var d=r.pingCache;if(d===null){d=r.pingCache=new $I;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(l)||(p.add(l),r=iS.bind(null,r,s,l),s.then(r,r))}function sy(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function oy(r,s,l,d,p){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Br(-1,1),s.tag=2,vi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var HI=H.ReactCurrentOwner,sn=!1;function Yt(r,s,l,d){s.child=r===null?Cg(s,null,l,d):Oo(s,r.child,l,d)}function ay(r,s,l,d,p){l=l.render;var y=s.ref;return Lo(s,p),d=Pd(r,s,l,d,y,p),l=kd(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,zr(r,s,p)):(et&&l&&hd(s),s.flags|=1,Yt(r,s,d,p),s.child)}function ly(r,s,l,d,p){if(r===null){var y=l.type;return typeof y=="function"&&!of(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,uy(r,s,y,d,p)):(r=uc(l.type,null,d,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:$a,l(T,d)&&r.ref===s.ref)return zr(r,s,p)}return s.flags|=1,r=Si(y,d),r.ref=s.ref,r.return=s,s.child=r}function uy(r,s,l,d,p){if(r!==null){var y=r.memoizedProps;if($a(y,d)&&r.ref===s.ref)if(sn=!1,s.pendingProps=d=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(sn=!0);else return s.lanes=r.lanes,zr(r,s,p)}return jd(r,s,l,d,p)}function cy(r,s,l){var d=s.pendingProps,p=d.children,y=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Uo,En),En|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(Uo,En),En|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,Qe(Uo,En),En|=d}else y!==null?(d=y.baseLanes|l,s.memoizedState=null):d=l,Qe(Uo,En),En|=d;return Yt(r,s,p,l),s.child}function hy(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function jd(r,s,l,d,p){var y=rn(l)?ys:Ft.current;return y=ko(s,y),Lo(s,p),l=Pd(r,s,l,d,y,p),d=kd(),r!==null&&!sn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,zr(r,s,p)):(et&&d&&hd(s),s.flags|=1,Yt(r,s,l,p),s.child)}function dy(r,s,l,d,p){if(rn(l)){var y=!0;Du(s)}else y=!1;if(Lo(s,p),s.stateNode===null)Ju(r,s),ey(s,l,d),Ld(s,l,d,p),d=!0;else if(r===null){var T=s.stateNode,P=s.memoizedProps;T.props=P;var N=T.context,$=l.contextType;typeof $=="object"&&$!==null?$=bn($):($=rn(l)?ys:Ft.current,$=ko(s,$));var ne=l.getDerivedStateFromProps,re=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(P!==d||N!==$)&&ty(s,T,d,$),yi=!1;var ee=s.memoizedState;T.state=ee,qu(s,d,T,p),N=s.memoizedState,P!==d||ee!==N||nn.current||yi?(typeof ne=="function"&&(Dd(s,l,ne,d),N=s.memoizedState),(P=yi||Zg(s,l,P,d,ee,N,$))?(re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=N),T.props=d,T.state=N,T.context=$,d=P):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{T=s.stateNode,Pg(r,s),P=s.memoizedProps,$=s.type===s.elementType?P:Xn(s.type,P),T.props=$,re=s.pendingProps,ee=T.context,N=l.contextType,typeof N=="object"&&N!==null?N=bn(N):(N=rn(l)?ys:Ft.current,N=ko(s,N));var ce=l.getDerivedStateFromProps;(ne=typeof ce=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(P!==re||ee!==N)&&ty(s,T,d,N),yi=!1,ee=s.memoizedState,T.state=ee,qu(s,d,T,p);var ge=s.memoizedState;P!==re||ee!==ge||nn.current||yi?(typeof ce=="function"&&(Dd(s,l,ce,d),ge=s.memoizedState),($=yi||Zg(s,l,$,d,ee,ge,N)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,ge,N),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,ge,N)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ge),T.props=d,T.state=ge,T.context=N,d=$):(typeof T.componentDidUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&ee===r.memoizedState||(s.flags|=1024),d=!1)}return Ud(r,s,l,d,y,p)}function Ud(r,s,l,d,p,y){hy(r,s);var T=(s.flags&128)!==0;if(!d&&!T)return p&&yg(s,l,!1),zr(r,s,y);d=s.stateNode,HI.current=s;var P=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&T?(s.child=Oo(s,r.child,null,y),s.child=Oo(s,null,P,y)):Yt(r,s,P,y),s.memoizedState=d.state,p&&yg(s,l,!0),s.child}function fy(r){var s=r.stateNode;s.pendingContext?mg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&mg(r,s.context,!1),Td(r,s.containerInfo)}function py(r,s,l,d,p){return No(),md(p),s.flags|=256,Yt(r,s,l,d),s.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Bd(r){return{baseLanes:r,cachePool:null,transitions:null}}function my(r,s,l){var d=s.pendingProps,p=rt.current,y=!1,T=(s.flags&128)!==0,P;if((P=T)||(P=r!==null&&r.memoizedState===null?!1:(p&2)!==0),P?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Qe(rt,p&1),r===null)return pd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=d.children,r=d.fallback,y?(d=s.mode,y=s.child,T={mode:"hidden",children:T},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=cc(T,d,0,null),r=Rs(r,d,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Bd(l),s.memoizedState=Fd,r):zd(s,T));if(p=r.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return WI(r,s,T,d,P,p,l);if(y){y=d.fallback,T=s.mode,p=r.child,P=p.sibling;var N={mode:"hidden",children:d.children};return(T&1)===0&&s.child!==p?(d=s.child,d.childLanes=0,d.pendingProps=N,s.deletions=null):(d=Si(p,N),d.subtreeFlags=p.subtreeFlags&14680064),P!==null?y=Si(P,y):(y=Rs(y,T,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,T=r.child.memoizedState,T=T===null?Bd(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=r.childLanes&~l,s.memoizedState=Fd,d}return y=r.child,r=y.sibling,d=Si(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=d,s.memoizedState=null,d}function zd(r,s){return s=cc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Xu(r,s,l,d){return d!==null&&md(d),Oo(s,r.child,null,l),r=zd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function WI(r,s,l,d,p,y,T){if(l)return s.flags&256?(s.flags&=-257,d=Md(Error(t(422))),Xu(r,s,T,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=d.fallback,p=s.mode,d=cc({mode:"visible",children:d.children},p,0,null),y=Rs(y,p,T,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&Oo(s,r.child,null,T),s.child.memoizedState=Bd(T),s.memoizedState=Fd,y);if((s.mode&1)===0)return Xu(r,s,T,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var P=d.dgst;return d=P,y=Error(t(419)),d=Md(y,d,void 0),Xu(r,s,T,d)}if(P=(T&r.childLanes)!==0,sn||P){if(d=kt,d!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Fr(r,p),er(d,r,p,-1))}return sf(),d=Md(Error(t(421))),Xu(r,s,T,d)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=sS.bind(null,r),p._reactRetry=s,null):(r=y.treeContext,wn=fi(p.nextSibling),_n=s,et=!0,Yn=null,r!==null&&(kn[xn++]=jr,kn[xn++]=Ur,kn[xn++]=vs,jr=r.id,Ur=r.overflow,vs=s),s=zd(s,d.children),s.flags|=4096,s)}function gy(r,s,l){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),_d(r.return,s,l)}function qd(r,s,l,d,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=p)}function yy(r,s,l){var d=s.pendingProps,p=d.revealOrder,y=d.tail;if(Yt(r,s,d.children,l),d=rt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&gy(r,l,s);else if(r.tag===19)gy(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Qe(rt,d),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&$u(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),qd(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&$u(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}qd(s,!0,l,null,y);break;case"together":qd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ju(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function zr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Is|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Si(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Si(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function KI(r,s,l){switch(s.tag){case 3:fy(s),No();break;case 5:bg(s);break;case 1:rn(s.type)&&Du(s);break;case 4:Td(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,p=s.memoizedProps.value;Qe(Fu,d._currentValue),d._currentValue=p;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Qe(rt,rt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?my(r,s,l):(Qe(rt,rt.current&1),r=zr(r,s,l),r!==null?r.sibling:null);Qe(rt,rt.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(r.flags&128)!==0){if(d)return yy(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Qe(rt,rt.current),d)break;return null;case 22:case 23:return s.lanes=0,cy(r,s,l)}return zr(r,s,l)}var vy,$d,_y,wy;vy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},$d=function(){},_y=function(r,s,l,d){var p=r.memoizedProps;if(p!==d){r=s.stateNode,Es(gr.current);var y=null;switch(l){case"input":p=es(r,p),d=es(r,d),y=[];break;case"select":p=ie({},p,{value:void 0}),d=ie({},d,{value:void 0}),y=[];break;case"textarea":p=_a(r,p),d=_a(r,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=bu)}Aa(l,d);var T;l=null;for($ in p)if(!d.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var P=p[$];for(T in P)P.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in d){var N=d[$];if(P=p!=null?p[$]:void 0,d.hasOwnProperty($)&&N!==P&&(N!=null||P!=null))if($==="style")if(P){for(T in P)!P.hasOwnProperty(T)||N&&N.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in N)N.hasOwnProperty(T)&&P[T]!==N[T]&&(l||(l={}),l[T]=N[T])}else l||(y||(y=[]),y.push($,l)),l=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(y=y||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&Ye("scroll",r),y||P===N||(y=[])):(y=y||[]).push($,N))}l&&(y=y||[]).push("style",l);var $=y;(s.updateQueue=$)&&(s.flags|=4)}},wy=function(r,s,l,d){l!==d&&(s.flags|=4)};function sl(r,s){if(!et)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=d,r.childLanes=l,s}function GI(r,s,l){var d=s.pendingProps;switch(dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return rn(s.type)&&Ou(),zt(s),null;case 3:return d=s.stateNode,Mo(),Xe(nn),Xe(Ft),Ad(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(ju(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yn!==null&&(tf(Yn),Yn=null))),$d(r,s),zt(s),null;case 5:Id(s);var p=Es(el.current);if(l=s.type,r!==null&&s.stateNode!=null)_y(r,s,l,d,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return zt(s),null}if(r=Es(gr.current),ju(s)){d=s.stateNode,l=s.type;var y=s.memoizedProps;switch(d[mr]=s,d[Qa]=y,r=(s.mode&1)!==0,l){case"dialog":Ye("cancel",d),Ye("close",d);break;case"iframe":case"object":case"embed":Ye("load",d);break;case"video":case"audio":for(p=0;p<Wa.length;p++)Ye(Wa[p],d);break;case"source":Ye("error",d);break;case"img":case"image":case"link":Ye("error",d),Ye("load",d);break;case"details":Ye("toggle",d);break;case"input":Ys(d,y),Ye("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Ye("invalid",d);break;case"textarea":Js(d,y),Ye("invalid",d)}Aa(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var P=y[T];T==="children"?typeof P=="string"?d.textContent!==P&&(y.suppressHydrationWarning!==!0&&xu(d.textContent,P,r),p=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&xu(d.textContent,P,r),p=["children",""+P]):o.hasOwnProperty(T)&&P!=null&&T==="onScroll"&&Ye("scroll",d)}switch(l){case"input":Cr(d),nu(d,y,!0);break;case"textarea":Cr(d),wa(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=bu)}d=p,s.updateQueue=d,d!==null&&(s.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=T.createElement(l,{is:d.is}):(r=T.createElement(l),l==="select"&&(T=r,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):r=T.createElementNS(r,l),r[mr]=s,r[Qa]=d,vy(r,s,!1,!1),s.stateNode=r;e:{switch(T=Ca(l,d),l){case"dialog":Ye("cancel",r),Ye("close",r),p=d;break;case"iframe":case"object":case"embed":Ye("load",r),p=d;break;case"video":case"audio":for(p=0;p<Wa.length;p++)Ye(Wa[p],r);p=d;break;case"source":Ye("error",r),p=d;break;case"img":case"image":case"link":Ye("error",r),Ye("load",r),p=d;break;case"details":Ye("toggle",r),p=d;break;case"input":Ys(r,d),p=es(r,d),Ye("invalid",r);break;case"option":p=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},p=ie({},d,{value:void 0}),Ye("invalid",r);break;case"textarea":Js(r,d),p=_a(r,d),Ye("invalid",r);break;default:p=d}Aa(l,p),P=p;for(y in P)if(P.hasOwnProperty(y)){var N=P[y];y==="style"?Ia(r,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Ea(r,N)):y==="children"?typeof N=="string"?(l!=="textarea"||N!=="")&&ni(r,N):typeof N=="number"&&ni(r,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?N!=null&&y==="onScroll"&&Ye("scroll",r):N!=null&&W(r,y,N,T))}switch(l){case"input":Cr(r),nu(r,d,!1);break;case"textarea":Cr(r),wa(r);break;case"option":d.value!=null&&r.setAttribute("value",""+qe(d.value));break;case"select":r.multiple=!!d.multiple,y=d.value,y!=null?Pr(r,!!d.multiple,y,!1):d.defaultValue!=null&&Pr(r,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=bu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(r&&s.stateNode!=null)wy(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=Es(el.current),Es(gr.current),ju(s)){if(d=s.stateNode,l=s.memoizedProps,d[mr]=s,(y=d.nodeValue!==l)&&(r=_n,r!==null))switch(r.tag){case 3:xu(d.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&xu(d.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[mr]=s,s.stateNode=d}return zt(s),null;case 13:if(Xe(rt),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(et&&wn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ig(),No(),s.flags|=98560,y=!1;else if(y=ju(s),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[mr]=s}else No(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),y=!1}else Yn!==null&&(tf(Yn),Yn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?It===0&&(It=3):sf())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return Mo(),$d(r,s),r===null&&Ka(s.stateNode.containerInfo),zt(s),null;case 10:return vd(s.type._context),zt(s),null;case 17:return rn(s.type)&&Ou(),zt(s),null;case 19:if(Xe(rt),y=s.memoizedState,y===null)return zt(s),null;if(d=(s.flags&128)!==0,T=y.rendering,T===null)if(d)sl(y,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=$u(r),T!==null){for(s.flags|=128,sl(y,!1),d=T.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)y=l,r=d,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,r=T.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Qe(rt,rt.current&1|2),s.child}r=r.sibling}y.tail!==null&&Ge()>Fo&&(s.flags|=128,d=!0,sl(y,!1),s.lanes=4194304)}else{if(!d)if(r=$u(T),r!==null){if(s.flags|=128,d=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),sl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!et)return zt(s),null}else 2*Ge()-y.renderingStartTime>Fo&&l!==1073741824&&(s.flags|=128,d=!0,sl(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(l=y.last,l!==null?l.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ge(),s.sibling=null,l=rt.current,Qe(rt,d?l&1|2:l&1),s):(zt(s),null);case 22:case 23:return rf(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(En&1073741824)!==0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function QI(r,s){switch(dd(s),s.tag){case 1:return rn(s.type)&&Ou(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Mo(),Xe(nn),Xe(Ft),Ad(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Id(s),null;case 13:if(Xe(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));No()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Xe(rt),null;case 4:return Mo(),null;case 10:return vd(s.type._context),null;case 22:case 23:return rf(),null;case 24:return null;default:return null}}var Zu=!1,qt=!1,YI=typeof WeakSet=="function"?WeakSet:Set,de=null;function jo(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){at(r,s,d)}else l.current=null}function Hd(r,s,l){try{l()}catch(d){at(r,s,d)}}var Ey=!1;function XI(r,s){if(rd=ci,r=Zm(),Qh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,P=-1,N=-1,$=0,ne=0,re=r,ee=null;t:for(;;){for(var ce;re!==l||p!==0&&re.nodeType!==3||(P=T+p),re!==y||d!==0&&re.nodeType!==3||(N=T+d),re.nodeType===3&&(T+=re.nodeValue.length),(ce=re.firstChild)!==null;)ee=re,re=ce;for(;;){if(re===r)break t;if(ee===l&&++$===p&&(P=T),ee===y&&++ne===d&&(N=T),(ce=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=ce}l=P===-1||N===-1?null:{start:P,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(id={focusedElem:r,selectionRange:l},ci=!1,de=s;de!==null;)if(s=de,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,de=r;else for(;de!==null;){s=de;try{var ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,ht=ge.memoizedState,B=s.stateNode,j=B.getSnapshotBeforeUpdate(s.elementType===s.type?ye:Xn(s.type,ye),ht);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){at(s,s.return,oe)}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}return ge=Ey,Ey=!1,ge}function ol(r,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&Hd(s,l,y)}p=p.next}while(p!==d)}}function ec(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function Wd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function Ty(r){var s=r.alternate;s!==null&&(r.alternate=null,Ty(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[mr],delete s[Qa],delete s[ld],delete s[OI],delete s[DI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Iy(r){return r.tag===5||r.tag===3||r.tag===4}function Sy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Iy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Kd(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=bu));else if(d!==4&&(r=r.child,r!==null))for(Kd(r,s,l),r=r.sibling;r!==null;)Kd(r,s,l),r=r.sibling}function Gd(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Gd(r,s,l),r=r.sibling;r!==null;)Gd(r,s,l),r=r.sibling}var Lt=null,Jn=!1;function _i(r,s,l){for(l=l.child;l!==null;)Ay(r,s,l),l=l.sibling}function Ay(r,s,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(us,l)}catch{}switch(l.tag){case 5:qt||jo(l,s);case 6:var d=Lt,p=Jn;Lt=null,_i(r,s,l),Lt=d,Jn=p,Lt!==null&&(Jn?(r=Lt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Lt.removeChild(l.stateNode));break;case 18:Lt!==null&&(Jn?(r=Lt,l=l.stateNode,r.nodeType===8?ad(r.parentNode,l):r.nodeType===1&&ad(r,l),Kn(r)):ad(Lt,l.stateNode));break;case 4:d=Lt,p=Jn,Lt=l.stateNode.containerInfo,Jn=!0,_i(r,s,l),Lt=d,Jn=p;break;case 0:case 11:case 14:case 15:if(!qt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&Hd(l,s,T),p=p.next}while(p!==d)}_i(r,s,l);break;case 1:if(!qt&&(jo(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(P){at(l,s,P)}_i(r,s,l);break;case 21:_i(r,s,l);break;case 22:l.mode&1?(qt=(d=qt)||l.memoizedState!==null,_i(r,s,l),qt=d):_i(r,s,l);break;default:_i(r,s,l)}}function Cy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new YI),s.forEach(function(d){var p=oS.bind(null,r,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Zn(r,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var y=r,T=s,P=T;e:for(;P!==null;){switch(P.tag){case 5:Lt=P.stateNode,Jn=!1;break e;case 3:Lt=P.stateNode.containerInfo,Jn=!0;break e;case 4:Lt=P.stateNode.containerInfo,Jn=!0;break e}P=P.return}if(Lt===null)throw Error(t(160));Ay(y,T,p),Lt=null,Jn=!1;var N=p.alternate;N!==null&&(N.return=null),p.return=null}catch($){at(p,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ry(s,r),s=s.sibling}function Ry(r,s){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Zn(s,r),vr(r),d&4){try{ol(3,r,r.return),ec(3,r)}catch(ye){at(r,r.return,ye)}try{ol(5,r,r.return)}catch(ye){at(r,r.return,ye)}}break;case 1:Zn(s,r),vr(r),d&512&&l!==null&&jo(l,l.return);break;case 5:if(Zn(s,r),vr(r),d&512&&l!==null&&jo(l,l.return),r.flags&32){var p=r.stateNode;try{ni(p,"")}catch(ye){at(r,r.return,ye)}}if(d&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,T=l!==null?l.memoizedProps:y,P=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&ya(p,y),Ca(P,T);var $=Ca(P,y);for(T=0;T<N.length;T+=2){var ne=N[T],re=N[T+1];ne==="style"?Ia(p,re):ne==="dangerouslySetInnerHTML"?Ea(p,re):ne==="children"?ni(p,re):W(p,ne,re,$)}switch(P){case"input":va(p,y);break;case"textarea":Zs(p,y);break;case"select":var ee=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var ce=y.value;ce!=null?Pr(p,!!y.multiple,ce,!1):ee!==!!y.multiple&&(y.defaultValue!=null?Pr(p,!!y.multiple,y.defaultValue,!0):Pr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Qa]=y}catch(ye){at(r,r.return,ye)}}break;case 6:if(Zn(s,r),vr(r),d&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(ye){at(r,r.return,ye)}}break;case 3:if(Zn(s,r),vr(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Kn(s.containerInfo)}catch(ye){at(r,r.return,ye)}break;case 4:Zn(s,r),vr(r);break;case 13:Zn(s,r),vr(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Xd=Ge())),d&4&&Cy(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(qt=($=qt)||ne,Zn(s,r),qt=$):Zn(s,r),vr(r),d&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!ne&&(r.mode&1)!==0)for(de=r,ne=r.child;ne!==null;){for(re=de=ne;de!==null;){switch(ee=de,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:ol(4,ee,ee.return);break;case 1:jo(ee,ee.return);var ge=ee.stateNode;if(typeof ge.componentWillUnmount=="function"){d=ee,l=ee.return;try{s=d,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(ye){at(d,l,ye)}}break;case 5:jo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){xy(re);continue}}ce!==null?(ce.return=ee,de=ce):xy(re)}ne=ne.sibling}e:for(ne=null,re=r;;){if(re.tag===5){if(ne===null){ne=re;try{p=re.stateNode,$?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=re.stateNode,N=re.memoizedProps.style,T=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=Ta("display",T))}catch(ye){at(r,r.return,ye)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=$?"":re.memoizedProps}catch(ye){at(r,r.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===r)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===r)break e;for(;re.sibling===null;){if(re.return===null||re.return===r)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(s,r),vr(r),d&4&&Cy(r);break;case 21:break;default:Zn(s,r),vr(r)}}function vr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Iy(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(ni(p,""),d.flags&=-33);var y=Sy(r);Gd(r,y,p);break;case 3:case 4:var T=d.stateNode.containerInfo,P=Sy(r);Kd(r,P,T);break;default:throw Error(t(161))}}catch(N){at(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function JI(r,s,l){de=r,Py(r)}function Py(r,s,l){for(var d=(r.mode&1)!==0;de!==null;){var p=de,y=p.child;if(p.tag===22&&d){var T=p.memoizedState!==null||Zu;if(!T){var P=p.alternate,N=P!==null&&P.memoizedState!==null||qt;P=Zu;var $=qt;if(Zu=T,(qt=N)&&!$)for(de=p;de!==null;)T=de,N=T.child,T.tag===22&&T.memoizedState!==null?by(p):N!==null?(N.return=T,de=N):by(p);for(;y!==null;)de=y,Py(y),y=y.sibling;de=p,Zu=P,qt=$}ky(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,de=y):ky(r)}}function ky(r){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:qt||ec(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!qt)if(l===null)d.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:Xn(s.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&xg(s,y,d);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}xg(s,T,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&l.focus();break;case"img":N.src&&(l.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var ne=$.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Kn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||s.flags&512&&Wd(s)}catch(ee){at(s,s.return,ee)}}if(s===r){de=null;break}if(l=s.sibling,l!==null){l.return=s.return,de=l;break}de=s.return}}function xy(r){for(;de!==null;){var s=de;if(s===r){de=null;break}var l=s.sibling;if(l!==null){l.return=s.return,de=l;break}de=s.return}}function by(r){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{ec(4,s)}catch(N){at(s,l,N)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var p=s.return;try{d.componentDidMount()}catch(N){at(s,p,N)}}var y=s.return;try{Wd(s)}catch(N){at(s,y,N)}break;case 5:var T=s.return;try{Wd(s)}catch(N){at(s,T,N)}}}catch(N){at(s,s.return,N)}if(s===r){de=null;break}var P=s.sibling;if(P!==null){P.return=s.return,de=P;break}de=s.return}}var ZI=Math.ceil,tc=H.ReactCurrentDispatcher,Qd=H.ReactCurrentOwner,On=H.ReactCurrentBatchConfig,Be=0,kt=null,gt=null,Mt=0,En=0,Uo=pi(0),It=0,al=null,Is=0,nc=0,Yd=0,ll=null,on=null,Xd=0,Fo=1/0,qr=null,rc=!1,Jd=null,wi=null,ic=!1,Ei=null,sc=0,ul=0,Zd=null,oc=-1,ac=0;function Xt(){return(Be&6)!==0?Ge():oc!==-1?oc:oc=Ge()}function Ti(r){return(r.mode&1)===0?1:(Be&2)!==0&&Mt!==0?Mt&-Mt:MI.transition!==null?(ac===0&&(ac=hs()),ac):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:Va(r.type)),r)}function er(r,s,l,d){if(50<ul)throw ul=0,Zd=null,Error(t(185));oi(r,l,d),((Be&2)===0||r!==kt)&&(r===kt&&((Be&2)===0&&(nc|=l),It===4&&Ii(r,Mt)),an(r,d),l===1&&Be===0&&(s.mode&1)===0&&(Fo=Ge()+500,Lu&&gi()))}function an(r,s){var l=r.callbackNode;br(r,s);var d=cs(r,r===kt?Mt:0);if(d===0)l!==null&&Na(l),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(l!=null&&Na(l),s===1)r.tag===0?LI(Oy.bind(null,r)):vg(Oy.bind(null,r)),bI(function(){(Be&6)===0&&gi()}),l=null;else{switch(li(d)){case 1:l=ls;break;case 4:l=ri;break;case 16:l=Cn;break;case 536870912:l=au;break;default:l=Cn}l=By(l,Ny.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Ny(r,s){if(oc=-1,ac=0,(Be&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Bo()&&r.callbackNode!==l)return null;var d=cs(r,r===kt?Mt:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=lc(r,d);else{s=d;var p=Be;Be|=2;var y=Ly();(kt!==r||Mt!==s)&&(qr=null,Fo=Ge()+500,As(r,s));do try{nS();break}catch(P){Dy(r,P)}while(!0);yd(),tc.current=y,Be=p,gt!==null?s=0:(kt=null,Mt=0,s=It)}if(s!==0){if(s===2&&(p=gn(r),p!==0&&(d=p,s=ef(r,p))),s===1)throw l=al,As(r,0),Ii(r,d),an(r,Ge()),l;if(s===6)Ii(r,d);else{if(p=r.current.alternate,(d&30)===0&&!eS(p)&&(s=lc(r,d),s===2&&(y=gn(r),y!==0&&(d=y,s=ef(r,y))),s===1))throw l=al,As(r,0),Ii(r,d),an(r,Ge()),l;switch(r.finishedWork=p,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Cs(r,on,qr);break;case 3:if(Ii(r,d),(d&130023424)===d&&(s=Xd+500-Ge(),10<s)){if(cs(r,0)!==0)break;if(p=r.suspendedLanes,(p&d)!==d){Xt(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=od(Cs.bind(null,r,on,qr),s);break}Cs(r,on,qr);break;case 4:if(Ii(r,d),(d&4194240)===d)break;for(s=r.eventTimes,p=-1;0<d;){var T=31-Gt(d);y=1<<T,T=s[T],T>p&&(p=T),d&=~y}if(d=p,d=Ge()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*ZI(d/1960))-d,10<d){r.timeoutHandle=od(Cs.bind(null,r,on,qr),d);break}Cs(r,on,qr);break;case 5:Cs(r,on,qr);break;default:throw Error(t(329))}}}return an(r,Ge()),r.callbackNode===l?Ny.bind(null,r):null}function ef(r,s){var l=ll;return r.current.memoizedState.isDehydrated&&(As(r,s).flags|=256),r=lc(r,s),r!==2&&(s=on,on=l,s!==null&&tf(s)),r}function tf(r){on===null?on=r:on.push.apply(on,r)}function eS(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],y=p.getSnapshot;p=p.value;try{if(!Qn(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ii(r,s){for(s&=~Yd,s&=~nc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Gt(s),d=1<<l;r[l]=-1,s&=~d}}function Oy(r){if((Be&6)!==0)throw Error(t(327));Bo();var s=cs(r,0);if((s&1)===0)return an(r,Ge()),null;var l=lc(r,s);if(r.tag!==0&&l===2){var d=gn(r);d!==0&&(s=d,l=ef(r,d))}if(l===1)throw l=al,As(r,0),Ii(r,s),an(r,Ge()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Cs(r,on,qr),an(r,Ge()),null}function nf(r,s){var l=Be;Be|=1;try{return r(s)}finally{Be=l,Be===0&&(Fo=Ge()+500,Lu&&gi())}}function Ss(r){Ei!==null&&Ei.tag===0&&(Be&6)===0&&Bo();var s=Be;Be|=1;var l=On.transition,d=Ve;try{if(On.transition=null,Ve=1,r)return r()}finally{Ve=d,On.transition=l,Be=s,(Be&6)===0&&gi()}}function rf(){En=Uo.current,Xe(Uo)}function As(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,xI(l)),gt!==null)for(l=gt.return;l!==null;){var d=l;switch(dd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Ou();break;case 3:Mo(),Xe(nn),Xe(Ft),Ad();break;case 5:Id(d);break;case 4:Mo();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:vd(d.type._context);break;case 22:case 23:rf()}l=l.return}if(kt=r,gt=r=Si(r.current,null),Mt=En=s,It=0,al=null,Yd=nc=Is=0,on=ll=null,ws!==null){for(s=0;s<ws.length;s++)if(l=ws[s],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,d.next=T}l.pending=d}ws=null}return r}function Dy(r,s){do{var l=gt;try{if(yd(),Hu.current=Qu,Wu){for(var d=it.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Wu=!1}if(Ts=0,Pt=Tt=it=null,tl=!1,nl=0,Qd.current=null,l===null||l.return===null){It=1,al=s,gt=null;break}e:{var y=r,T=l.return,P=l,N=s;if(s=Mt,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,ne=P,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ce=sy(T);if(ce!==null){ce.flags&=-257,oy(ce,T,P,y,s),ce.mode&1&&iy(y,$,s),s=ce,N=$;var ge=s.updateQueue;if(ge===null){var ye=new Set;ye.add(N),s.updateQueue=ye}else ge.add(N);break e}else{if((s&1)===0){iy(y,$,s),sf();break e}N=Error(t(426))}}else if(et&&P.mode&1){var ht=sy(T);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),oy(ht,T,P,y,s),md(Vo(N,P));break e}}y=N=Vo(N,P),It!==4&&(It=2),ll===null?ll=[y]:ll.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var B=ny(y,N,s);kg(y,B);break e;case 1:P=N;var j=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(wi===null||!wi.has(z)))){y.flags|=65536,s&=-s,y.lanes|=s;var oe=ry(y,P,s);kg(y,oe);break e}}y=y.return}while(y!==null)}Vy(l)}catch(ve){s=ve,gt===l&&l!==null&&(gt=l=l.return);continue}break}while(!0)}function Ly(){var r=tc.current;return tc.current=Qu,r===null?Qu:r}function sf(){(It===0||It===3||It===2)&&(It=4),kt===null||(Is&268435455)===0&&(nc&268435455)===0||Ii(kt,Mt)}function lc(r,s){var l=Be;Be|=2;var d=Ly();(kt!==r||Mt!==s)&&(qr=null,As(r,s));do try{tS();break}catch(p){Dy(r,p)}while(!0);if(yd(),Be=l,tc.current=d,gt!==null)throw Error(t(261));return kt=null,Mt=0,It}function tS(){for(;gt!==null;)My(gt)}function nS(){for(;gt!==null&&!su();)My(gt)}function My(r){var s=Fy(r.alternate,r,En);r.memoizedProps=r.pendingProps,s===null?Vy(r):gt=s,Qd.current=null}function Vy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=GI(l,s,En),l!==null){gt=l;return}}else{if(l=QI(l,s),l!==null){l.flags&=32767,gt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{It=6,gt=null;return}}if(s=s.sibling,s!==null){gt=s;return}gt=s=r}while(s!==null);It===0&&(It=5)}function Cs(r,s,l){var d=Ve,p=On.transition;try{On.transition=null,Ve=1,rS(r,s,l,d)}finally{On.transition=p,Ve=d}return null}function rS(r,s,l,d){do Bo();while(Ei!==null);if((Be&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(We(r,y),r===kt&&(gt=kt=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ic||(ic=!0,By(Cn,function(){return Bo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var T=Ve;Ve=1;var P=Be;Be|=4,Qd.current=null,XI(r,l),Ry(l,r),II(id),ci=!!rd,id=rd=null,r.current=l,JI(l),Bh(),Be=P,Ve=T,On.transition=y}else r.current=l;if(ic&&(ic=!1,Ei=r,sc=p),y=r.pendingLanes,y===0&&(wi=null),lu(l.stateNode),an(r,Ge()),s!==null)for(d=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(rc)throw rc=!1,r=Jd,Jd=null,r;return(sc&1)!==0&&r.tag!==0&&Bo(),y=r.pendingLanes,(y&1)!==0?r===Zd?ul++:(ul=0,Zd=r):ul=0,gi(),null}function Bo(){if(Ei!==null){var r=li(sc),s=On.transition,l=Ve;try{if(On.transition=null,Ve=16>r?16:r,Ei===null)var d=!1;else{if(r=Ei,Ei=null,sc=0,(Be&6)!==0)throw Error(t(331));var p=Be;for(Be|=4,de=r.current;de!==null;){var y=de,T=y.child;if((de.flags&16)!==0){var P=y.deletions;if(P!==null){for(var N=0;N<P.length;N++){var $=P[N];for(de=$;de!==null;){var ne=de;switch(ne.tag){case 0:case 11:case 15:ol(8,ne,y)}var re=ne.child;if(re!==null)re.return=ne,de=re;else for(;de!==null;){ne=de;var ee=ne.sibling,ce=ne.return;if(Ty(ne),ne===$){de=null;break}if(ee!==null){ee.return=ce,de=ee;break}de=ce}}}var ge=y.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var ht=ye.sibling;ye.sibling=null,ye=ht}while(ye!==null)}}de=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,de=T;else e:for(;de!==null;){if(y=de,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ol(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,de=B;break e}de=y.return}}var j=r.current;for(de=j;de!==null;){T=de;var z=T.child;if((T.subtreeFlags&2064)!==0&&z!==null)z.return=T,de=z;else e:for(T=j;de!==null;){if(P=de,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:ec(9,P)}}catch(ve){at(P,P.return,ve)}if(P===T){de=null;break e}var oe=P.sibling;if(oe!==null){oe.return=P.return,de=oe;break e}de=P.return}}if(Be=p,gi(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(us,r)}catch{}d=!0}return d}finally{Ve=l,On.transition=s}}return!1}function jy(r,s,l){s=Vo(l,s),s=ny(r,s,1),r=vi(r,s,1),s=Xt(),r!==null&&(oi(r,1,s),an(r,s))}function at(r,s,l){if(r.tag===3)jy(r,r,l);else for(;s!==null;){if(s.tag===3){jy(s,r,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(wi===null||!wi.has(d))){r=Vo(l,r),r=ry(s,r,1),s=vi(s,r,1),r=Xt(),s!==null&&(oi(s,1,r),an(s,r));break}}s=s.return}}function iS(r,s,l){var d=r.pingCache;d!==null&&d.delete(s),s=Xt(),r.pingedLanes|=r.suspendedLanes&l,kt===r&&(Mt&l)===l&&(It===4||It===3&&(Mt&130023424)===Mt&&500>Ge()-Xd?As(r,0):Yd|=l),an(r,s)}function Uy(r,s){s===0&&((r.mode&1)===0?s=1:(s=uo,uo<<=1,(uo&130023424)===0&&(uo=4194304)));var l=Xt();r=Fr(r,s),r!==null&&(oi(r,s,l),an(r,l))}function sS(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Uy(r,l)}function oS(r,s){var l=0;switch(r.tag){case 13:var d=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Uy(r,l)}var Fy;Fy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||nn.current)sn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return sn=!1,KI(r,s,l);sn=(r.flags&131072)!==0}else sn=!1,et&&(s.flags&1048576)!==0&&_g(s,Vu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Ju(r,s),r=s.pendingProps;var p=ko(s,Ft.current);Lo(s,l),p=Pd(null,s,d,r,p,l);var y=kd();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rn(d)?(y=!0,Du(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ed(s),p.updater=Yu,s.stateNode=p,p._reactInternals=s,Ld(s,d,r,l),s=Ud(null,s,d,!0,y,l)):(s.tag=0,et&&y&&hd(s),Yt(null,s,p,l),s=s.child),s;case 16:d=s.elementType;e:{switch(Ju(r,s),r=s.pendingProps,p=d._init,d=p(d._payload),s.type=d,p=s.tag=lS(d),r=Xn(d,r),p){case 0:s=jd(null,s,d,r,l);break e;case 1:s=dy(null,s,d,r,l);break e;case 11:s=ay(null,s,d,r,l);break e;case 14:s=ly(null,s,d,Xn(d.type,r),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Xn(d,p),jd(r,s,d,p,l);case 1:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Xn(d,p),dy(r,s,d,p,l);case 3:e:{if(fy(s),r===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,p=y.element,Pg(r,s),qu(s,d,null,l);var T=s.memoizedState;if(d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Vo(Error(t(423)),s),s=py(r,s,d,l,p);break e}else if(d!==p){p=Vo(Error(t(424)),s),s=py(r,s,d,l,p);break e}else for(wn=fi(s.stateNode.containerInfo.firstChild),_n=s,et=!0,Yn=null,l=Cg(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(No(),d===p){s=zr(r,s,l);break e}Yt(r,s,d,l)}s=s.child}return s;case 5:return bg(s),r===null&&pd(s),d=s.type,p=s.pendingProps,y=r!==null?r.memoizedProps:null,T=p.children,sd(d,p)?T=null:y!==null&&sd(d,y)&&(s.flags|=32),hy(r,s),Yt(r,s,T,l),s.child;case 6:return r===null&&pd(s),null;case 13:return my(r,s,l);case 4:return Td(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Oo(s,null,d,l):Yt(r,s,d,l),s.child;case 11:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Xn(d,p),ay(r,s,d,p,l);case 7:return Yt(r,s,s.pendingProps,l),s.child;case 8:return Yt(r,s,s.pendingProps.children,l),s.child;case 12:return Yt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,p=s.pendingProps,y=s.memoizedProps,T=p.value,Qe(Fu,d._currentValue),d._currentValue=T,y!==null)if(Qn(y.value,T)){if(y.children===p.children&&!nn.current){s=zr(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){T=y.child;for(var N=P.firstContext;N!==null;){if(N.context===d){if(y.tag===1){N=Br(-1,l&-l),N.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var ne=$.pending;ne===null?N.next=N:(N.next=ne.next,ne.next=N),$.pending=N}}y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),_d(y.return,l,s),P.lanes|=l;break}N=N.next}}else if(y.tag===10)T=y.type===s.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,P=T.alternate,P!==null&&(P.lanes|=l),_d(T,l,s),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Yt(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,d=s.pendingProps.children,Lo(s,l),p=bn(p),d=d(p),s.flags|=1,Yt(r,s,d,l),s.child;case 14:return d=s.type,p=Xn(d,s.pendingProps),p=Xn(d.type,p),ly(r,s,d,p,l);case 15:return uy(r,s,s.type,s.pendingProps,l);case 17:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Xn(d,p),Ju(r,s),s.tag=1,rn(d)?(r=!0,Du(s)):r=!1,Lo(s,l),ey(s,d,p),Ld(s,d,p,l),Ud(null,s,d,!0,r,l);case 19:return yy(r,s,l);case 22:return cy(r,s,l)}throw Error(t(156,s.tag))};function By(r,s){return ao(r,s)}function aS(r,s,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(r,s,l,d){return new aS(r,s,l,d)}function of(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lS(r){if(typeof r=="function")return of(r)?1:0;if(r!=null){if(r=r.$$typeof,r===b)return 11;if(r===ae)return 14}return 2}function Si(r,s){var l=r.alternate;return l===null?(l=Dn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function uc(r,s,l,d,p,y){var T=2;if(d=r,typeof r=="function")of(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case M:return Rs(l.children,p,y,s);case R:T=8,p|=8;break;case k:return r=Dn(12,l,s,p|2),r.elementType=k,r.lanes=y,r;case C:return r=Dn(13,l,s,p),r.elementType=C,r.lanes=y,r;case se:return r=Dn(19,l,s,p),r.elementType=se,r.lanes=y,r;case q:return cc(l,p,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:T=10;break e;case x:T=9;break e;case b:T=11;break e;case ae:T=14;break e;case Se:T=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Dn(T,l,s,p),s.elementType=r,s.type=d,s.lanes=y,s}function Rs(r,s,l,d){return r=Dn(7,r,d,s),r.lanes=l,r}function cc(r,s,l,d){return r=Dn(22,r,d,s),r.elementType=q,r.lanes=l,r.stateNode={isHidden:!1},r}function af(r,s,l){return r=Dn(6,r,null,s),r.lanes=l,r}function lf(r,s,l){return s=Dn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function uS(r,s,l,d,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function uf(r,s,l,d,p,y,T,P,N){return r=new uS(r,s,l,P,N),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Dn(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(y),r}function cS(r,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:d==null?null:""+d,children:r,containerInfo:s,implementation:l}}function zy(r){if(!r)return mi;r=r._reactInternals;e:{if(zn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(rn(l))return gg(r,l,s)}return s}function qy(r,s,l,d,p,y,T,P,N){return r=uf(l,d,!0,r,p,y,T,P,N),r.context=zy(null),l=r.current,d=Xt(),p=Ti(l),y=Br(d,p),y.callback=s??null,vi(l,y,p),r.current.lanes=p,oi(r,p,d),an(r,d),r}function hc(r,s,l,d){var p=s.current,y=Xt(),T=Ti(p);return l=zy(l),s.context===null?s.context=l:s.pendingContext=l,s=Br(y,T),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=vi(p,s,T),r!==null&&(er(r,p,T,y),zu(r,p,T)),T}function dc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function $y(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function cf(r,s){$y(r,s),(r=r.alternate)&&$y(r,s)}function hS(){return null}var Hy=typeof reportError=="function"?reportError:function(r){console.error(r)};function hf(r){this._internalRoot=r}fc.prototype.render=hf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));hc(r,s,null,null)},fc.prototype.unmount=hf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ss(function(){hc(null,r,null,null)}),s[Mr]=null}};function fc(r){this._internalRoot=r}fc.prototype.unstable_scheduleHydration=function(r){if(r){var s=fu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<hr.length&&s!==0&&s<hr[l].priority;l++);hr.splice(l,0,r),l===0&&gu(r)}};function df(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function pc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function dS(r,s,l,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var $=dc(T);y.call($)}}var T=qy(s,d,r,0,null,!1,!1,"",Wy);return r._reactRootContainer=T,r[Mr]=T.current,Ka(r.nodeType===8?r.parentNode:r),Ss(),T}for(;p=r.lastChild;)r.removeChild(p);if(typeof d=="function"){var P=d;d=function(){var $=dc(N);P.call($)}}var N=uf(r,0,!1,null,null,!1,!1,"",Wy);return r._reactRootContainer=N,r[Mr]=N.current,Ka(r.nodeType===8?r.parentNode:r),Ss(function(){hc(s,N,l,d)}),N}function mc(r,s,l,d,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var P=p;p=function(){var N=dc(T);P.call(N)}}hc(s,T,r,p)}else T=dS(l,s,r,p,d);return dc(T)}hu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=ii(s.pendingLanes);l!==0&&(ai(s,l|1),an(s,Ge()),(Be&6)===0&&(Fo=Ge()+500,gi()))}break;case 13:Ss(function(){var d=Fr(r,1);if(d!==null){var p=Xt();er(d,r,1,p)}}),cf(r,1)}},co=function(r){if(r.tag===13){var s=Fr(r,134217728);if(s!==null){var l=Xt();er(s,r,134217728,l)}cf(r,134217728)}},du=function(r){if(r.tag===13){var s=Ti(r),l=Fr(r,s);if(l!==null){var d=Xt();er(l,r,s,d)}cf(r,s)}},fu=function(){return Ve},pu=function(r,s){var l=Ve;try{return Ve=r,s()}finally{Ve=l}},to=function(r,s,l){switch(s){case"input":if(va(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==r&&d.form===r.form){var p=Nu(d);if(!p)throw Error(t(90));Qs(d),va(d,p)}}}break;case"textarea":Zs(r,l);break;case"select":s=l.value,s!=null&&Pr(r,!!l.multiple,s,!1)}},is=nf,Pa=Ss;var fS={usingClientEntryPoint:!1,Events:[Ya,Ro,Nu,ur,Ra,nf]},cl={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pS={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ba(r),r===null?null:r.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||hS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{us=gc.inject(pS),mn=gc}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fS,ln.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(s))throw Error(t(200));return cS(r,s,null,l)},ln.createRoot=function(r,s){if(!df(r))throw Error(t(299));var l=!1,d="",p=Hy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=uf(r,1,!1,null,null,l,!1,d,p),r[Mr]=s.current,Ka(r.nodeType===8?r.parentNode:r),new hf(s)},ln.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ba(s),r=r===null?null:r.stateNode,r},ln.flushSync=function(r){return Ss(r)},ln.hydrate=function(r,s,l){if(!pc(s))throw Error(t(200));return mc(null,r,s,!0,l)},ln.hydrateRoot=function(r,s,l){if(!df(r))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,y="",T=Hy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=qy(s,null,r,1,l??null,p,!1,y,T),r[Mr]=s.current,Ka(r),d)for(r=0;r<d.length;r++)l=d[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new fc(s)},ln.render=function(r,s,l){if(!pc(s))throw Error(t(200));return mc(null,r,s,!1,l)},ln.unmountComponentAtNode=function(r){if(!pc(r))throw Error(t(40));return r._reactRootContainer?(Ss(function(){mc(null,null,r,!1,function(){r._reactRootContainer=null,r[Mr]=null})}),!0):!1},ln.unstable_batchedUpdates=nf,ln.unstable_renderSubtreeIntoContainer=function(r,s,l,d){if(!pc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return mc(r,s,l,!1,d)},ln.version="18.3.1-next-f1338f8080-20240426",ln}var ev;function xp(){if(ev)return mf.exports;ev=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mf.exports=SS(),mf.exports}var tv;function AS(){if(tv)return yc;tv=1;var n=xp();return yc.createRoot=n.createRoot,yc.hydrateRoot=n.hydrateRoot,yc}var CS=AS();const RS=zs(CS);xp();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},kl.apply(this,arguments)}var Ni;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ni||(Ni={}));const nv="popstate";function PS(n){n===void 0&&(n={});function e(i,o){let{pathname:a,search:u,hash:h}=i.location;return Qf("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Bc(o)}return xS(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Aw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kS(){return Math.random().toString(36).substr(2,8)}function rv(n,e){return{usr:n.state,key:n.key,idx:e}}function Qf(n,e,t,i){return t===void 0&&(t=null),kl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ua(e):e,{state:t,key:e&&e.key||i||kS()})}function Bc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ua(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function xS(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,h=Ni.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(kl({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function E(){h=Ni.Pop;let D=_(),Q=D==null?null:D-m;m=D,f&&f({action:h,location:U.location,delta:Q})}function I(D,Q){h=Ni.Push;let te=Qf(U.location,D,Q);m=_()+1;let W=rv(te,m),H=U.createHref(te);try{u.pushState(W,"",H)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(H)}a&&f&&f({action:h,location:U.location,delta:1})}function A(D,Q){h=Ni.Replace;let te=Qf(U.location,D,Q);m=_();let W=rv(te,m),H=U.createHref(te);u.replaceState(W,"",H),a&&f&&f({action:h,location:U.location,delta:0})}function O(D){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,te=typeof D=="string"?D:Bc(D);return te=te.replace(/ $/,"%20"),pt(Q,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,Q)}let U={get action(){return h},get location(){return n(o,u)},listen(D){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(nv,E),f=D,()=>{o.removeEventListener(nv,E),f=null}},createHref(D){return e(o,D)},createURL:O,encodeLocation(D){let Q=O(D);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:I,replace:A,go(D){return u.go(D)}};return U}var iv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iv||(iv={}));function bS(n,e,t){return t===void 0&&(t="/"),NS(n,e,t)}function NS(n,e,t,i){let o=typeof e=="string"?ua(e):e,a=bp(o.pathname||"/",t);if(a==null)return null;let u=Cw(n);OS(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=HS(a);h=zS(u[f],m)}return h}function Cw(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(pt(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let m=Di([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(pt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Cw(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:FS(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let f of Rw(a.path))o(a,u,f)}),e}function Rw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=Rw(i.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function OS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const DS=/^:[\w-]+$/,LS=3,MS=2,VS=1,jS=10,US=-2,sv=n=>n==="*";function FS(n,e){let t=n.split("/"),i=t.length;return t.some(sv)&&(i+=US),e&&(i+=MS),t.filter(o=>!sv(o)).reduce((o,a)=>o+(DS.test(a)?LS:a===""?VS:jS),i)}function BS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function zS(n,e,t){let{routesMeta:i}=n,o={},a="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],m=h===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=qS({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),I=f.route;if(!E)return null;Object.assign(o,E.params),u.push({params:o,pathname:Di([a,E.pathname]),pathnameBase:QS(Di([a,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(a=Di([a,E.pathnameBase]))}return u}function qS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=$S(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((m,_,E)=>{let{paramName:I,isOptional:A}=_;if(I==="*"){let U=h[E]||"";u=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const O=h[E];return A&&!O?m[I]=void 0:m[I]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function $S(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Aw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function HS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function WS(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?ua(n):n;return{pathname:t?t.startsWith("/")?t:KS(t,e):e,search:YS(i),hash:XS(o)}}function KS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function vf(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Np(n,e){let t=GS(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Op(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=ua(n):(o=kl({},n),pt(!o.pathname||!o.pathname.includes("?"),vf("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),vf("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),vf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let I=u.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}h=E>=0?e[E]:"/"}let f=WS(o,h),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Di=n=>n.join("/").replace(/\/\/+/g,"/"),QS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,XS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Pw=["post","put","patch","delete"];new Set(Pw);const ZS=["get",...Pw];new Set(ZS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xl.apply(this,arguments)}const Dp=X.createContext(null),eA=X.createContext(null),Ki=X.createContext(null),ch=X.createContext(null),ei=X.createContext({outlet:null,matches:[],isDataRoute:!1}),kw=X.createContext(null);function tA(n,e){let{relative:t}=e===void 0?{}:e;ca()||pt(!1);let{basename:i,navigator:o}=X.useContext(Ki),{hash:a,pathname:u,search:h}=Nw(n,{relative:t}),f=u;return i!=="/"&&(f=u==="/"?i:Di([i,u])),o.createHref({pathname:f,search:h,hash:a})}function ca(){return X.useContext(ch)!=null}function $l(){return ca()||pt(!1),X.useContext(ch).location}function xw(n){X.useContext(Ki).static||X.useLayoutEffect(n)}function qs(){let{isDataRoute:n}=X.useContext(ei);return n?pA():nA()}function nA(){ca()||pt(!1);let n=X.useContext(Dp),{basename:e,future:t,navigator:i}=X.useContext(Ki),{matches:o}=X.useContext(ei),{pathname:a}=$l(),u=JSON.stringify(Np(o,t.v7_relativeSplatPath)),h=X.useRef(!1);return xw(()=>{h.current=!0}),X.useCallback(function(m,_){if(_===void 0&&(_={}),!h.current)return;if(typeof m=="number"){i.go(m);return}let E=Op(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Di([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,u,a,n])}function bw(){let{matches:n}=X.useContext(ei),e=n[n.length-1];return e?e.params:{}}function Nw(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=X.useContext(Ki),{matches:o}=X.useContext(ei),{pathname:a}=$l(),u=JSON.stringify(Np(o,i.v7_relativeSplatPath));return X.useMemo(()=>Op(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function rA(n,e){return iA(n,e)}function iA(n,e,t,i){ca()||pt(!1);let{navigator:o,static:a}=X.useContext(Ki),{matches:u}=X.useContext(ei),h=u[u.length-1],f=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let _=$l(),E;if(e){var I;let Q=typeof e=="string"?ua(e):e;m==="/"||(I=Q.pathname)!=null&&I.startsWith(m)||pt(!1),E=Q}else E=_;let A=E.pathname||"/",O=A;if(m!=="/"){let Q=m.replace(/^\//,"").split("/");O="/"+A.replace(/^\//,"").split("/").slice(Q.length).join("/")}let U=bS(n,{pathname:O}),D=uA(U&&U.map(Q=>Object.assign({},Q,{params:Object.assign({},f,Q.params),pathname:Di([m,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?m:Di([m,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),u,t,i);return e&&D?X.createElement(ch.Provider,{value:{location:xl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Ni.Pop}},D):D}function sA(){let n=fA(),e=JS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:o},t):null,null)}const oA=X.createElement(sA,null);class aA extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(ei.Provider,{value:this.props.routeContext},X.createElement(kw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lA(n){let{routeContext:e,match:t,children:i}=n,o=X.useContext(Dp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(ei.Provider,{value:e},i)}function uA(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=u.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);_>=0||pt(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=_),E.route.id){let{loaderData:I,errors:A}=t,O=E.route.loader&&I[E.route.id]===void 0&&(!A||A[E.route.id]===void 0);if(E.route.lazy||O){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,E,I)=>{let A,O=!1,U=null,D=null;t&&(A=h&&E.route.id?h[E.route.id]:void 0,U=E.route.errorElement||oA,f&&(m<0&&I===0?(mA("route-fallback"),O=!0,D=null):m===I&&(O=!0,D=E.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,I+1)),te=()=>{let W;return A?W=U:O?W=D:E.route.Component?W=X.createElement(E.route.Component,null):E.route.element?W=E.route.element:W=_,X.createElement(lA,{match:E,routeContext:{outlet:_,matches:Q,isDataRoute:t!=null},children:W})};return t&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?X.createElement(aA,{location:t.location,revalidation:t.revalidation,component:U,error:A,children:te(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):te()},null)}var Ow=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Ow||{}),Dw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Dw||{});function cA(n){let e=X.useContext(Dp);return e||pt(!1),e}function hA(n){let e=X.useContext(eA);return e||pt(!1),e}function dA(n){let e=X.useContext(ei);return e||pt(!1),e}function Lw(n){let e=dA(),t=e.matches[e.matches.length-1];return t.route.id||pt(!1),t.route.id}function fA(){var n;let e=X.useContext(kw),t=hA(),i=Lw();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function pA(){let{router:n}=cA(Ow.UseNavigateStable),e=Lw(Dw.UseNavigateStable),t=X.useRef(!1);return xw(()=>{t.current=!0}),X.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,xl({fromRouteId:e},a)))},[n,e])}const ov={};function mA(n,e,t){ov[n]||(ov[n]=!0)}function gA(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function yA(n){let{to:e,replace:t,state:i,relative:o}=n;ca()||pt(!1);let{future:a,static:u}=X.useContext(Ki),{matches:h}=X.useContext(ei),{pathname:f}=$l(),m=qs(),_=Op(e,Np(h,a.v7_relativeSplatPath),f,o==="path"),E=JSON.stringify(_);return X.useEffect(()=>m(JSON.parse(E),{replace:t,state:i,relative:o}),[m,E,o,t,i]),null}function dt(n){pt(!1)}function vA(n){let{basename:e="/",children:t=null,location:i,navigationType:o=Ni.Pop,navigator:a,static:u=!1,future:h}=n;ca()&&pt(!1);let f=e.replace(/^\/*/,"/"),m=X.useMemo(()=>({basename:f,navigator:a,static:u,future:xl({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof i=="string"&&(i=ua(i));let{pathname:_="/",search:E="",hash:I="",state:A=null,key:O="default"}=i,U=X.useMemo(()=>{let D=bp(_,f);return D==null?null:{location:{pathname:D,search:E,hash:I,state:A,key:O},navigationType:o}},[f,_,E,I,A,O,o]);return U==null?null:X.createElement(Ki.Provider,{value:m},X.createElement(ch.Provider,{children:t,value:U}))}function _A(n){let{children:e,location:t}=n;return rA(Yf(e),t)}new Promise(()=>{});function Yf(n,e){e===void 0&&(e=[]);let t=[];return X.Children.forEach(n,(i,o)=>{if(!X.isValidElement(i))return;let a=[...e,o];if(i.type===X.Fragment){t.push.apply(t,Yf(i.props.children,a));return}i.type!==dt&&pt(!1),!i.props.index||!i.props.children||pt(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Yf(i.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xf.apply(this,arguments)}function wA(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function EA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function TA(n,e){return n.button===0&&(!e||e==="_self")&&!EA(n)}const IA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SA="6";try{window.__reactRouterVersion=SA}catch{}const AA="startTransition",av=ES[AA];function CA(n){let{basename:e,children:t,future:i,window:o}=n,a=X.useRef();a.current==null&&(a.current=PS({window:o,v5Compat:!0}));let u=a.current,[h,f]=X.useState({action:u.action,location:u.location}),{v7_startTransition:m}=i||{},_=X.useCallback(E=>{m&&av?av(()=>f(E)):f(E)},[f,m]);return X.useLayoutEffect(()=>u.listen(_),[u,_]),X.useEffect(()=>gA(i),[i]),X.createElement(vA,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:i})}const RA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=X.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:u,state:h,target:f,to:m,preventScrollReset:_,viewTransition:E}=e,I=wA(e,IA),{basename:A}=X.useContext(Ki),O,U=!1;if(typeof m=="string"&&PA.test(m)&&(O=m,RA))try{let W=new URL(window.location.href),H=m.startsWith("//")?new URL(W.protocol+m):new URL(m),pe=bp(H.pathname,A);H.origin===W.origin&&pe!=null?m=pe+H.search+H.hash:U=!0}catch{}let D=tA(m,{relative:o}),Q=kA(m,{replace:u,state:h,target:f,preventScrollReset:_,relative:o,viewTransition:E});function te(W){i&&i(W),W.defaultPrevented||Q(W)}return X.createElement("a",Xf({},I,{href:O||D,onClick:U||a?i:te,ref:t,target:f}))});var lv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var uv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));function kA(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,f=qs(),m=$l(),_=Nw(n,{relative:u});return X.useCallback(E=>{if(TA(E,t)){E.preventDefault();let I=i!==void 0?i:Bc(m)===Bc(_);f(n,{replace:I,state:o,preventScrollReset:a,relative:u,viewTransition:h})}},[m,f,_,i,o,t,n,a,u,h])}var _f={exports:{}},wf,cv;function xA(){if(cv)return wf;cv=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wf=n,wf}var Ef,hv;function bA(){if(hv)return Ef;hv=1;var n=xA();function e(){}function t(){}return t.resetWarningCache=e,Ef=function(){function i(u,h,f,m,_,E){if(E!==n){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}i.isRequired=i;function o(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Ef}var dv;function Lp(){return dv||(dv=1,_f.exports=bA()()),_f.exports}var NA=Lp();const tt=zs(NA);var Tf,fv;function OA(){if(fv)return Tf;fv=1;function n(h){return h&&typeof h=="object"&&"default"in h?h.default:h}var e=la(),t=n(e);function i(h,f,m){return f in h?Object.defineProperty(h,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[f]=m,h}function o(h,f){h.prototype=Object.create(f.prototype),h.prototype.constructor=h,h.__proto__=f}var a=!!(typeof window<"u"&&window.document&&window.document.createElement);function u(h,f,m){if(typeof h!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof f!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof m<"u"&&typeof m!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function _(E){return E.displayName||E.name||"Component"}return function(I){if(typeof I!="function")throw new Error("Expected WrappedComponent to be a React component.");var A=[],O;function U(){O=h(A.map(function(Q){return Q.props})),D.canUseDOM?f(O):m&&(O=m(O))}var D=function(Q){o(te,Q);function te(){return Q.apply(this,arguments)||this}te.peek=function(){return O},te.rewind=function(){if(te.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var pe=O;return O=void 0,A=[],pe};var W=te.prototype;return W.UNSAFE_componentWillMount=function(){A.push(this),U()},W.componentDidUpdate=function(){U()},W.componentWillUnmount=function(){var pe=A.indexOf(this);A.splice(pe,1),U()},W.render=function(){return t.createElement(I,this.props)},te}(e.PureComponent);return i(D,"displayName","SideEffect("+_(I)+")"),i(D,"canUseDOM",a),D}}return Tf=u,Tf}var DA=OA();const LA=zs(DA);var If,pv;function MA(){if(pv)return If;pv=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(a,u){if(a===u)return!0;if(a&&u&&typeof a=="object"&&typeof u=="object"){if(a.constructor!==u.constructor)return!1;var h,f,m;if(Array.isArray(a)){if(h=a.length,h!=u.length)return!1;for(f=h;f--!==0;)if(!o(a[f],u[f]))return!1;return!0}var _;if(e&&a instanceof Map&&u instanceof Map){if(a.size!==u.size)return!1;for(_=a.entries();!(f=_.next()).done;)if(!u.has(f.value[0]))return!1;for(_=a.entries();!(f=_.next()).done;)if(!o(f.value[1],u.get(f.value[0])))return!1;return!0}if(t&&a instanceof Set&&u instanceof Set){if(a.size!==u.size)return!1;for(_=a.entries();!(f=_.next()).done;)if(!u.has(f.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(u)){if(h=a.length,h!=u.length)return!1;for(f=h;f--!==0;)if(a[f]!==u[f])return!1;return!0}if(a.constructor===RegExp)return a.source===u.source&&a.flags===u.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof u.valueOf=="function")return a.valueOf()===u.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof u.toString=="function")return a.toString()===u.toString();if(m=Object.keys(a),h=m.length,h!==Object.keys(u).length)return!1;for(f=h;f--!==0;)if(!Object.prototype.hasOwnProperty.call(u,m[f]))return!1;if(n&&a instanceof Element)return!1;for(f=h;f--!==0;)if(!((m[f]==="_owner"||m[f]==="__v"||m[f]==="__o")&&a.$$typeof)&&!o(a[m[f]],u[m[f]]))return!1;return!0}return a!==a&&u!==u}return If=function(u,h){try{return o(u,h)}catch(f){if((f.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw f}},If}var VA=MA();const jA=zs(VA);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Sf,mv;function UA(){if(mv)return Sf;mv=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function o(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var u={},h=0;h<10;h++)u["_"+String.fromCharCode(h)]=h;var f=Object.getOwnPropertyNames(u).map(function(_){return u[_]});if(f.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(_){m[_]=_}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Sf=o()?Object.assign:function(a,u){for(var h,f=i(a),m,_=1;_<arguments.length;_++){h=Object(arguments[_]);for(var E in h)e.call(h,E)&&(f[E]=h[E]);if(n){m=n(h);for(var I=0;I<m.length;I++)t.call(h,m[I])&&(f[m[I]]=h[m[I]])}}return f},Sf}var FA=UA();const BA=zs(FA);var Os={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},xe={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(xe).map(function(n){return xe[n]});var nt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},zc={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},bl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},zA=Object.keys(zc).reduce(function(n,e){return n[zc[e]]=e,n},{}),qA=[xe.NOSCRIPT,xe.SCRIPT,xe.STYLE],nr="data-react-helmet",$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},HA=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},WA=function(){function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),un=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},KA=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},gv=function(n,e){var t={};for(var i in n)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},GA=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},Jf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},QA=function(e){var t=Qo(e,xe.TITLE),i=Qo(e,bl.TITLE_TEMPLATE);if(i&&t)return i.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var o=Qo(e,bl.DEFAULT_TITLE);return t||o||void 0},YA=function(e){return Qo(e,bl.ON_CHANGE_CLIENT_STATE)||function(){}},Af=function(e,t){return t.filter(function(i){return typeof i[e]<"u"}).map(function(i){return i[e]}).reduce(function(i,o){return un({},i,o)},{})},XA=function(e,t){return t.filter(function(i){return typeof i[xe.BASE]<"u"}).map(function(i){return i[xe.BASE]}).reverse().reduce(function(i,o){if(!i.length)for(var a=Object.keys(o),u=0;u<a.length;u++){var h=a[u],f=h.toLowerCase();if(e.indexOf(f)!==-1&&o[f])return i.concat(o)}return i},[])},dl=function(e,t,i){var o={};return i.filter(function(a){return Array.isArray(a[e])?!0:(typeof a[e]<"u"&&tC("Helmet: "+e+' should be of type "Array". Instead found type "'+$A(a[e])+'"'),!1)}).map(function(a){return a[e]}).reverse().reduce(function(a,u){var h={};u.filter(function(I){for(var A=void 0,O=Object.keys(I),U=0;U<O.length;U++){var D=O[U],Q=D.toLowerCase();t.indexOf(Q)!==-1&&!(A===nt.REL&&I[A].toLowerCase()==="canonical")&&!(Q===nt.REL&&I[Q].toLowerCase()==="stylesheet")&&(A=Q),t.indexOf(D)!==-1&&(D===nt.INNER_HTML||D===nt.CSS_TEXT||D===nt.ITEM_PROP)&&(A=D)}if(!A||!I[A])return!1;var te=I[A].toLowerCase();return o[A]||(o[A]={}),h[A]||(h[A]={}),o[A][te]?!1:(h[A][te]=!0,!0)}).reverse().forEach(function(I){return a.push(I)});for(var f=Object.keys(h),m=0;m<f.length;m++){var _=f[m],E=BA({},o[_],h[_]);o[_]=E}return a},[]).reverse()},Qo=function(e,t){for(var i=e.length-1;i>=0;i--){var o=e[i];if(o.hasOwnProperty(t))return o[t]}return null},JA=function(e){return{baseTag:XA([nt.HREF,nt.TARGET],e),bodyAttributes:Af(Os.BODY,e),defer:Qo(e,bl.DEFER),encode:Qo(e,bl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Af(Os.HTML,e),linkTags:dl(xe.LINK,[nt.REL,nt.HREF],e),metaTags:dl(xe.META,[nt.NAME,nt.CHARSET,nt.HTTPEQUIV,nt.PROPERTY,nt.ITEM_PROP],e),noscriptTags:dl(xe.NOSCRIPT,[nt.INNER_HTML],e),onChangeClientState:YA(e),scriptTags:dl(xe.SCRIPT,[nt.SRC,nt.INNER_HTML],e),styleTags:dl(xe.STYLE,[nt.CSS_TEXT],e),title:QA(e),titleAttributes:Af(Os.TITLE,e)}},Zf=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){Zf(e)},0)}}(),yv=function(e){return clearTimeout(e)},ZA=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Zf:global.requestAnimationFrame||Zf,eC=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||yv:global.cancelAnimationFrame||yv,tC=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},fl=null,nC=function(e){fl&&eC(fl),e.defer?fl=ZA(function(){vv(e,function(){fl=null})}):(vv(e),fl=null)},vv=function(e,t){var i=e.baseTag,o=e.bodyAttributes,a=e.htmlAttributes,u=e.linkTags,h=e.metaTags,f=e.noscriptTags,m=e.onChangeClientState,_=e.scriptTags,E=e.styleTags,I=e.title,A=e.titleAttributes;ep(xe.BODY,o),ep(xe.HTML,a),rC(I,A);var O={baseTag:zo(xe.BASE,i),linkTags:zo(xe.LINK,u),metaTags:zo(xe.META,h),noscriptTags:zo(xe.NOSCRIPT,f),scriptTags:zo(xe.SCRIPT,_),styleTags:zo(xe.STYLE,E)},U={},D={};Object.keys(O).forEach(function(Q){var te=O[Q],W=te.newTags,H=te.oldTags;W.length&&(U[Q]=W),H.length&&(D[Q]=O[Q].oldTags)}),t&&t(),m(e,U,D)},Mw=function(e){return Array.isArray(e)?e.join(""):e},rC=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=Mw(e)),ep(xe.TITLE,t)},ep=function(e,t){var i=document.getElementsByTagName(e)[0];if(i){for(var o=i.getAttribute(nr),a=o?o.split(","):[],u=[].concat(a),h=Object.keys(t),f=0;f<h.length;f++){var m=h[f],_=t[m]||"";i.getAttribute(m)!==_&&i.setAttribute(m,_),a.indexOf(m)===-1&&a.push(m);var E=u.indexOf(m);E!==-1&&u.splice(E,1)}for(var I=u.length-1;I>=0;I--)i.removeAttribute(u[I]);a.length===u.length?i.removeAttribute(nr):i.getAttribute(nr)!==h.join(",")&&i.setAttribute(nr,h.join(","))}},zo=function(e,t){var i=document.head||document.querySelector(xe.HEAD),o=i.querySelectorAll(e+"["+nr+"]"),a=Array.prototype.slice.call(o),u=[],h=void 0;return t&&t.length&&t.forEach(function(f){var m=document.createElement(e);for(var _ in f)if(f.hasOwnProperty(_))if(_===nt.INNER_HTML)m.innerHTML=f.innerHTML;else if(_===nt.CSS_TEXT)m.styleSheet?m.styleSheet.cssText=f.cssText:m.appendChild(document.createTextNode(f.cssText));else{var E=typeof f[_]>"u"?"":f[_];m.setAttribute(_,E)}m.setAttribute(nr,"true"),a.some(function(I,A){return h=A,m.isEqualNode(I)})?a.splice(h,1):u.push(m)}),a.forEach(function(f){return f.parentNode.removeChild(f)}),u.forEach(function(f){return i.appendChild(f)}),{oldTags:a,newTags:u}},Vw=function(e){return Object.keys(e).reduce(function(t,i){var o=typeof e[i]<"u"?i+'="'+e[i]+'"':""+i;return t?t+" "+o:o},"")},iC=function(e,t,i,o){var a=Vw(i),u=Mw(t);return a?"<"+e+" "+nr+'="true" '+a+">"+Jf(u,o)+"</"+e+">":"<"+e+" "+nr+'="true">'+Jf(u,o)+"</"+e+">"},sC=function(e,t,i){return t.reduce(function(o,a){var u=Object.keys(a).filter(function(m){return!(m===nt.INNER_HTML||m===nt.CSS_TEXT)}).reduce(function(m,_){var E=typeof a[_]>"u"?_:_+'="'+Jf(a[_],i)+'"';return m?m+" "+E:E},""),h=a.innerHTML||a.cssText||"",f=qA.indexOf(e)===-1;return o+"<"+e+" "+nr+'="true" '+u+(f?"/>":">"+h+"</"+e+">")},"")},jw=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(i,o){return i[zc[o]||o]=e[o],i},t)},oC=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(i,o){return i[zA[o]||o]=e[o],i},t)},aC=function(e,t,i){var o,a=(o={key:t},o[nr]=!0,o),u=jw(i,a);return[Go.createElement(xe.TITLE,u,t)]},lC=function(e,t){return t.map(function(i,o){var a,u=(a={key:o},a[nr]=!0,a);return Object.keys(i).forEach(function(h){var f=zc[h]||h;if(f===nt.INNER_HTML||f===nt.CSS_TEXT){var m=i.innerHTML||i.cssText;u.dangerouslySetInnerHTML={__html:m}}else u[f]=i[h]}),Go.createElement(e,u)})},$r=function(e,t,i){switch(e){case xe.TITLE:return{toComponent:function(){return aC(e,t.title,t.titleAttributes)},toString:function(){return iC(e,t.title,t.titleAttributes,i)}};case Os.BODY:case Os.HTML:return{toComponent:function(){return jw(t)},toString:function(){return Vw(t)}};default:return{toComponent:function(){return lC(e,t)},toString:function(){return sC(e,t,i)}}}},Uw=function(e){var t=e.baseTag,i=e.bodyAttributes,o=e.encode,a=e.htmlAttributes,u=e.linkTags,h=e.metaTags,f=e.noscriptTags,m=e.scriptTags,_=e.styleTags,E=e.title,I=E===void 0?"":E,A=e.titleAttributes;return{base:$r(xe.BASE,t,o),bodyAttributes:$r(Os.BODY,i,o),htmlAttributes:$r(Os.HTML,a,o),link:$r(xe.LINK,u,o),meta:$r(xe.META,h,o),noscript:$r(xe.NOSCRIPT,f,o),script:$r(xe.SCRIPT,m,o),style:$r(xe.STYLE,_,o),title:$r(xe.TITLE,{title:I,titleAttributes:A},o)}},uC=function(e){var t,i;return i=t=function(o){KA(a,o);function a(){return HA(this,a),GA(this,o.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(h){return!jA(this.props,h)},a.prototype.mapNestedChildrenToProps=function(h,f){if(!f)return null;switch(h.type){case xe.SCRIPT:case xe.NOSCRIPT:return{innerHTML:f};case xe.STYLE:return{cssText:f}}throw new Error("<"+h.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(h){var f,m=h.child,_=h.arrayTypeChildren,E=h.newChildProps,I=h.nestedChildren;return un({},_,(f={},f[m.type]=[].concat(_[m.type]||[],[un({},E,this.mapNestedChildrenToProps(m,I))]),f))},a.prototype.mapObjectTypeChildren=function(h){var f,m,_=h.child,E=h.newProps,I=h.newChildProps,A=h.nestedChildren;switch(_.type){case xe.TITLE:return un({},E,(f={},f[_.type]=A,f.titleAttributes=un({},I),f));case xe.BODY:return un({},E,{bodyAttributes:un({},I)});case xe.HTML:return un({},E,{htmlAttributes:un({},I)})}return un({},E,(m={},m[_.type]=un({},I),m))},a.prototype.mapArrayTypeChildrenToProps=function(h,f){var m=un({},f);return Object.keys(h).forEach(function(_){var E;m=un({},m,(E={},E[_]=h[_],E))}),m},a.prototype.warnOnInvalidChildren=function(h,f){return!0},a.prototype.mapChildrenToProps=function(h,f){var m=this,_={};return Go.Children.forEach(h,function(E){if(!(!E||!E.props)){var I=E.props,A=I.children,O=gv(I,["children"]),U=oC(O);switch(m.warnOnInvalidChildren(E,A),E.type){case xe.LINK:case xe.META:case xe.NOSCRIPT:case xe.SCRIPT:case xe.STYLE:_=m.flattenArrayTypeChildren({child:E,arrayTypeChildren:_,newChildProps:U,nestedChildren:A});break;default:f=m.mapObjectTypeChildren({child:E,newProps:f,newChildProps:U,nestedChildren:A});break}}}),f=this.mapArrayTypeChildrenToProps(_,f),f},a.prototype.render=function(){var h=this.props,f=h.children,m=gv(h,["children"]),_=un({},m);return f&&(_=this.mapChildrenToProps(f,_)),Go.createElement(e,_)},WA(a,null,[{key:"canUseDOM",set:function(h){e.canUseDOM=h}}]),a}(Go.Component),t.propTypes={base:tt.object,bodyAttributes:tt.object,children:tt.oneOfType([tt.arrayOf(tt.node),tt.node]),defaultTitle:tt.string,defer:tt.bool,encodeSpecialCharacters:tt.bool,htmlAttributes:tt.object,link:tt.arrayOf(tt.object),meta:tt.arrayOf(tt.object),noscript:tt.arrayOf(tt.object),onChangeClientState:tt.func,script:tt.arrayOf(tt.object),style:tt.arrayOf(tt.object),title:tt.string,titleAttributes:tt.object,titleTemplate:tt.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var o=e.rewind();return o||(o=Uw({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),o},i},cC=function(){return null},hC=LA(JA,nC,Uw)(cC),ea=uC(hC);ea.renderStatic=ea.rewind;const dC=()=>v.jsxs(v.Fragment,{children:[v.jsxs(ea,{children:[v.jsx("title",{children:"Home | Tangled Oak + Craft Collective"}),v.jsx("meta",{name:"description",content:"Discover locally made artisanal goods, unique crafts, and one-of-a-kind finds at Tangled Oak + Craft Collective in North Bay, Ontario."}),v.jsx("meta",{name:"keywords",content:"handmade crafts, local artisans, North Bay, Ontario, home decor, jewelry, pottery, woodworking, Canadian artisans"})]}),v.jsx("div",{className:"home-container",children:v.jsxs("div",{className:"main-content",children:[v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Featured Vendors"}),v.jsx("img",{src:"/views/images/feature.png",alt:"Featured Vendors in the store",className:"feature-img"}),v.jsx("br",{}),v.jsx("a",{href:"/shop",className:"button",children:"Browse All Products"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"About Us"}),v.jsxs("p",{children:["Founded with a passion for craftsmanship,",v.jsx("br",{}),"The Tangled Oak + Craft Collective brings together talented artisans from North Bay and beyond.",v.jsx("br",{}),"Every product tells a story, celebrating the artistry and dedication of makers."]}),v.jsx("a",{href:"/about",className:"button",children:"Learn More"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Discover Handmade Treasures, Crafted with Heart"}),v.jsx("img",{src:"/views/images/shopFront2.jpg",alt:"Storefront from sidewalk",className:"hero-img"}),v.jsx("div",{className:"hero-text",children:"Locally made artisanal goods, unique crafts, and one-of-a-kind finds."}),v.jsx("br",{}),v.jsx("a",{href:"https://the-tangled-oak-craft-collective.square.site",className:"button",target:"_blank",rel:"noopener noreferrer",children:"Shop Now"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Hours of Operation"}),v.jsxs("p",{className:"hours-text",children:["Monday: 11 AM - 4 PM",v.jsx("br",{}),"Tuesday: 11 AM -4 PM",v.jsx("br",{}),"Wednesday: 11 AM - 4 PM",v.jsx("br",{}),"Thursday: 11 AM - 4 PM",v.jsx("br",{}),"Friday: 11 AM - 4 PM",v.jsx("br",{}),"Saturday: 10 AM - 3 PM",v.jsx("br",{}),"Sunday: CLOSED ",v.jsx("br",{})]})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Where You Can Find Us"}),v.jsxs("p",{children:["150 Oak Street W, North Bay, ON",v.jsx("br",{}),"Email: store@tangledoak.ca",v.jsx("br",{}),"Phone: (705) 201-2300"]}),v.jsx("br",{}),v.jsxs("div",{className:"map-container",children:[v.jsx("h2",{children:"Find Us on the Map"}),v.jsx("iframe",{className:"map",width:"80%",style:{border:"2px solid #203a13"},loading:"lazy",allowFullScreen:!0,title:"Tangled Oak Location",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2755.934228632341!2d-79.46534059999999!3d46.311143699999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4d29aa9cbd52da61%3A0x5ba29b1fbf8394f9!2s150%20Oak%20St%20W%2C%20North%20Bay%2C%20ON%20P1B%202S7!5e0!3m2!1sen!2sca!4v1742343151470!5m2!1sen!2sca"})]})]})]})})]});var vc={exports:{}},Ci={},_c={exports:{}},Ln={},wc={exports:{}},_v;function Fw(){return _v||(_v=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=_;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",i="contents",o=/^(input|select|textarea|button|object|iframe)$/;function a(E,I){return I.getPropertyValue("overflow")!=="visible"||E.scrollWidth<=0&&E.scrollHeight<=0}function u(E){var I=E.offsetWidth<=0&&E.offsetHeight<=0;if(I&&!E.innerHTML)return!0;try{var A=window.getComputedStyle(E),O=A.getPropertyValue("display");return I?O!==i&&a(E,A):O===t}catch{return console.warn("Failed to inspect element style"),!1}}function h(E){for(var I=E,A=E.getRootNode&&E.getRootNode();I&&I!==document.body;){if(A&&I===A&&(I=A.host.parentNode),u(I))return!1;I=I.parentNode}return!0}function f(E,I){var A=E.nodeName.toLowerCase(),O=o.test(A)&&!E.disabled||A==="a"&&E.href||I;return O&&h(E)}function m(E){var I=E.getAttribute("tabindex");I===null&&(I=void 0);var A=isNaN(I);return(A||I>=0)&&f(E,!A)}function _(E){var I=[].slice.call(E.querySelectorAll("*"),0).reduce(function(A,O){return A.concat(O.shadowRoot?_(O.shadowRoot):[O])},[]);return I.filter(m)}n.exports=e.default}(wc,wc.exports)),wc.exports}var wv;function fC(){if(wv)return Ln;wv=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.resetState=u,Ln.log=h,Ln.handleBlur=f,Ln.handleFocus=m,Ln.markForFocusLater=_,Ln.returnFocus=E,Ln.popWithoutFocus=I,Ln.setupScopedFocus=A,Ln.teardownScopedFocus=O;var n=Fw(),e=t(n);function t(U){return U&&U.__esModule?U:{default:U}}var i=[],o=null,a=!1;function u(){i=[]}function h(){}function f(){a=!0}function m(){if(a){if(a=!1,!o)return;setTimeout(function(){if(!o.contains(document.activeElement)){var U=(0,e.default)(o)[0]||o;U.focus()}},0)}}function _(){i.push(document.activeElement)}function E(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,D=null;try{i.length!==0&&(D=i.pop(),D.focus({preventScroll:U}));return}catch{console.warn(["You tried to return focus to",D,"but it is not in the DOM anymore"].join(" "))}}function I(){i.length>0&&i.pop()}function A(U){o=U,window.addEventListener?(window.addEventListener("blur",f,!1),document.addEventListener("focus",m,!0)):(window.attachEvent("onBlur",f),document.attachEvent("onFocus",m))}function O(){o=null,window.addEventListener?(window.removeEventListener("blur",f),document.removeEventListener("focus",m)):(window.detachEvent("onBlur",f),document.detachEvent("onFocus",m))}return Ln}var Ec={exports:{}},Ev;function pC(){return Ev||(Ev=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=Fw(),i=o(t);function o(h){return h&&h.__esModule?h:{default:h}}function a(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return h.activeElement.shadowRoot?a(h.activeElement.shadowRoot):h.activeElement}function u(h,f){var m=(0,i.default)(h);if(!m.length){f.preventDefault();return}var _=void 0,E=f.shiftKey,I=m[0],A=m[m.length-1],O=a();if(h===O){if(!E)return;_=A}if(A===O&&!E&&(_=I),I===O&&E&&(_=A),_){f.preventDefault(),_.focus();return}var U=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),D=U!=null&&U[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(D){var Q=m.indexOf(O);if(Q>-1&&(Q+=E?-1:1),_=m[Q],typeof _>"u"){f.preventDefault(),_=E?A:I,_.focus();return}f.preventDefault(),_.focus()}}n.exports=e.default}(Ec,Ec.exports)),Ec.exports}var tr={},Cf,Tv;function mC(){if(Tv)return Cf;Tv=1;var n=function(){};return Cf=n,Cf}var _r={},Rf={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var Iv;function gC(){return Iv||(Iv=1,function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()}(Rf)),Rf.exports}var Sv;function Mp(){if(Sv)return _r;Sv=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.canUseDOM=_r.SafeNodeList=_r.SafeHTMLCollection=void 0;var n=gC(),e=t(n);function t(a){return a&&a.__esModule?a:{default:a}}var i=e.default,o=i.canUseDOM?window.HTMLElement:{};return _r.SafeHTMLCollection=i.canUseDOM?window.HTMLCollection:{},_r.SafeNodeList=i.canUseDOM?window.NodeList:{},_r.canUseDOM=i.canUseDOM,_r.default=o,_r}var Av;function Bw(){if(Av)return tr;Av=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.resetState=a,tr.log=u,tr.assertNodeList=h,tr.setElement=f,tr.validateElement=m,tr.hide=_,tr.show=E,tr.documentNotReadyOrSSRTesting=I;var n=mC(),e=i(n),t=Mp();function i(A){return A&&A.__esModule?A:{default:A}}var o=null;function a(){o&&(o.removeAttribute?o.removeAttribute("aria-hidden"):o.length!=null?o.forEach(function(A){return A.removeAttribute("aria-hidden")}):document.querySelectorAll(o).forEach(function(A){return A.removeAttribute("aria-hidden")})),o=null}function u(){}function h(A,O){if(!A||!A.length)throw new Error("react-modal: No elements were found for selector "+O+".")}function f(A){var O=A;if(typeof O=="string"&&t.canUseDOM){var U=document.querySelectorAll(O);h(U,O),O=U}return o=O||o,o}function m(A){var O=A||o;return O?Array.isArray(O)||O instanceof HTMLCollection||O instanceof NodeList?O:[O]:((0,e.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function _(A){var O=!0,U=!1,D=void 0;try{for(var Q=m(A)[Symbol.iterator](),te;!(O=(te=Q.next()).done);O=!0){var W=te.value;W.setAttribute("aria-hidden","true")}}catch(H){U=!0,D=H}finally{try{!O&&Q.return&&Q.return()}finally{if(U)throw D}}}function E(A){var O=!0,U=!1,D=void 0;try{for(var Q=m(A)[Symbol.iterator](),te;!(O=(te=Q.next()).done);O=!0){var W=te.value;W.removeAttribute("aria-hidden")}}catch(H){U=!0,D=H}finally{try{!O&&Q.return&&Q.return()}finally{if(U)throw D}}}function I(){o=null}return tr}var Ps={},Cv;function yC(){if(Cv)return Ps;Cv=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.resetState=i,Ps.log=o;var n={},e={};function t(m,_){m.classList.remove(_)}function i(){var m=document.getElementsByTagName("html")[0];for(var _ in n)t(m,n[_]);var E=document.body;for(var I in e)t(E,e[I]);n={},e={}}function o(){}var a=function(_,E){return _[E]||(_[E]=0),_[E]+=1,E},u=function(_,E){return _[E]&&(_[E]-=1),E},h=function(_,E,I){I.forEach(function(A){a(E,A),_.add(A)})},f=function(_,E,I){I.forEach(function(A){u(E,A),E[A]===0&&_.remove(A)})};return Ps.add=function(_,E){return h(_.classList,_.nodeName.toLowerCase()=="html"?n:e,E.split(" "))},Ps.remove=function(_,E){return f(_.classList,_.nodeName.toLowerCase()=="html"?n:e,E.split(" "))},Ps}var qo={},Rv;function zw(){if(Rv)return qo;Rv=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.log=i,qo.resetState=o;function n(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}var e=function a(){var u=this;n(this,a),this.register=function(h){u.openInstances.indexOf(h)===-1&&(u.openInstances.push(h),u.emit("register"))},this.deregister=function(h){var f=u.openInstances.indexOf(h);f!==-1&&(u.openInstances.splice(f,1),u.emit("deregister"))},this.subscribe=function(h){u.subscribers.push(h)},this.emit=function(h){u.subscribers.forEach(function(f){return f(h,u.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},t=new e;function i(){console.log("portalOpenInstances ----------"),console.log(t.openInstances.length),t.openInstances.forEach(function(a){return console.log(a)}),console.log("end portalOpenInstances ----------")}function o(){t=new e}return qo.default=t,qo}var pl={},Pv;function vC(){if(Pv)return pl;Pv=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.resetState=u,pl.log=h;var n=zw(),e=t(n);function t(_){return _&&_.__esModule?_:{default:_}}var i=void 0,o=void 0,a=[];function u(){for(var _=[i,o],E=0;E<_.length;E++){var I=_[E];I&&I.parentNode&&I.parentNode.removeChild(I)}i=o=null,a=[]}function h(){console.log("bodyTrap ----------"),console.log(a.length);for(var _=[i,o],E=0;E<_.length;E++){var I=_[E],A=I||{};console.log(A.nodeName,A.className,A.id)}console.log("edn bodyTrap ----------")}function f(){a.length!==0&&a[a.length-1].focusContent()}function m(_,E){!i&&!o&&(i=document.createElement("div"),i.setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",f),o=i.cloneNode(),o.addEventListener("focus",f)),a=E,a.length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==o&&document.body.appendChild(o)):(i.parentElement&&i.parentElement.removeChild(i),o.parentElement&&o.parentElement.removeChild(o))}return e.default.subscribe(m),pl}var kv;function _C(){return kv||(kv=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(se){for(var ae=1;ae<arguments.length;ae++){var Se=arguments[ae];for(var q in Se)Object.prototype.hasOwnProperty.call(Se,q)&&(se[q]=Se[q])}return se},i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},o=function(){function se(ae,Se){for(var q=0;q<Se.length;q++){var G=Se[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(ae,G.key,G)}}return function(ae,Se,q){return Se&&se(ae.prototype,Se),q&&se(ae,q),ae}}(),a=la(),u=Lp(),h=pe(u),f=fC(),m=H(f),_=pC(),E=pe(_),I=Bw(),A=H(I),O=yC(),U=H(O),D=Mp(),Q=pe(D),te=zw(),W=pe(te);vC();function H(se){if(se&&se.__esModule)return se;var ae={};if(se!=null)for(var Se in se)Object.prototype.hasOwnProperty.call(se,Se)&&(ae[Se]=se[Se]);return ae.default=se,ae}function pe(se){return se&&se.__esModule?se:{default:se}}function _e(se,ae){if(!(se instanceof ae))throw new TypeError("Cannot call a class as a function")}function M(se,ae){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:se}function R(se,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);se.prototype=Object.create(ae&&ae.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(se,ae):se.__proto__=ae)}var k={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},L=function(ae){return ae.code==="Tab"||ae.keyCode===9},x=function(ae){return ae.code==="Escape"||ae.keyCode===27},b=0,C=function(se){R(ae,se);function ae(Se){_e(this,ae);var q=M(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,Se));return q.setOverlayRef=function(G){q.overlay=G,q.props.overlayRef&&q.props.overlayRef(G)},q.setContentRef=function(G){q.content=G,q.props.contentRef&&q.props.contentRef(G)},q.afterClose=function(){var G=q.props,ue=G.appElement,ie=G.ariaHideApp,V=G.htmlOpenClassName,Y=G.bodyOpenClassName,me=G.parentSelector,Pe=me&&me().ownerDocument||document;Y&&U.remove(Pe.body,Y),V&&U.remove(Pe.getElementsByTagName("html")[0],V),ie&&b>0&&(b-=1,b===0&&A.show(ue)),q.props.shouldFocusAfterRender&&(q.props.shouldReturnFocusAfterClose?(m.returnFocus(q.props.preventScroll),m.teardownScopedFocus()):m.popWithoutFocus()),q.props.onAfterClose&&q.props.onAfterClose(),W.default.deregister(q)},q.open=function(){q.beforeOpen(),q.state.afterOpen&&q.state.beforeClose?(clearTimeout(q.closeTimer),q.setState({beforeClose:!1})):(q.props.shouldFocusAfterRender&&(m.setupScopedFocus(q.node),m.markForFocusLater()),q.setState({isOpen:!0},function(){q.openAnimationFrame=requestAnimationFrame(function(){q.setState({afterOpen:!0}),q.props.isOpen&&q.props.onAfterOpen&&q.props.onAfterOpen({overlayEl:q.overlay,contentEl:q.content})})}))},q.close=function(){q.props.closeTimeoutMS>0?q.closeWithTimeout():q.closeWithoutTimeout()},q.focusContent=function(){return q.content&&!q.contentHasFocus()&&q.content.focus({preventScroll:!0})},q.closeWithTimeout=function(){var G=Date.now()+q.props.closeTimeoutMS;q.setState({beforeClose:!0,closesAt:G},function(){q.closeTimer=setTimeout(q.closeWithoutTimeout,q.state.closesAt-Date.now())})},q.closeWithoutTimeout=function(){q.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},q.afterClose)},q.handleKeyDown=function(G){L(G)&&(0,E.default)(q.content,G),q.props.shouldCloseOnEsc&&x(G)&&(G.stopPropagation(),q.requestClose(G))},q.handleOverlayOnClick=function(G){q.shouldClose===null&&(q.shouldClose=!0),q.shouldClose&&q.props.shouldCloseOnOverlayClick&&(q.ownerHandlesClose()?q.requestClose(G):q.focusContent()),q.shouldClose=null},q.handleContentOnMouseUp=function(){q.shouldClose=!1},q.handleOverlayOnMouseDown=function(G){!q.props.shouldCloseOnOverlayClick&&G.target==q.overlay&&G.preventDefault()},q.handleContentOnClick=function(){q.shouldClose=!1},q.handleContentOnMouseDown=function(){q.shouldClose=!1},q.requestClose=function(G){return q.ownerHandlesClose()&&q.props.onRequestClose(G)},q.ownerHandlesClose=function(){return q.props.onRequestClose},q.shouldBeClosed=function(){return!q.state.isOpen&&!q.state.beforeClose},q.contentHasFocus=function(){return document.activeElement===q.content||q.content.contains(document.activeElement)},q.buildClassName=function(G,ue){var ie=(typeof ue>"u"?"undefined":i(ue))==="object"?ue:{base:k[G],afterOpen:k[G]+"--after-open",beforeClose:k[G]+"--before-close"},V=ie.base;return q.state.afterOpen&&(V=V+" "+ie.afterOpen),q.state.beforeClose&&(V=V+" "+ie.beforeClose),typeof ue=="string"&&ue?V+" "+ue:V},q.attributesFromObject=function(G,ue){return Object.keys(ue).reduce(function(ie,V){return ie[G+"-"+V]=ue[V],ie},{})},q.state={afterOpen:!1,beforeClose:!1},q.shouldClose=null,q.moveFromContentToOverlay=null,q}return o(ae,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(q,G){this.props.isOpen&&!q.isOpen?this.open():!this.props.isOpen&&q.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!G.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var q=this.props,G=q.appElement,ue=q.ariaHideApp,ie=q.htmlOpenClassName,V=q.bodyOpenClassName,Y=q.parentSelector,me=Y&&Y().ownerDocument||document;V&&U.add(me.body,V),ie&&U.add(me.getElementsByTagName("html")[0],ie),ue&&(b+=1,A.hide(G)),W.default.register(this)}},{key:"render",value:function(){var q=this.props,G=q.id,ue=q.className,ie=q.overlayClassName,V=q.defaultStyles,Y=q.children,me=ue?{}:V.content,Pe=ie?{}:V.overlay;if(this.shouldBeClosed())return null;var be={ref:this.setOverlayRef,className:this.buildClassName("overlay",ie),style:t({},Pe,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},De=t({id:G,ref:this.setContentRef,style:t({},me,this.props.style.content),className:this.buildClassName("content",ue),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Fe=this.props.contentElement(De,Y);return this.props.overlayElement(be,Fe)}}]),ae}(a.Component);C.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},C.propTypes={isOpen:h.default.bool.isRequired,defaultStyles:h.default.shape({content:h.default.object,overlay:h.default.object}),style:h.default.shape({content:h.default.object,overlay:h.default.object}),className:h.default.oneOfType([h.default.string,h.default.object]),overlayClassName:h.default.oneOfType([h.default.string,h.default.object]),parentSelector:h.default.func,bodyOpenClassName:h.default.string,htmlOpenClassName:h.default.string,ariaHideApp:h.default.bool,appElement:h.default.oneOfType([h.default.instanceOf(Q.default),h.default.instanceOf(D.SafeHTMLCollection),h.default.instanceOf(D.SafeNodeList),h.default.arrayOf(h.default.instanceOf(Q.default))]),onAfterOpen:h.default.func,onAfterClose:h.default.func,onRequestClose:h.default.func,closeTimeoutMS:h.default.number,shouldFocusAfterRender:h.default.bool,shouldCloseOnOverlayClick:h.default.bool,shouldReturnFocusAfterClose:h.default.bool,preventScroll:h.default.bool,role:h.default.string,contentLabel:h.default.string,aria:h.default.object,data:h.default.object,children:h.default.node,shouldCloseOnEsc:h.default.bool,overlayRef:h.default.func,contentRef:h.default.func,id:h.default.string,overlayElement:h.default.func,contentElement:h.default.func,testId:h.default.string},e.default=C,n.exports=e.default}(_c,_c.exports)),_c.exports}function qw(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function $w(n){function e(t){var i=this.constructor.getDerivedStateFromProps(n,t);return i??null}this.setState(e.bind(this))}function Hw(n,e){try{var t=this.props,i=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,i)}finally{this.props=t,this.state=i}}qw.__suppressDeprecationWarning=!0;$w.__suppressDeprecationWarning=!0;Hw.__suppressDeprecationWarning=!0;function wC(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,i=null,o=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?o="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),t!==null||i!==null||o!==null){var a=n.displayName||n.name,u=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+u+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(i!==null?`
  `+i:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=qw,e.componentWillReceiveProps=$w),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Hw;var h=e.componentDidUpdate;e.componentDidUpdate=function(m,_,E){var I=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:E;h.call(this,m,_,I)}}return n}const EC=Object.freeze(Object.defineProperty({__proto__:null,polyfill:wC},Symbol.toStringTag,{value:"Module"})),TC=yS(EC);var xv;function IC(){if(xv)return Ci;xv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.bodyOpenClassName=Ci.portalClassName=void 0;var n=Object.assign||function(x){for(var b=1;b<arguments.length;b++){var C=arguments[b];for(var se in C)Object.prototype.hasOwnProperty.call(C,se)&&(x[se]=C[se])}return x},e=function(){function x(b,C){for(var se=0;se<C.length;se++){var ae=C[se];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(b,ae.key,ae)}}return function(b,C,se){return C&&x(b.prototype,C),se&&x(b,se),b}}(),t=la(),i=D(t),o=xp(),a=D(o),u=Lp(),h=D(u),f=_C(),m=D(f),_=Bw(),E=U(_),I=Mp(),A=D(I),O=TC;function U(x){if(x&&x.__esModule)return x;var b={};if(x!=null)for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(b[C]=x[C]);return b.default=x,b}function D(x){return x&&x.__esModule?x:{default:x}}function Q(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function te(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function W(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var H=Ci.portalClassName="ReactModalPortal",pe=Ci.bodyOpenClassName="ReactModal__Body--open",_e=I.canUseDOM&&a.default.createPortal!==void 0,M=function(b){return document.createElement(b)},R=function(){return _e?a.default.createPortal:a.default.unstable_renderSubtreeIntoContainer};function k(x){return x()}var L=function(x){W(b,x);function b(){var C,se,ae,Se;Q(this,b);for(var q=arguments.length,G=Array(q),ue=0;ue<q;ue++)G[ue]=arguments[ue];return Se=(se=(ae=te(this,(C=b.__proto__||Object.getPrototypeOf(b)).call.apply(C,[this].concat(G))),ae),ae.removePortal=function(){!_e&&a.default.unmountComponentAtNode(ae.node);var ie=k(ae.props.parentSelector);ie&&ie.contains(ae.node)?ie.removeChild(ae.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},ae.portalRef=function(ie){ae.portal=ie},ae.renderPortal=function(ie){var V=R(),Y=V(ae,i.default.createElement(m.default,n({defaultStyles:b.defaultStyles},ie)),ae.node);ae.portalRef(Y)},se),te(ae,Se)}return e(b,[{key:"componentDidMount",value:function(){if(I.canUseDOM){_e||(this.node=M("div")),this.node.className=this.props.portalClassName;var se=k(this.props.parentSelector);se.appendChild(this.node),!_e&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(se){var ae=k(se.parentSelector),Se=k(this.props.parentSelector);return{prevParent:ae,nextParent:Se}}},{key:"componentDidUpdate",value:function(se,ae,Se){if(I.canUseDOM){var q=this.props,G=q.isOpen,ue=q.portalClassName;se.portalClassName!==ue&&(this.node.className=ue);var ie=Se.prevParent,V=Se.nextParent;V!==ie&&(ie.removeChild(this.node),V.appendChild(this.node)),!(!se.isOpen&&!G)&&!_e&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!I.canUseDOM||!this.node||!this.portal)){var se=this.portal.state,ae=Date.now(),Se=se.isOpen&&this.props.closeTimeoutMS&&(se.closesAt||ae+this.props.closeTimeoutMS);Se?(se.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,Se-ae)):this.removePortal()}}},{key:"render",value:function(){if(!I.canUseDOM||!_e)return null;!this.node&&_e&&(this.node=M("div"));var se=R();return se(i.default.createElement(m.default,n({ref:this.portalRef,defaultStyles:b.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(se){E.setElement(se)}}]),b}(t.Component);return L.propTypes={isOpen:h.default.bool.isRequired,style:h.default.shape({content:h.default.object,overlay:h.default.object}),portalClassName:h.default.string,bodyOpenClassName:h.default.string,htmlOpenClassName:h.default.string,className:h.default.oneOfType([h.default.string,h.default.shape({base:h.default.string.isRequired,afterOpen:h.default.string.isRequired,beforeClose:h.default.string.isRequired})]),overlayClassName:h.default.oneOfType([h.default.string,h.default.shape({base:h.default.string.isRequired,afterOpen:h.default.string.isRequired,beforeClose:h.default.string.isRequired})]),appElement:h.default.oneOfType([h.default.instanceOf(A.default),h.default.instanceOf(I.SafeHTMLCollection),h.default.instanceOf(I.SafeNodeList),h.default.arrayOf(h.default.instanceOf(A.default))]),onAfterOpen:h.default.func,onRequestClose:h.default.func,closeTimeoutMS:h.default.number,ariaHideApp:h.default.bool,shouldFocusAfterRender:h.default.bool,shouldCloseOnOverlayClick:h.default.bool,shouldReturnFocusAfterClose:h.default.bool,preventScroll:h.default.bool,parentSelector:h.default.func,aria:h.default.object,data:h.default.object,role:h.default.string,contentLabel:h.default.string,shouldCloseOnEsc:h.default.bool,overlayRef:h.default.func,contentRef:h.default.func,id:h.default.string,overlayElement:h.default.func,contentElement:h.default.func},L.defaultProps={isOpen:!1,portalClassName:H,bodyOpenClassName:pe,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(b,C){return i.default.createElement("div",b,C)},contentElement:function(b,C){return i.default.createElement("div",b,C)}},L.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,O.polyfill)(L),Ci.default=L,Ci}var bv;function SC(){return bv||(bv=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=IC(),i=o(t);function o(a){return a&&a.__esModule?a:{default:a}}e.default=i.default,n.exports=e.default}(vc,vc.exports)),vc.exports}var AC=SC();const Ww=zs(AC);Ww.setAppElement("#root");const CC=({isOpen:n,product:e,onClose:t})=>e?v.jsx(Ww,{isOpen:n,onRequestClose:t,contentLabel:"Product Checkout",className:"modal",overlayClassName:"overlay",children:v.jsxs("div",{className:"modal-content",children:[v.jsx("h2",{children:e.name}),v.jsx("img",{src:e.image_url,alt:e.name,style:{width:"100%",maxWidth:"400px"}}),v.jsx("p",{style:{margin:"1rem 0"},children:e.description}),v.jsxs("p",{children:[v.jsx("strong",{children:"Price:"})," $",e.price.toFixed(2)," ",e.currency]}),v.jsx("a",{href:e.product_url,target:"_blank",rel:"noopener noreferrer",className:"checkout-button",style:{marginTop:"1rem"},children:"Complete Secure Checkout"}),v.jsx("br",{}),v.jsx("button",{onClick:t,style:{marginTop:"1rem"},children:"Cancel"})]})}):null,RC=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(""),[o,a]=X.useState(""),[u,h]=X.useState(null),[f,m]=X.useState(!1),[_,E]=X.useState(null),I=qs(),A=()=>{E(null),m(!1)},O=W=>{const H=(W.name||"").toLowerCase(),pe=(W.description||"").toLowerCase();return H.includes("earring")||H.includes("necklace")||H.includes("ring")?"Jewelry":H.includes("sweater")||H.includes("hat")||H.includes("shirt")||H.includes("shawl")||H.includes("beret")?"Clothing":H.includes("soap")||H.includes("scrub")||H.includes("bath")||H.includes("body")?"Bath + Beauty":H.includes("home")||pe.includes("decor")||H.includes("pillow")||H.includes("sign")?"Home Decor":H.includes("knife")||H.includes("axe")||H.includes("dagger")||H.includes("blade")?"Knives + Axes":H.includes("crystal")||H.includes("stone")||H.includes("gem")?"Crystals":H.includes("kids")||H.includes("baby")?"Baby + Kids":H.includes("card")||H.includes("gift")||H.includes("tag")?"Cards + Gifting Supplies":H.includes("craft")||H.includes("bead")||H.includes("wire")||H.includes("pom")?"Crafting":"Uncategorized"},U=W=>{const H=new Date,pe=new Date(W);return(H-pe)/(1e3*60*60*24)<=30};X.useEffect(()=>{fetch("https://tangledoakweb.onrender.com/products").then(W=>{if(!W.ok)throw new Error("Network response was not ok");return W.json()}).then(W=>{const H=W.products.map(pe=>({...pe,category_name:O(pe),created_at:pe.created_at||new Date("2024-04-01")}));H.sort((pe,_e)=>new Date(_e.created_at)-new Date(pe.created_at)),e(H)}).catch(W=>{console.error(" Fetch error:",W),h("Failed to load products. Please try again later.")})},[]);const D=n.filter(W=>{const H=t?W.category_name.toLowerCase()===t.toLowerCase():!0,pe=o?W.description.toLowerCase().includes(o.toLowerCase()):!0;return H&&pe}),Q=["Jewelry","Clothing","Accessories","Bath + Beauty","Home Decor","Food & Pantry","Crafting","Crystals","Pets","Music + Art","Knives + Axes","Baby + Kids","Cards + Gifting Supplies","Home + Office"],te=["Bohemian Heart Crafts","Knit with Love by Carol","Peddie Pieces","The Knotty Celt","Candys Dandy Crafts","Mos Craftworks","Spoons & Stuff","Tags & Tropics","Cosmically Connected","Soap & Seed","Knit's by Marsha Ann","Cheese & Stuffs","Muddy Paws Raw","Top to Toe Knits","She Keeps Bees"];return v.jsxs(v.Fragment,{children:[v.jsxs(ea,{children:[v.jsx("title",{children:"Shop Handmade Crafts | Tangled Oak + Craft Collective"}),v.jsx("meta",{name:"description",content:"Discover handmade crafts from local artisans."})]}),v.jsxs("div",{className:"shop-page",children:[v.jsxs("div",{className:"shop-header",children:[v.jsx("h1",{children:"Shop Our Collection"}),v.jsx("p",{children:"Browse products from local artisans and makers. Tap a product to check out via our secure Square store."})]}),v.jsxs("div",{className:"shop-filters",children:[v.jsxs("select",{value:t,onChange:W=>i(W.target.value),disabled:o!=="",children:[v.jsx("option",{value:"",children:"All Categories"}),Q.map(W=>v.jsx("option",{value:W,children:W},W))]}),v.jsxs("select",{value:o,onChange:W=>{a(W.target.value),i("")},children:[v.jsx("option",{value:"",children:"All Vendors"}),te.map(W=>v.jsx("option",{value:W,children:W},W))]})]}),u&&v.jsx("p",{style:{color:"red",textAlign:"center"},children:u}),v.jsx("div",{className:"products-container",children:D.filter(W=>W.product_url&&W.product_url!=="#").length===0?v.jsx("p",{style:{textAlign:"center"},children:"No available products found."}):D.filter(W=>W.product_url&&W.product_url!=="#").map(W=>v.jsxs("div",{className:"product-card",children:[U(W.created_at)&&v.jsx("div",{className:"new-badge",children:"New!"}),v.jsx("img",{src:W.image_url,alt:W.name,className:"product-image"}),v.jsx("h3",{className:"product-name",children:W.name.replace(/^New!\s*/i,"")}),v.jsxs("p",{className:"product-price",children:["$",W.price.toFixed(2)," ",W.currency]}),v.jsx("button",{onClick:()=>I(`/product/${W.id}`),className:"checkout-button",children:"View Product"})]},W.id))})]}),v.jsx(CC,{isOpen:f,product:_,onClose:A})]})},PC=()=>{const{productId:n}=bw(),[e,t]=X.useState(null),[i,o]=X.useState("");return X.useEffect(()=>{(async()=>{try{const u=await fetch("/products");if(!u.ok)throw new Error("Failed to fetch product details.");const f=(await u.json()).products.find(m=>m.id===n);f?t(f):o("Product not found.")}catch(u){console.error("Error loading product:",u),o("Failed to load product.")}})()},[n]),i?v.jsx("div",{className:"product-page",children:v.jsx("p",{children:i})}):e?v.jsxs("div",{className:"product-page",children:[v.jsx("h1",{children:e.name}),v.jsx("img",{src:e.image_url,alt:e.name,style:{maxWidth:"300px"}}),v.jsxs("p",{children:[v.jsx("strong",{children:"Price:"})," $",e.price.toFixed(2)," ",e.currency]}),v.jsx("p",{children:e.description}),v.jsx("a",{href:e.product_url,target:"_blank",rel:"noopener noreferrer",className:"checkout-button",children:"Buy Now"})]}):v.jsx("div",{className:"product-page",children:v.jsx("p",{children:"Loading..."})})},Kw=X.createContext(),kC=[];function xC(n,e){switch(e.type){case"ADD":return n.find(i=>i.id===e.payload.id)?n.map(i=>i.id===e.payload.id?{...i,quantity:i.quantity+e.payload.quantity}:i):[...n,e.payload];case"REMOVE":return n.filter(i=>i.id!==e.payload);case"CLEAR":return[];default:return n}}const bC=({children:n})=>{const[e,t]=X.useReducer(xC,kC),i=(u,h=1)=>{t({type:"ADD",payload:{...u,quantity:h}})},o=u=>{t({type:"REMOVE",payload:u})},a=()=>t({type:"CLEAR"});return v.jsx(Kw.Provider,{value:{cart:e,addToCart:i,removeFromCart:o,clearCart:a},children:n})},NC=()=>X.useContext(Kw),OC=()=>{const{cart:n,removeFromCart:e,clearCart:t}=NC(),i=async()=>{try{const a=await(await fetch("https://tangledoakweb.onrender.com/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:n})})).json();a.checkout_url?window.location.href=a.checkout_url:alert("Checkout failed: No URL returned.")}catch(o){console.error("Checkout error:",o),alert("Something went wrong during checkout.")}};return v.jsxs("div",{className:"cart-page",children:[v.jsx("h1",{children:"Your Cart"}),n.length===0?v.jsx("p",{children:"Your cart is empty."}):v.jsxs(v.Fragment,{children:[v.jsx("ul",{children:n.map(o=>v.jsxs("li",{style:{marginBottom:"1rem"},children:[v.jsx("strong",{children:o.name}),"  $",o.price.toFixed(2),"  ",o.quantity,v.jsx("br",{}),v.jsx("button",{onClick:()=>e(o.id),style:{marginTop:"0.25rem"},children:"Remove"})]},o.id))}),v.jsx("hr",{}),v.jsxs("p",{children:[v.jsx("strong",{children:"Total:"})," ","$",n.reduce((o,a)=>o+a.price*a.quantity,0).toFixed(2)]}),v.jsx("button",{onClick:i,className:"checkout-button",style:{marginTop:"1rem"},children:"Proceed to Checkout"}),v.jsx("br",{}),v.jsx("button",{onClick:t,style:{marginTop:"0.5rem",color:"red"},children:"Clear Cart"})]})]})},DC=()=>v.jsxs(v.Fragment,{children:[v.jsxs(ea,{children:[v.jsx("title",{children:"About Us | The Tangled Oak + Craft Collective"}),v.jsx("meta",{name:"description",content:"Learn about The Tangled Oak + Craft Collective in North Bay, Ontario. Discover our mission to support local artisans, explore handmade goods, and connect with a creative community."}),v.jsx("meta",{name:"keywords",content:"handmade crafts, local artisans, North Bay, craft collective, Ontario handmade gifts, support local makers"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Introduction"}),v.jsxs("p",{children:["Welcome to ",v.jsx("strong",{children:"The Tangled Oak + Craft Collective"}),", located at 150 Oak St W, North Bay, Ontario. We are a community-focused store dedicated to offering a unique selection of handmade treasures, crafted with love by local artisans. Our collective brings together a variety of products, from beautifully crafted pottery and jewelry to hand-knit items and wooden decor. Each piece tells its own story, making it the perfect place to find something special, whether for yourself or as a gift."]}),v.jsx("p",{children:"Our team is passionate about supporting local makers and providing a space for creativity and connection. Whether you're a visitor or a regular, we invite you to explore and discover the artistry behind every item we carry. Were here to celebrate handmade craft and community spirit."}),v.jsx("p",{children:"We hope you'll join us on this exciting journey and discover something special in our store. We look forward to welcoming you to our community-focused store."})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Mission and Vision"}),v.jsx("p",{children:"The Tangled Oak + Craft Collective was born from a passion for supporting local artisans and celebrating the beauty of handmade creations. Our mission is to provide a space where craft, creativity, and community come together. We are dedicated to showcasing a diverse range of high-quality, handcrafted products made by talented local makers. Each item we offer tells a unique story, reflecting the love and care put into its creation."}),v.jsx("p",{children:"Our vision is to foster a thriving creative community in North Bay by providing a platform for artisans to share their work and for customers to discover one-of-a-kind treasures. We believe in the power of handmade craftsmanship to bring joy, inspiration, and connection to everyone who experiences it."})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"What We Offer"}),v.jsx("p",{children:"At The Tangled Oak + Craft Collective, we offer a wide range of handmade goods crafted with love and care by local artisans. Our collection includes everything from custom pottery and beautifully crafted knives to unique home decor, jewelry, and gourmet products like locally made honeys and jams."}),v.jsx("p",{children:"Each piece in our store is carefully selected for its quality and artistry. Whether you're looking for functional items or decorative treasures, you'll find something that speaks to your heart and adds a touch of craftsmanship to your home or collection."}),v.jsx("p",{children:"Explore our ever-changing selection, with new items added regularly, and find that perfect, one-of-a-kind piece that makes your day a little brighter."}),v.jsx(Nt,{to:"/shop",className:"button",children:"Shop Now"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Community and Connection"}),v.jsx("p",{children:"At The Tangled Oak + Craft Collective, we believe in the power of community and the importance of supporting local artisans and makers. Our mission is to create a welcoming space where creativity flourishes, bringing together a diverse group of talented individuals who share a passion for craftsmanship."}),v.jsx("p",{children:"We are committed to fostering connections between artists and customers, creating an environment where both can grow and thrive. By supporting local makers, we help ensure that their work is recognized and celebrated, and we provide our customers with unique, high-quality pieces that reflect the creativity and spirit of our community."}),v.jsx("p",{children:"Whether you're browsing for a one-of-a-kind gift or looking for inspiration, The Tangled Oak is a place where creativity, collaboration, and community come together to create something truly special."})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"The Story Behind the Name"}),v.jsx("p",{children:'The name "The Tangled Oak" is inspired by both the natural world and our roots here in North Bay. The oak tree, known for its strength and enduring presence, symbolizes stability, growth, and deep roots. The "tangled" part of the name reflects the creative, interconnected community weve fostered with local artisans and makers. It also pays homage to our location on Oak Street, where we bring together a variety of talents and passions to create something unique and beautiful.'}),v.jsx("p",{children:"At The Tangled Oak + Craft Collective, we embrace the beauty of diversity and collaboration, much like the intertwining branches of an oak tree, and we strive to create a space where creativity and community thrive together."})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Meet the Team"}),v.jsx("p",{children:"At The Tangled Oak + Craft Collective, we are a team of passionate individuals dedicated to supporting local artisans and fostering a creative community. We work together to provide a welcoming space where artists and customers can connect and thrive."}),v.jsx("p",{children:"Our team is made up of owners, managers, and key individuals who bring their unique skills and vision to the collective. From curating the products in our store to offering personalized service, each member of our team plays an integral role in making The Tangled Oak a vibrant part of the North Bay community."}),v.jsx("p",{children:"Get to know the people behind the collective:"}),v.jsx("h3",{children:"Aimee"}),v.jsx("p",{children:"Owner and Creator. Aimee's passion for local craftsmanship and community drives the vision behind The Tangled Oak."}),v.jsx("h3",{children:"Carol"}),v.jsx("p",{children:"Manager and Curator. Carol brings her expertise in handmade goods and customer experience to the collective."}),v.jsx("h3",{children:"Charles"}),v.jsx("p",{children:"Operations Coordinator. Charles ensures that everything runs smoothly behind the scenes, managing logistics and day-to-day operations."})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Our Values"}),v.jsx("p",{children:"At The Tangled Oak + Craft Collective, we are guided by a set of core values that define our mission and the way we interact with our community. We believe in the power of craftsmanship, sustainability, and connection. Our products are thoughtfully created by artisans who value quality and authenticity, and we are committed to supporting local makers while promoting eco-friendly practices."}),v.jsx("p",{children:"We strive to create a space where creativity, collaboration, and sustainability can flourish together, benefiting both our makers and our customers."})]}),v.jsxs("div",{className:"context-box",children:[v.jsxs("p",{className:"hours-text",children:["Monday: 11 AM - 4 PM",v.jsx("br",{}),"Tuesday: 11 AM -4 PM",v.jsx("br",{}),"Wednesday: 11 AM - 4 PM",v.jsx("br",{}),"Thursday: 11 AM - 4 PM",v.jsx("br",{}),"Friday: 11 AM - 4 PM",v.jsx("br",{}),"Saturday: 10 AM - 3 PM",v.jsx("br",{}),"Sunday: CLOSED"]}),v.jsx("br",{}),v.jsx("h3",{children:"Where you can find us"}),v.jsxs("p",{children:["150 Oak Street W",v.jsx("br",{}),"North Bay, ON"]}),v.jsxs("p",{children:["Email: store@tangledoak.ca",v.jsx("br",{}),"Phone: (705) 201-2300"]})]}),v.jsx("div",{className:"context-box",children:v.jsx("iframe",{className:"map",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2755.934228632341!2d-79.46534059999999!3d46.311143699999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4d29aa9cbd52da61%3A0x5ba29b1fbf8394f9!2s150%20Oak%20St%20W%2C%20North%20Bay%2C%20ON%20P1B%202S7!5e0!3m2!1sen!2sca!4v1691078701919!5m2!1sen!2sca",width:"100%",height:"450",frameBorder:"0",allowFullScreen:"","aria-hidden":"false",tabIndex:"0"})})]}),LC=()=>{const[n,e]=X.useState({name:"",email:"",message:""}),t=o=>{const{name:a,value:u}=o.target;e(h=>({...h,[a]:u}))},i=o=>{o.preventDefault(),alert("Your message has been sent!"),e({name:"",email:"",message:""})};return v.jsx("div",{className:"contact-container",children:v.jsxs("div",{className:"main-content",children:[v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{children:"Contact Us"}),v.jsx("p",{children:"If you have any questions or comments, please don't hesitate to contact us."}),v.jsx("p",{children:"Tangled Oak Craft Collective"}),v.jsx("p",{children:"150 Oak St W, North Bay, ON"}),v.jsx("p",{children:"Phone: (705) 201-2300"}),v.jsxs("p",{children:["Email: ",v.jsx("a",{href:"mailto:store@tangledoak.ca",children:"store@tangledoak.ca"})]})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Want to be part of the Tangled Oak + Craft Collective?"}),v.jsx("p",{children:"The Tangled Oak + Craft Collective is a community-driven organization dedicated to fostering creativity, innovation, and community among the younger generations. Our mission is to create a space where young people can learn, grow, and connect with one another through their passion for crafting, DIY projects, and creative expression."}),v.jsx("p",{children:"We invite you to join us on our journey towards a brighter future, where every child can thrive and contribute to the world of crafting and creativity."}),v.jsx("p",{children:"Fill out this form and we will get back to you with more information"}),v.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSdE19LHG3M9uilKeLxM3l8Xit1jqEb3hiP5PCqCd3merF6LHA/viewform",target:"_blank",rel:"noopener noreferrer",className:"button",children:"Vendor Form"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Contact Form"}),v.jsxs("form",{onSubmit:i,className:"contact-form",children:[v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"name",children:"Name:"}),v.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:t,required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"email",children:"Email:"}),v.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:t,required:!0})]}),v.jsxs("div",{className:"form-group",children:[v.jsx("label",{htmlFor:"message",children:"Message:"}),v.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:t,rows:"4",required:!0})]}),v.jsx("button",{type:"submit",className:"button",children:"Send Message"})]})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Find Us on the Map"}),v.jsx("iframe",{className:"map",width:"80%",style:{border:"2px solid #203a13"},loading:"lazy",allowFullScreen:!0,title:"Tangled Oak Location",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2755.934228632341!2d-79.46534059999999!3d46.311143699999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4d29aa9cbd52da61%3A0x5ba29b1fbf8394f9!2s150%20Oak%20St%20W%2C%20North%20Bay%2C%20ON%20P1B%202S7!5e0!3m2!1sen!2sca!4v1742343151470!5m2!1sen!2sca"})]})]})})},MC=()=>v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Frequently Asked Questions"}),v.jsx("h2",{className:"text-xl font-semibold",children:"How do I place an order?"}),v.jsx("p",{className:"mt-2",children:"Browse our curated collection and add your favorite items to your cart. When youre ready, proceed to checkout and follow the secure payment prompts."}),v.jsx("h2",{className:"text-xl font-semibold",children:"What payment methods are accepted?"}),v.jsx("p",{className:"mt-2",children:"We accept major credit and debit cards along with select online payment options. The available options will be clearly listed at checkout."}),v.jsx("h2",{className:"text-xl font-semibold",children:"How long does shipping take?"}),v.jsx("p",{className:"mt-2",children:"Orders are typically processed within 23 business days. For local pickup in North Bay, ON, you will receive an email with instructions once your order is ready. For shipped orders within Canada, delivery usually takes 710 business days."}),v.jsx("h2",{className:"text-xl font-semibold",children:"What if my item arrives damaged or incorrect?"}),v.jsx("p",{className:"mt-2",children:"If there is an issue with your order, please contact us within 7 days of receiving it. Include your order number and photos, and well work with the vendor to resolve the issue."}),v.jsx("h2",{className:"text-xl font-semibold",children:"Are returns accepted?"}),v.jsx("p",{className:"mt-2",children:"Since most items are handmade by independent artisans and considered final sale, returns are limited. However, if theres a problem with your order, well review your case on an individual basis and coordinate with the vendor to find a satisfactory solution."}),v.jsx("h2",{className:"text-xl font-semibold",children:"Do you ship internationally?"}),v.jsx("p",{className:"mt-2",children:"Currently, we only ship within Canada. If youre outside of Canada and are interested in a specific item, please contact us directly."}),v.jsx("h2",{className:"text-xl font-semibold",children:"How can I contact customer support?"}),v.jsxs("p",{className:"mt-2",children:["You can reach out to us via email at"," ",v.jsx("a",{href:"mailto:store@tangledoak.ca",className:"text-blue-600 underline",children:"store@tangledoak.ca"})," ","or use our contact form. Were here to help with any questions or concerns."]})]}),VC=()=>v.jsxs(v.Fragment,{children:[v.jsxs(ea,{children:[v.jsx("title",{children:"Shipping & Returns | Tangled Oak"}),v.jsx("meta",{name:"description",content:"Learn about our shipping and return policies at Tangled Oak. Flat-rate shipping, free local pickup, and more."})]}),v.jsx("div",{className:"home-container",children:v.jsxs("div",{className:"main-content",children:[v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Shipping Policy"}),v.jsx("li",{children:"Orders are typically processed within 23 business days. Handmade items may take additional time depending on the artisan."}),v.jsx("br",{}),v.jsxs("li",{children:["We offer flat-rate shipping of ",v.jsx("strong",{children:"$15"})," anywhere in Canada. All orders are shipped via tracked Canada Post service."]}),v.jsx("br",{}),v.jsxs("li",{children:[v.jsx("strong",{children:"Free local pickup"})," is available in North Bay, ON. Select the pickup option at checkout and well email you when your order is ready with pickup details."]}),v.jsx("br",{}),v.jsx("li",{children:"At this time, we only ship within Canada. If youre outside Canada and would like to order, please contact us directly."}),v.jsx("br",{}),v.jsx("li",{children:"We are not responsible for lost or stolen packages. If your package is lost in transit, please contact Canada Post directly."}),v.jsx("br",{})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Returns & Exchanges"}),v.jsxs("li",{children:["Because Tangled Oak features many independent vendors, ",v.jsx("strong",{children:"most items are final sale"})," unless otherwise noted in the product listing."]}),v.jsx("br",{}),v.jsx("li",{children:"If your order arrives damaged or incorrect, contact us within 7 days of delivery. Include your order number and a photo if possible."}),v.jsx("br",{}),v.jsx("li",{children:"Well coordinate with the vendor to find a solution and do our best to resolve the issue through replacement or exchange."}),v.jsx("br",{}),v.jsxs("li",{children:["Email us at ",v.jsx("a",{href:"mailto:support@tangledoak.ca",className:"text-blue-600 underline",children:"support@tangledoak.ca"}),"."]})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h2",{children:"Important Notes"}),v.jsx("li",{children:"Custom and personalized items are non-refundable."}),v.jsx("br",{}),v.jsx("li",{children:"Return requests are subject to vendor approval. Some vendors may offer additional guarantees or exchange policies  these will be listed on the product page if available."}),v.jsx("br",{}),v.jsx("li",{children:"Returned items must be unused and in original condition."}),v.jsx("br",{}),v.jsx("li",{children:"Buyers are responsible for return shipping unless the item arrived damaged or incorrect."})]})]})})]}),jC=()=>v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),v.jsx("p",{className:"mb-4",children:"Tangled Oak + Craft Collective values your privacy. This policy explains how we collect, use, and protect your personal information when you visit our website or make a purchase."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"1. Information We Collect"}),v.jsx("li",{children:"Personal details like name, email address, shipping address, and payment information."}),v.jsx("li",{children:"Order history and account preferences (if you create an account)."}),v.jsx("li",{children:"Basic device/browser data collected through cookies or analytics tools (e.g., Google Analytics)."}),v.jsx("br",{}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"2. How We Use Your Information"}),v.jsx("li",{children:"To process and fulfill your orders."}),v.jsx("li",{children:"To communicate with you about your purchases or pickup details."}),v.jsx("li",{children:"To improve our website experience and service quality."}),v.jsx("li",{children:"To send occasional updates or announcements (you can opt out anytime)."}),v.jsx("br",{}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"3. How Your Data Is Stored"}),v.jsx("p",{className:"mb-4",children:"We use secure services like Firebase for authentication and data storage, and Square for processing payments. Your data is protected by industry-standard encryption and access controls."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"4. Third-Party Services"}),v.jsx("p",{className:"mb-4",children:"We may share necessary information with trusted third parties to complete your order (e.g., Canada Post for delivery). These services have their own privacy practices that align with industry standards."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"5. Your Rights"}),v.jsxs("p",{className:"mb-4",children:["You can request to view, update, or delete your personal information at any time by contacting us at ",v.jsx("a",{href:"mailto:support@tangledoak.ca",className:"text-blue-600 underline",children:"support@tangledoak.ca"}),"."]}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"6. Updates to This Policy"}),v.jsx("p",{className:"mb-4",children:"We may update this policy from time to time. Any changes will be posted here with a revised date."}),v.jsx("p",{children:"Last updated: April 2025"})]}),UC=()=>v.jsxs(v.Fragment,{children:[v.jsxs("head",{children:[v.jsx("title",{children:"Terms & Conditions | Tangled Oak + Craft Collective"}),v.jsx("meta",{name:"description",content:"Review the terms and conditions of Tangled Oak + Craft Collective. Understand your rights and responsibilities when using our website for shopping or browsing."}),v.jsx("meta",{name:"keywords",content:"terms and conditions, Tangled Oak, craft collective, shopping terms, website terms, policies"}),v.jsx("meta",{name:"robots",content:"index, follow"}),v.jsx("meta",{property:"og:title",content:"Terms & Conditions | Tangled Oak + Craft Collective"}),v.jsx("meta",{property:"og:description",content:"Review the terms and conditions of Tangled Oak + Craft Collective. Understand your rights and responsibilities when using our website for shopping or browsing."}),v.jsx("meta",{property:"og:url",content:"https://www.tangledoak.ca/terms"}),v.jsx("meta",{property:"og:type",content:"website"}),v.jsx("meta",{name:"twitter:title",content:"Terms & Conditions | Tangled Oak + Craft Collective"}),v.jsx("meta",{name:"twitter:description",content:"Review the terms and conditions of Tangled Oak + Craft Collective. Understand your rights and responsibilities when using our website for shopping or browsing."}),v.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]}),v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Terms & Conditions"}),v.jsx("p",{className:"mb-4",children:"By using the Tangled Oak + Craft Collective website, you agree to the following terms and conditions. Please read them carefully."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"1. General Use"}),v.jsx("p",{className:"mb-4",children:"Our site is intended for personal, non-commercial use. You agree not to misuse the website, attempt to breach its security, or interfere with its functionality."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"2. Product Listings"}),v.jsx("p",{className:"mb-4",children:"Each vendor is responsible for the accuracy of their listings, including descriptions, prices, and availability. We do our best to ensure quality and accuracy, but Tangled Oak is not liable for vendor errors."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"3. Orders & Payment"}),v.jsx("p",{className:"mb-4",children:"All purchases are processed securely through Square. Orders are subject to acceptance and availability. You will receive an order confirmation once payment is complete."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"4. Returns & Refunds"}),v.jsxs("p",{className:"mb-4",children:["Return policies vary by vendor. Please refer to our ",v.jsx("a",{href:"/shipping-policy",className:"text-blue-600 underline",children:"Shipping & Returns"})," page for more details. Most items are final sale unless noted otherwise."]}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"5. Intellectual Property"}),v.jsx("p",{className:"mb-4",children:"All site content, including text, logos, and imagery, is owned by Tangled Oak or its contributing vendors. You may not reuse, reproduce, or distribute this content without permission."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"6. Limitation of Liability"}),v.jsx("p",{className:"mb-4",children:"We do our best to ensure a smooth experience, but Tangled Oak is not liable for indirect damages, delays, or issues beyond our control (e.g., delivery delays, vendor mistakes)."}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"7. Governing Law"}),v.jsx("p",{className:"mb-4",children:"These terms are governed by the laws of Ontario, Canada. Any disputes will be handled in the appropriate courts within Ontario."}),v.jsx("p",{children:"Last updated: April 2025"})]})]}),FC=()=>{};var Nv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},BC=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],h=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,h=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,_=a>>2,E=(a&3)<<4|h>>4;let I=(h&15)<<2|m>>6,A=m&63;f||(A=64,u||(I=64)),i.push(t[_],t[E],t[I],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Gw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||m==null||E==null)throw new zC;const I=a<<2|h>>4;if(i.push(I),m!==64){const A=h<<4&240|m>>2;if(i.push(A),E!==64){const O=m<<6&192|E;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qC=function(n){const e=Gw(n);return Qw.encodeByteArray(e,!0)},qc=function(n){return qC(n).replace(/\./g,"")},Yw=function(n){try{return Qw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=()=>$C().__FIREBASE_DEFAULTS__,WC=()=>{if(typeof process>"u"||typeof Nv>"u")return;const n=Nv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yw(n[1]);return e&&JSON.parse(e)},hh=()=>{try{return FC()||HC()||WC()||KC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xw=n=>{var e,t;return(t=(e=hh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Jw=n=>{const e=Xw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Zw=()=>{var n;return(n=hh())===null||n===void 0?void 0:n.config},eE=n=>{var e;return(e=hh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qc(JSON.stringify(t)),qc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function YC(){var n;const e=(n=hh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZC(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eR(){return!YC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rE(){try{return typeof indexedDB=="object"}catch{return!1}}function iE(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function tR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class Un extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nR,Object.setPrototypeOf(this,Un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$s.prototype.create)}}class $s{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?rR(a,i):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new Un(o,h,i)}}function rR(n,e){return n.replace(iR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const iR=/\{\$([^}]+)}/g;function sR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fi(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Ov(a)&&Ov(u)){if(!Fi(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ov(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function yl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function oR(n,e){const t=new aR(n,e);return t.subscribe.bind(t)}class aR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Pf),o.error===void 0&&(o.error=Pf),o.complete===void 0&&(o.complete=Pf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1e3,cR=2,hR=4*60*60*1e3,dR=.5;function Dv(n,e=uR,t=cR){const i=e*Math.pow(t,n),o=Math.round(dR*i*(Math.random()-.5)*2);return Math.min(hR,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(n){return n&&n._delegate?n._delegate:n}class Vn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(n){return n===ks?void 0:n}function mR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const yR={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},vR=Le.INFO,_R={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},wR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=_R[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dh{constructor(e){this.name=e,this._logLevel=vR,this._logHandler=wR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const ER=(n,e)=>e.some(t=>n instanceof t);let Lv,Mv;function TR(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IR(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,tp=new WeakMap,oE=new WeakMap,kf=new WeakMap,Vp=new WeakMap;function SR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Li(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&sE.set(t,n)}).catch(()=>{}),Vp.set(e,n),e}function AR(n){if(tp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});tp.set(n,e)}let np={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CR(n){np=n(np)}function RR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(xf(this),e,...t);return oE.set(i,e.sort?e.sort():[e]),Li(i)}:IR().includes(n)?function(...e){return n.apply(xf(this),e),Li(sE.get(this))}:function(...e){return Li(n.apply(xf(this),e))}}function PR(n){return typeof n=="function"?RR(n):(n instanceof IDBTransaction&&AR(n),ER(n,TR())?new Proxy(n,np):n)}function Li(n){if(n instanceof IDBRequest)return SR(n);if(kf.has(n))return kf.get(n);const e=PR(n);return e!==n&&(kf.set(n,e),Vp.set(e,n)),e}const xf=n=>Vp.get(n);function aE(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),h=Li(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Li(u.result),f.oldVersion,f.newVersion,Li(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const kR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],bf=new Map;function Vv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=xR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kR.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),o&&f.done]))[0]};return bf.set(e,a),a}CR(n=>({...n,get:(e,t,i)=>Vv(e,t)||n.get(e,t,i),has:(e,t)=>!!Vv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function NR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",jv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new dh("@firebase/app"),OR="@firebase/app-compat",DR="@firebase/analytics-compat",LR="@firebase/analytics",MR="@firebase/app-check-compat",VR="@firebase/app-check",jR="@firebase/auth",UR="@firebase/auth-compat",FR="@firebase/database",BR="@firebase/data-connect",zR="@firebase/database-compat",qR="@firebase/functions",$R="@firebase/functions-compat",HR="@firebase/installations",WR="@firebase/installations-compat",KR="@firebase/messaging",GR="@firebase/messaging-compat",QR="@firebase/performance",YR="@firebase/performance-compat",XR="@firebase/remote-config",JR="@firebase/remote-config-compat",ZR="@firebase/storage",eP="@firebase/storage-compat",tP="@firebase/firestore",nP="@firebase/vertexai",rP="@firebase/firestore-compat",iP="firebase",sP="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",oP={[rp]:"fire-core",[OR]:"fire-core-compat",[LR]:"fire-analytics",[DR]:"fire-analytics-compat",[VR]:"fire-app-check",[MR]:"fire-app-check-compat",[jR]:"fire-auth",[UR]:"fire-auth-compat",[FR]:"fire-rtdb",[BR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[qR]:"fire-fn",[$R]:"fire-fn-compat",[HR]:"fire-iid",[WR]:"fire-iid-compat",[KR]:"fire-fcm",[GR]:"fire-fcm-compat",[QR]:"fire-perf",[YR]:"fire-perf-compat",[XR]:"fire-rc",[JR]:"fire-rc-compat",[ZR]:"fire-gcs",[eP]:"fire-gcs-compat",[tP]:"fire-fst",[rP]:"fire-fst-compat",[nP]:"fire-vertex","fire-js":"fire-js",[iP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Map,aP=new Map,sp=new Map;function Uv(n,e){try{n.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sr(n){const e=n.name;if(sp.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,n);for(const t of $c.values())Uv(t,n);for(const t of aP.values())Uv(t,n);return!0}function Gi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new $s("app","Firebase",lP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=sP;function lE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ip,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Mi.create("bad-app-name",{appName:String(o)});if(t||(t=Zw()),!t)throw Mi.create("no-options");const a=$c.get(o);if(a){if(Fi(t,a.options)&&Fi(i,a.config))return a;throw Mi.create("duplicate-app",{appName:o})}const u=new gR(o);for(const f of sp.values())u.addComponent(f);const h=new uP(t,i,u);return $c.set(o,h),h}function fh(n=ip){const e=$c.get(n);if(!e&&n===ip&&Zw())return lE();if(!e)throw Mi.create("no-app",{appName:n});return e}function fn(n,e,t){var i;let o=(i=oP[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(h.join(" "));return}sr(new Vn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="firebase-heartbeat-database",hP=1,Nl="firebase-heartbeat-store";let Nf=null;function uE(){return Nf||(Nf=aE(cP,hP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mi.create("idb-open",{originalErrorMessage:n.message})})),Nf}async function dP(n){try{const t=(await uE()).transaction(Nl),i=await t.objectStore(Nl).get(cE(n));return await t.done,i}catch(e){if(e instanceof Un)Yr.warn(e.message);else{const t=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yr.warn(t.message)}}}async function Fv(n,e){try{const i=(await uE()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,cE(n)),await i.done}catch(t){if(t instanceof Un)Yr.warn(t.message);else{const i=Mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yr.warn(i.message)}}}function cE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=1024,pP=30;class mP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Bv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>pP){const u=vP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Yr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bv(),{heartbeatsToSend:i,unsentEntries:o}=gP(this._heartbeatsCache.heartbeats),a=qc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Yr.warn(t),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function gP(n,e=fP){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),zv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class yP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rE()?iE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zv(n){return qc(JSON.stringify({version:2,heartbeats:n})).length}function vP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){sr(new Vn("platform-logger",e=>new bR(e),"PRIVATE")),sr(new Vn("heartbeat",e=>new mP(e),"PRIVATE")),fn(rp,jv,n),fn(rp,jv,"esm2017"),fn("fire-js","")}_P("");function jp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function hE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wP=hE,dE=new $s("auth","Firebase",hE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new dh("@firebase/auth");function EP(n,...e){Hc.logLevel<=Le.WARN&&Hc.warn(`Auth (${Hs}): ${n}`,...e)}function bc(n,...e){Hc.logLevel<=Le.ERROR&&Hc.error(`Auth (${Hs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n,...e){throw Fp(n,...e)}function ir(n,...e){return Fp(n,...e)}function Up(n,e,t){const i=Object.assign(Object.assign({},wP()),{[e]:t});return new $s("auth","Firebase",i).create(e,{appName:n.name})}function Gr(n){return Up(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TP(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&jn(n,"argument-error"),Up(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return dE.create(n,...e)}function Ie(n,e,...t){if(!n)throw Fp(e,...t)}function Wr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bc(e),new Error(e)}function Xr(n,e){n||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function IP(){return qv()==="http:"||qv()==="https:"}function qv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IP()||nE()||"connection"in navigator)?navigator.onLine:!0}function AP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=QC()||JC()}get(){return SP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(n,e){Xr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PP=new Wl(3e4,6e4);function Qi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yi(n,e,t,i,o={}){return pE(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const h=Hl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return XC()||(m.referrerPolicy="no-referrer"),fE.fetch()(await mE(n,n.config.apiHost,t,h),m)})}async function pE(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},CP),e);try{const o=new xP(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Tc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Tc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Tc(n,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Up(n,_,m);jn(n,_)}}catch(o){if(o instanceof Un)throw o;jn(n,"network-request-failed",{message:String(o)})}}async function Kl(n,e,t,i,o={}){const a=await Yi(n,e,t,i,o);return"mfaPendingCredential"in a&&jn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function mE(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Bp(n.config,o):`${n.config.apiScheme}://${o}`;return RP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function kP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ir(this.auth,"network-request-failed")),PP.get())})}}function Tc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ir(n,e,i);return o.customData._tokenResponse=t,o}function $v(n){return n!==void 0&&n.enterprise!==void 0}class bP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NP(n,e){return Yi(n,"GET","/v2/recaptchaConfig",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(n,e){return Yi(n,"POST","/v1/accounts:delete",e)}async function Wc(n,e){return Yi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DP(n,e=!1){const t=st(n),i=await t.getIdToken(e),o=zp(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Tl(Of(o.auth_time)),issuedAtTime:Tl(Of(o.iat)),expirationTime:Tl(Of(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Of(n){return Number(n)*1e3}function zp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Yw(t);return o?JSON.parse(o):(bc("Failed to decode base64 JWT payload"),null)}catch(o){return bc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Hv(n){const e=zp(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Un&&LP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function LP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ol(n,Wc(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?gE(a.providerUserInfo):[],h=jP(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),_=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new ap(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function VP(n){const e=st(n);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function gE(n){return n.map(e=>{var{providerId:t}=e,i=jp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(n,e){const t=await pE(n,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await mE(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",fE.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FP(n,e){return Yi(n,"POST","/v2/accounts:revokeToken",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Hv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await UP(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Yo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ap(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DP(this,e)}reload(){return VP(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Kc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Gr(this.auth));const e=await this.getIdToken();return await Ol(this,OP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,h,f,m,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,Q=(m=t.createdAt)!==null&&m!==void 0?m:void 0,te=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:W,emailVerified:H,isAnonymous:pe,providerData:_e,stsTokenManager:M}=t;Ie(W&&M,e,"internal-error");const R=Yo.fromJSON(this.name,M);Ie(typeof W=="string",e,"internal-error"),Ri(E,e.name),Ri(I,e.name),Ie(typeof H=="boolean",e,"internal-error"),Ie(typeof pe=="boolean",e,"internal-error"),Ri(A,e.name),Ri(O,e.name),Ri(U,e.name),Ri(D,e.name),Ri(Q,e.name),Ri(te,e.name);const k=new rr({uid:W,auth:e,email:I,emailVerified:H,displayName:E,isAnonymous:pe,photoURL:O,phoneNumber:A,tenantId:U,stsTokenManager:R,createdAt:Q,lastLoginAt:te});return _e&&Array.isArray(_e)&&(k.providerData=_e.map(L=>Object.assign({},L))),D&&(k._redirectEventId=D),k}static async _fromIdTokenResponse(e,t,i=!1){const o=new Yo;o.updateFromServerResponse(t);const a=new rr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Kc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?gE(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),h=new Yo;h.updateFromIdToken(i);const f=new rr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;function Kr(n){Xr(n instanceof Function,"Expected a class definition");let e=Wv.get(n);return e?(Xr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yE.type="NONE";const Kv=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(n,e,t){return`firebase:${n}:${e}:${t}`}class Xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Nc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Nc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wc(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Xo(Kr(Kv),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||Kr(Kv);const u=Nc(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){let E;if(typeof _=="string"){const I=await Wc(e,{idToken:_}).catch(()=>{});if(!I)break;E=await rr._fromGetAccountInfoResponse(e,I,_)}else E=rr._fromJSON(e,_);m!==a&&(h=E),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Xo(a,e,i):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Xo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IE(e))return"Blackberry";if(SE(e))return"Webos";if(_E(e))return"Safari";if((e.includes("chrome/")||wE(e))&&!e.includes("edge/"))return"Chrome";if(TE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vE(n=Kt()){return/firefox\//i.test(n)}function _E(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wE(n=Kt()){return/crios\//i.test(n)}function EE(n=Kt()){return/iemobile/i.test(n)}function TE(n=Kt()){return/android/i.test(n)}function IE(n=Kt()){return/blackberry/i.test(n)}function SE(n=Kt()){return/webos/i.test(n)}function qp(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BP(n=Kt()){var e;return qp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zP(){return ZC()&&document.documentMode===10}function AE(n=Kt()){return qp(n)||TE(n)||SE(n)||IE(n)||/windows phone/i.test(n)||EE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n,e=[]){let t;switch(n){case"Browser":t=Gv(Kt());break;case"Worker":t=`${Gv(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,e={}){return Yi(n,"GET","/v2/passwordPolicy",Qi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=6;class WP{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:HP,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qv(this),this.idTokenSubscription=new Qv(this),this.beforeStateQueue=new qP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wc(this,{idToken:e}),i=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(hn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(Gr(this));const t=e?st(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $P(this),t=new WP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $s("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await FP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&EP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xi(n){return st(n)}class Qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GP(n){ph=n}function RE(n){return ph.loadJS(n)}function QP(){return ph.recaptchaEnterpriseScript}function YP(){return ph.gapiScript}function XP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JP{constructor(){this.enterprise=new ZP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ek="recaptcha-enterprise",PE="NO_RECAPTCHA";class tk{constructor(e){this.type=ek,this.auth=Xi(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{NP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new bP(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function o(a,u,h){const f=window.grecaptcha;$v(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(PE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JP().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(h=>{if(!t&&$v(window.grecaptcha))o(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=QP();f.length!==0&&(f+=h),RE(f).then(()=>{o(h,a,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function Yv(n,e,t,i=!1,o=!1){const a=new tk(n);let u;if(o)u=PE;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function lp(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Yv(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Yv(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e){const t=Gi(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Fi(a,e??{}))return o;jn(o,"already-initialized")}return t.initialize({options:e})}function rk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Kr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ik(n,e,t){const i=Xi(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=kE(e),{host:u,port:h}=sk(e),f=h===null?"":`:${h}`,m={url:`${a}//${u}${f}/`},_=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Fi(m,i.config.emulator)&&Fi(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,ok()}function kE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sk(n){const e=kE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:Xv(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Xv(u)}}}function Xv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ok(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,t){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function ak(n,e){return Yi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,e){return Kl(n,"POST","/v1/accounts:signInWithPassword",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Qi(n,e))}async function ck(n,e){return Kl(n,"POST","/v1/accounts:signInWithEmailLink",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends $p{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Dl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Dl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lp(e,t,"signInWithPassword",lk);case"emailLink":return uk(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lp(e,i,"signUpPassword",ak);case"emailLink":return ck(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n,e){return Kl(n,"POST","/v1/accounts:signInWithIdp",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="http://localhost";class Ls extends $p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=jp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new Ls(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Jo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Jo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jo(e,t)}buildRequest(){const e={requestUri:hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fk(n){const e=gl(yl(n)).link,t=e?gl(yl(e)).deep_link_id:null,i=gl(yl(n)).deep_link_id;return(i?gl(yl(i)).link:null)||i||t||e||n}class Hp{constructor(e){var t,i,o,a,u,h;const f=gl(yl(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,E=dk((o=f.mode)!==null&&o!==void 0?o:null);Ie(m&&_&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=fk(e);try{return new Hp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,t){return Dl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Hp.parseLink(t);return Ie(i,"argument-error"),Dl._fromEmailAndCode(e,i.code,i.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends Wp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Gl{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ls._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Hr.credential(t,i)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Gl{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Gl{constructor(){super("twitter.com")}static credential(e,t){return Ls._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return xi.credential(t,i)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(n,e){return Kl(n,"POST","/v1/accounts:signUp",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await rr._fromIdTokenResponse(e,i,o),u=Jv(i);return new Ms({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Jv(i);return new Ms({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Jv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Un{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Gc(e,t,i,o)}}function xE(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(n,a,e,i):a})}async function mk(n,e,t=!1){const i=await Ol(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ms._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(n,e,t=!1){const{auth:i}=n;if(hn(i.app))return Promise.reject(Gr(i));const o="reauthenticate";try{const a=await Ol(n,xE(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=zp(a.idToken);Ie(u,i,"internal-error");const{sub:h}=u;return Ie(n.uid===h,i,"user-mismatch"),Ms._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&jn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE(n,e,t=!1){if(hn(n.app))return Promise.reject(Gr(n));const i="signIn",o=await xE(n,i,e),a=await Ms._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function yk(n,e){return bE(Xi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(n){const e=Xi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vk(n,e,t){if(hn(n.app))return Promise.reject(Gr(n));const i=Xi(n),u=await lp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pk).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&NE(n),f}),h=await Ms._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function _k(n,e,t){return hn(n.app)?Promise.reject(Gr(n)):yk(st(n),ha.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&NE(n),i})}function wk(n,e,t,i){return st(n).onIdTokenChanged(e,t,i)}function Ek(n,e,t){return st(n).beforeAuthStateChanged(e,t)}function Tk(n,e,t,i){return st(n).onAuthStateChanged(e,t,i)}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=1e3,Sk=10;class DE extends OE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);zP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Sk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DE.type="LOCAL";const Ak=DE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends OE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LE.type="SESSION";const ME=LE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(u).map(async m=>m(t.origin,a)),f=await Ck(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const m=Kp("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function Pk(n){Tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function kk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xk(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bk(){return VE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebaseLocalStorageDb",Nk=1,Yc="firebaseLocalStorage",UE="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gh(n,e){return n.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function Ok(){const n=indexedDB.deleteDatabase(jE);return new Ql(n).toPromise()}function up(){const n=indexedDB.open(jE,Nk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Yc,{keyPath:UE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Yc)?e(i):(i.close(),await Ok(),e(await up()))})})}async function Zv(n,e,t){const i=gh(n,!0).put({[UE]:e,value:t});return new Ql(i).toPromise()}async function Dk(n,e){const t=gh(n,!1).get(e),i=await new Ql(t).toPromise();return i===void 0?null:i.value}function e_(n,e){const t=gh(n,!0).delete(e);return new Ql(t).toPromise()}const Lk=800,Mk=3;class FE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Mk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mh._getInstance(bk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await kk(),!this.activeServiceWorker)return;this.sender=new Rk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await Zv(e,Qc,"1"),await e_(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Dk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=gh(o,!1).getAll();return new Ql(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FE.type="LOCAL";const Vk=FE;new Wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e){return e?Kr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends $p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jk(n){return bE(n.auth,new Gp(n),n.bypassAuthState)}function Uk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),gk(t,new Gp(n),n.bypassAuthState)}async function Fk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),mk(t,new Gp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jk;case"linkViaPopup":case"linkViaRedirect":return Fk;case"reauthViaPopup":case"reauthViaRedirect":return Uk;default:jn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new Wl(2e3,1e4);async function zk(n,e,t){if(hn(n.app))return Promise.reject(ir(n,"operation-not-supported-in-this-environment"));const i=Xi(n);TP(n,e,Wp);const o=BE(i,t);return new xs(i,"signInViaPopup",e,o).executeNotNull()}class xs extends zE{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=Kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bk.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="pendingRedirect",Oc=new Map;class $k extends zE{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const i=await Hk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hk(n,e){const t=Gk(e),i=Kk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Wk(n,e){Oc.set(n._key(),e)}function Kk(n){return Kr(n._redirectPersistence)}function Gk(n){return Nc(qk,n.config.apiKey,n.name)}async function Qk(n,e,t=!1){if(hn(n.app))return Promise.reject(Gr(n));const i=Xi(n),o=BE(i,e),u=await new $k(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=10*60*1e3;class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!qE(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yk&&this.cachedEventUids.clear(),this.cachedEventUids.has(t_(e))}saveEventToCache(e){this.cachedEventUids.add(t_(e)),this.lastProcessedEventTime=Date.now()}}function t_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(n,e={}){return Yi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tx=/^https?/;async function nx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Zk(n);for(const t of e)try{if(rx(t))return}catch{}jn(n,"unauthorized-domain")}function rx(n){const e=op(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!tx.test(t))return!1;if(ex.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Wl(3e4,6e4);function n_(){const n=Tr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sx(n){return new Promise((e,t)=>{var i,o,a;function u(){n_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n_(),t(ir(n,"network-request-failed"))},timeout:ix.get()})}if(!((o=(i=Tr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Tr().gapi)===null||a===void 0)&&a.load)u();else{const h=XP("iframefcb");return Tr()[h]=()=>{gapi.load?u():t(ir(n,"network-request-failed"))},RE(`${YP()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function ox(n){return Dc=Dc||sx(n),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Wl(5e3,15e3),lx="__/auth/iframe",ux="emulator/auth/iframe",cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dx(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bp(e,ux):`https://${n.config.authDomain}/${lx}`,i={apiKey:e.apiKey,appName:n.name,v:Hs},o=hx.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Hl(i).slice(1)}`}async function fx(n){const e=await ox(n),t=Tr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:dx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cx,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=ir(n,"network-request-failed"),h=Tr().setTimeout(()=>{a(u)},ax.get());function f(){Tr().clearTimeout(h),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mx=500,gx=600,yx="_blank",vx="http://localhost";class r_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _x(n,e,t,i=mx,o=gx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f=Object.assign(Object.assign({},px),{width:i.toString(),height:o.toString(),top:a,left:u}),m=Kt().toLowerCase();t&&(h=wE(m)?yx:t),vE(m)&&(e=e||vx,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[A,O])=>`${I}${A}=${O},`,"");if(BP(m)&&h!=="_self")return wx(e||"",h),new r_(null);const E=window.open(e||"",h,_);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new r_(E)}function wx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="__/auth/handler",Tx="emulator/auth/handler",Ix=encodeURIComponent("fac");async function i_(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Hs,eventId:o};if(e instanceof Wp){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",sR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Gl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${Ix}=${encodeURIComponent(f)}`:"";return`${Sx(n)}?${Hl(h).slice(1)}${m}`}function Sx({config:n}){return n.emulator?Bp(n,Tx):`https://${n.authDomain}/${Ex}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="webStorageSupport";class Ax{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ME,this._completeRedirectFn=Qk,this._overrideRedirectResult=Wk}async _openPopup(e,t,i,o){var a;Xr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await i_(e,t,i,op(),o);return _x(e,u,Kp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await i_(e,t,i,op(),o);return Pk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Xr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await fx(e),i=new Xk(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Df,{type:Df},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Df];u!==void 0&&t(!!u),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AE()||_E()||qp()}}const Cx=Ax;var s_="@firebase/auth",o_="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kx(n){sr(new Vn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(n)},m=new KP(i,o,a,f);return rk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),sr(new Vn("auth-internal",e=>{const t=Xi(e.getProvider("auth").getImmediate());return(i=>new Rx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(s_,o_,Px(n)),fn(s_,o_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=5*60,bx=eE("authIdTokenMaxAge")||xx;let a_=null;const Nx=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>bx)return;const o=t==null?void 0:t.token;a_!==o&&(a_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Ox(n=fh()){const e=Gi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nk(n,{popupRedirectResolver:Cx,persistence:[Vk,Ak,ME]}),i=eE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=Nx(a.toString());Ek(t,u,()=>u(t.currentUser)),wk(t,h=>u(h))}}const o=Xw("auth");return o&&ik(t,`http://${o}`),t}function Dx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}GP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=ir("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",Dx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kx("Browser");var Lx="firebase",Mx="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(Lx,Mx,"app");const $E="@firebase/installations",Qp="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=1e4,WE=`w:${Qp}`,KE="FIS_v2",Vx="https://firebaseinstallations.googleapis.com/v1",jx=60*60*1e3,Ux="installations",Fx="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new $s(Ux,Fx,Bx);function GE(n){return n instanceof Un&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE({projectId:n}){return`${Vx}/projects/${n}/installations`}function YE(n){return{token:n.token,requestStatus:2,expiresIn:qx(n.expiresIn),creationTime:Date.now()}}async function XE(n,e){const i=(await e.json()).error;return Vs.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function JE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function zx(n,{refreshToken:e}){const t=JE(n);return t.append("Authorization",$x(e)),t}async function ZE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function qx(n){return Number(n.replace("s","000"))}function $x(n){return`${KE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=QE(n),o=JE(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const u={fid:t,authVersion:KE,appId:n.appId,sdkVersion:WE},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await ZE(()=>fetch(i,h));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:YE(m.authToken)}}else throw await XE("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=/^[cdef][\w-]{21}$/,cp="";function Gx(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Qx(n);return Kx.test(t)?t:cp}catch{return cp}}function Qx(n){return Wx(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;function nT(n,e){const t=yh(n);rT(t,e),Yx(t,e)}function rT(n,e){const t=tT.get(n);if(t)for(const i of t)i(e)}function Yx(n,e){const t=Xx();t&&t.postMessage({key:n,fid:e}),Jx()}let bs=null;function Xx(){return!bs&&"BroadcastChannel"in self&&(bs=new BroadcastChannel("[Firebase] FID Change"),bs.onmessage=n=>{rT(n.data.key,n.data.fid)}),bs}function Jx(){tT.size===0&&bs&&(bs.close(),bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="firebase-installations-database",e1=1,js="firebase-installations-store";let Lf=null;function Yp(){return Lf||(Lf=aE(Zx,e1,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(js)}}})),Lf}async function Xc(n,e){const t=yh(n),o=(await Yp()).transaction(js,"readwrite"),a=o.objectStore(js),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&nT(n,e.fid),e}async function iT(n){const e=yh(n),i=(await Yp()).transaction(js,"readwrite");await i.objectStore(js).delete(e),await i.done}async function vh(n,e){const t=yh(n),o=(await Yp()).transaction(js,"readwrite"),a=o.objectStore(js),u=await a.get(t),h=e(u);return h===void 0?await a.delete(t):await a.put(h,t),await o.done,h&&(!u||u.fid!==h.fid)&&nT(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xp(n){let e;const t=await vh(n.appConfig,i=>{const o=t1(i),a=n1(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===cp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function t1(n){const e=n||{fid:Gx(),registrationStatus:0};return sT(e)}function n1(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=r1(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:i1(n)}:{installationEntry:e}}async function r1(n,e){try{const t=await Hx(n,e);return Xc(n.appConfig,t)}catch(t){throw GE(t)&&t.customData.serverCode===409?await iT(n.appConfig):await Xc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function i1(n){let e=await l_(n.appConfig);for(;e.registrationStatus===1;)await eT(100),e=await l_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Xp(n);return i||t}return e}function l_(n){return vh(n,e=>{if(!e)throw Vs.create("installation-not-found");return sT(e)})}function sT(n){return s1(n)?{fid:n.fid,registrationStatus:0}:n}function s1(n){return n.registrationStatus===1&&n.registrationTime+HE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1({appConfig:n,heartbeatServiceProvider:e},t){const i=a1(n,t),o=zx(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const u={installation:{sdkVersion:WE,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await ZE(()=>fetch(i,h));if(f.ok){const m=await f.json();return YE(m)}else throw await XE("Generate Auth Token",f)}function a1(n,{fid:e}){return`${QE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(n,e=!1){let t;const i=await vh(n.appConfig,a=>{if(!oT(a))throw Vs.create("not-registered");const u=a.authToken;if(!e&&c1(u))return a;if(u.requestStatus===1)return t=l1(n,e),a;{if(!navigator.onLine)throw Vs.create("app-offline");const h=d1(a);return t=u1(n,h),h}});return t?await t:i.authToken}async function l1(n,e){let t=await u_(n.appConfig);for(;t.authToken.requestStatus===1;)await eT(100),t=await u_(n.appConfig);const i=t.authToken;return i.requestStatus===0?Jp(n,e):i}function u_(n){return vh(n,e=>{if(!oT(e))throw Vs.create("not-registered");const t=e.authToken;return f1(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function u1(n,e){try{const t=await o1(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Xc(n.appConfig,i),t}catch(t){if(GE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await iT(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Xc(n.appConfig,i)}throw t}}function oT(n){return n!==void 0&&n.registrationStatus===2}function c1(n){return n.requestStatus===2&&!h1(n)}function h1(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+jx}function d1(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function f1(n){return n.requestStatus===1&&n.requestTime+HE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n){const e=n,{installationEntry:t,registrationPromise:i}=await Xp(e);return i?i.catch(console.error):Jp(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(n,e=!1){const t=n;return await g1(t),(await Jp(t,e)).token}async function g1(n){const{registrationPromise:e}=await Xp(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){if(!n||!n.options)throw Mf("App Configuration");if(!n.name)throw Mf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Mf(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Mf(n){return Vs.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="installations",v1="installations-internal",_1=n=>{const e=n.getProvider("app").getImmediate(),t=y1(e),i=Gi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},w1=n=>{const e=n.getProvider("app").getImmediate(),t=Gi(e,aT).getImmediate();return{getId:()=>p1(t),getToken:o=>m1(t,o)}};function E1(){sr(new Vn(aT,_1,"PUBLIC")),sr(new Vn(v1,w1,"PRIVATE"))}E1();fn($E,Qp);fn($E,Qp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="analytics",T1="firebase_id",I1="origin",S1=60*1e3,A1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new dh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new $s("analytics","Analytics",C1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n){if(!n.startsWith(Zp)){const e=Sn.create("invalid-gtag-resource",{gtagURL:n});return pn.warn(e.message),""}return n}function lT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function P1(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function k1(n,e){const t=P1("firebase-js-sdk-policy",{createScriptURL:R1}),i=document.createElement("script"),o=`${Zp}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function x1(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function b1(n,e,t,i,o,a){const u=i[o];try{if(u)await e[u];else{const f=(await lT(t)).find(m=>m.measurementId===o);f&&await e[f.appId]}}catch(h){pn.error(h)}n("config",o,a)}async function N1(n,e,t,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const h=await lT(t);for(const f of u){const m=h.find(E=>E.measurementId===f),_=m&&e[m.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,o||{})}catch(a){pn.error(a)}}function O1(n,e,t,i){async function o(a,...u){try{if(a==="event"){const[h,f]=u;await N1(n,e,t,h,f)}else if(a==="config"){const[h,f]=u;await b1(n,e,t,i,h,f)}else if(a==="consent"){const[h,f]=u;n("consent",h,f)}else if(a==="get"){const[h,f,m]=u;n("get",h,f,m)}else if(a==="set"){const[h]=u;n("set",h)}else n(a,...u)}catch(h){pn.error(h)}}return o}function D1(n,e,t,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=O1(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function L1(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Zp)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=30,V1=1e3;class j1{constructor(e={},t=V1){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uT=new j1;function U1(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function F1(n){var e;const{appId:t,apiKey:i}=n,o={method:"GET",headers:U1(i)},a=A1.replace("{app-id}",t),u=await fetch(a,o);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function B1(n,e=uT,t){const{appId:i,apiKey:o,measurementId:a}=n.options;if(!i)throw Sn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw Sn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new $1;return setTimeout(async()=>{h.abort()},S1),cT({appId:i,apiKey:o,measurementId:a},u,h,e)}async function cT(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=uT){var a;const{appId:u,measurementId:h}=n;try{await z1(i,e)}catch(f){if(h)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:u,measurementId:h};throw f}try{const f=await F1(n);return o.deleteThrottleMetadata(u),f}catch(f){const m=f;if(!q1(m)){if(o.deleteThrottleMetadata(u),h)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:u,measurementId:h};throw f}const _=Number((a=m==null?void 0:m.customData)===null||a===void 0?void 0:a.httpStatus)===503?Dv(t,o.intervalMillis,M1):Dv(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(u,E),pn.debug(`Calling attemptFetch again in ${_} millis`),cT(n,E,i,o)}}function z1(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),i(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function q1(n){if(!(n instanceof Un)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class $1{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function H1(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const a=await e,u=Object.assign(Object.assign({},i),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(){if(rE())try{await iE()}catch(n){return pn.warn(Sn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return pn.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function K1(n,e,t,i,o,a,u){var h;const f=B1(n);f.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>pn.error(A)),e.push(f);const m=W1().then(A=>{if(A)return i.getId()}),[_,E]=await Promise.all([f,m]);L1(a)||k1(a,_.measurementId),o("js",new Date);const I=(h=u==null?void 0:u.config)!==null&&h!==void 0?h:{};return I[I1]="firebase",I.update=!0,E!=null&&(I[T1]=E),o("config",_.measurementId,I),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.app=e}_delete(){return delete Il[this.app.options.appId],Promise.resolve()}}let Il={},c_=[];const h_={};let Vf="dataLayer",Q1="gtag",d_,hT,f_=!1;function Y1(){const n=[];if(nE()&&n.push("This is a browser extension environment."),tR()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Sn.create("invalid-analytics-context",{errorInfo:e});pn.warn(t.message)}}function X1(n,e,t){Y1();const i=n.options.appId;if(!i)throw Sn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Il[i]!=null)throw Sn.create("already-exists",{id:i});if(!f_){x1(Vf);const{wrappedGtag:a,gtagCore:u}=D1(Il,c_,h_,Vf,Q1);hT=a,d_=u,f_=!0}return Il[i]=K1(n,c_,h_,e,d_,Vf,t),new G1(n)}function J1(n=fh()){n=st(n);const e=Gi(n,Jc);return e.isInitialized()?e.getImmediate():Z1(n)}function Z1(n,e={}){const t=Gi(n,Jc);if(t.isInitialized()){const o=t.getImmediate();if(Fi(e,t.getOptions()))return o;throw Sn.create("already-initialized")}return t.initialize({options:e})}function eb(n,e,t,i){n=st(n),H1(hT,Il[n.app.options.appId],e,t,i).catch(o=>pn.error(o))}const p_="@firebase/analytics",m_="0.10.12";function tb(){sr(new Vn(Jc,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return X1(i,o,t)},"PUBLIC")),sr(new Vn("analytics-internal",n,"PRIVATE")),fn(p_,m_),fn(p_,m_,"esm2017");function n(e){try{const t=e.getProvider(Jc).getImmediate();return{logEvent:(i,o,a)=>eb(t,i,o,a)}}catch(t){throw Sn.create("interop-component-reg-failed",{reason:t})}}}tb();var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,dT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function k(){}k.prototype=R.prototype,M.D=R.prototype,M.prototype=new k,M.prototype.constructor=M,M.C=function(L,x,b){for(var C=Array(arguments.length-2),se=2;se<arguments.length;se++)C[se-2]=arguments[se];return R.prototype[x].apply(L,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,k){k||(k=0);var L=Array(16);if(typeof R=="string")for(var x=0;16>x;++x)L[x]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(x=0;16>x;++x)L[x]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=M.g[0],k=M.g[1],x=M.g[2];var b=M.g[3],C=R+(b^k&(x^b))+L[0]+3614090360&4294967295;R=k+(C<<7&4294967295|C>>>25),C=b+(x^R&(k^x))+L[1]+3905402710&4294967295,b=R+(C<<12&4294967295|C>>>20),C=x+(k^b&(R^k))+L[2]+606105819&4294967295,x=b+(C<<17&4294967295|C>>>15),C=k+(R^x&(b^R))+L[3]+3250441966&4294967295,k=x+(C<<22&4294967295|C>>>10),C=R+(b^k&(x^b))+L[4]+4118548399&4294967295,R=k+(C<<7&4294967295|C>>>25),C=b+(x^R&(k^x))+L[5]+1200080426&4294967295,b=R+(C<<12&4294967295|C>>>20),C=x+(k^b&(R^k))+L[6]+2821735955&4294967295,x=b+(C<<17&4294967295|C>>>15),C=k+(R^x&(b^R))+L[7]+4249261313&4294967295,k=x+(C<<22&4294967295|C>>>10),C=R+(b^k&(x^b))+L[8]+1770035416&4294967295,R=k+(C<<7&4294967295|C>>>25),C=b+(x^R&(k^x))+L[9]+2336552879&4294967295,b=R+(C<<12&4294967295|C>>>20),C=x+(k^b&(R^k))+L[10]+4294925233&4294967295,x=b+(C<<17&4294967295|C>>>15),C=k+(R^x&(b^R))+L[11]+2304563134&4294967295,k=x+(C<<22&4294967295|C>>>10),C=R+(b^k&(x^b))+L[12]+1804603682&4294967295,R=k+(C<<7&4294967295|C>>>25),C=b+(x^R&(k^x))+L[13]+4254626195&4294967295,b=R+(C<<12&4294967295|C>>>20),C=x+(k^b&(R^k))+L[14]+2792965006&4294967295,x=b+(C<<17&4294967295|C>>>15),C=k+(R^x&(b^R))+L[15]+1236535329&4294967295,k=x+(C<<22&4294967295|C>>>10),C=R+(x^b&(k^x))+L[1]+4129170786&4294967295,R=k+(C<<5&4294967295|C>>>27),C=b+(k^x&(R^k))+L[6]+3225465664&4294967295,b=R+(C<<9&4294967295|C>>>23),C=x+(R^k&(b^R))+L[11]+643717713&4294967295,x=b+(C<<14&4294967295|C>>>18),C=k+(b^R&(x^b))+L[0]+3921069994&4294967295,k=x+(C<<20&4294967295|C>>>12),C=R+(x^b&(k^x))+L[5]+3593408605&4294967295,R=k+(C<<5&4294967295|C>>>27),C=b+(k^x&(R^k))+L[10]+38016083&4294967295,b=R+(C<<9&4294967295|C>>>23),C=x+(R^k&(b^R))+L[15]+3634488961&4294967295,x=b+(C<<14&4294967295|C>>>18),C=k+(b^R&(x^b))+L[4]+3889429448&4294967295,k=x+(C<<20&4294967295|C>>>12),C=R+(x^b&(k^x))+L[9]+568446438&4294967295,R=k+(C<<5&4294967295|C>>>27),C=b+(k^x&(R^k))+L[14]+3275163606&4294967295,b=R+(C<<9&4294967295|C>>>23),C=x+(R^k&(b^R))+L[3]+4107603335&4294967295,x=b+(C<<14&4294967295|C>>>18),C=k+(b^R&(x^b))+L[8]+1163531501&4294967295,k=x+(C<<20&4294967295|C>>>12),C=R+(x^b&(k^x))+L[13]+2850285829&4294967295,R=k+(C<<5&4294967295|C>>>27),C=b+(k^x&(R^k))+L[2]+4243563512&4294967295,b=R+(C<<9&4294967295|C>>>23),C=x+(R^k&(b^R))+L[7]+1735328473&4294967295,x=b+(C<<14&4294967295|C>>>18),C=k+(b^R&(x^b))+L[12]+2368359562&4294967295,k=x+(C<<20&4294967295|C>>>12),C=R+(k^x^b)+L[5]+4294588738&4294967295,R=k+(C<<4&4294967295|C>>>28),C=b+(R^k^x)+L[8]+2272392833&4294967295,b=R+(C<<11&4294967295|C>>>21),C=x+(b^R^k)+L[11]+1839030562&4294967295,x=b+(C<<16&4294967295|C>>>16),C=k+(x^b^R)+L[14]+4259657740&4294967295,k=x+(C<<23&4294967295|C>>>9),C=R+(k^x^b)+L[1]+2763975236&4294967295,R=k+(C<<4&4294967295|C>>>28),C=b+(R^k^x)+L[4]+1272893353&4294967295,b=R+(C<<11&4294967295|C>>>21),C=x+(b^R^k)+L[7]+4139469664&4294967295,x=b+(C<<16&4294967295|C>>>16),C=k+(x^b^R)+L[10]+3200236656&4294967295,k=x+(C<<23&4294967295|C>>>9),C=R+(k^x^b)+L[13]+681279174&4294967295,R=k+(C<<4&4294967295|C>>>28),C=b+(R^k^x)+L[0]+3936430074&4294967295,b=R+(C<<11&4294967295|C>>>21),C=x+(b^R^k)+L[3]+3572445317&4294967295,x=b+(C<<16&4294967295|C>>>16),C=k+(x^b^R)+L[6]+76029189&4294967295,k=x+(C<<23&4294967295|C>>>9),C=R+(k^x^b)+L[9]+3654602809&4294967295,R=k+(C<<4&4294967295|C>>>28),C=b+(R^k^x)+L[12]+3873151461&4294967295,b=R+(C<<11&4294967295|C>>>21),C=x+(b^R^k)+L[15]+530742520&4294967295,x=b+(C<<16&4294967295|C>>>16),C=k+(x^b^R)+L[2]+3299628645&4294967295,k=x+(C<<23&4294967295|C>>>9),C=R+(x^(k|~b))+L[0]+4096336452&4294967295,R=k+(C<<6&4294967295|C>>>26),C=b+(k^(R|~x))+L[7]+1126891415&4294967295,b=R+(C<<10&4294967295|C>>>22),C=x+(R^(b|~k))+L[14]+2878612391&4294967295,x=b+(C<<15&4294967295|C>>>17),C=k+(b^(x|~R))+L[5]+4237533241&4294967295,k=x+(C<<21&4294967295|C>>>11),C=R+(x^(k|~b))+L[12]+1700485571&4294967295,R=k+(C<<6&4294967295|C>>>26),C=b+(k^(R|~x))+L[3]+2399980690&4294967295,b=R+(C<<10&4294967295|C>>>22),C=x+(R^(b|~k))+L[10]+4293915773&4294967295,x=b+(C<<15&4294967295|C>>>17),C=k+(b^(x|~R))+L[1]+2240044497&4294967295,k=x+(C<<21&4294967295|C>>>11),C=R+(x^(k|~b))+L[8]+1873313359&4294967295,R=k+(C<<6&4294967295|C>>>26),C=b+(k^(R|~x))+L[15]+4264355552&4294967295,b=R+(C<<10&4294967295|C>>>22),C=x+(R^(b|~k))+L[6]+2734768916&4294967295,x=b+(C<<15&4294967295|C>>>17),C=k+(b^(x|~R))+L[13]+1309151649&4294967295,k=x+(C<<21&4294967295|C>>>11),C=R+(x^(k|~b))+L[4]+4149444226&4294967295,R=k+(C<<6&4294967295|C>>>26),C=b+(k^(R|~x))+L[11]+3174756917&4294967295,b=R+(C<<10&4294967295|C>>>22),C=x+(R^(b|~k))+L[2]+718787259&4294967295,x=b+(C<<15&4294967295|C>>>17),C=k+(b^(x|~R))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+x&4294967295,M.g[3]=M.g[3]+b&4294967295}i.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var k=R-this.blockSize,L=this.B,x=this.h,b=0;b<R;){if(x==0)for(;b<=k;)o(this,M,b),b+=this.blockSize;if(typeof M=="string"){for(;b<R;)if(L[x++]=M.charCodeAt(b++),x==this.blockSize){o(this,L),x=0;break}}else for(;b<R;)if(L[x++]=M[b++],x==this.blockSize){o(this,L),x=0;break}}this.h=x,this.o+=R},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var k=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=k&255,k/=256;for(this.u(M),M=Array(16),R=k=0;4>R;++R)for(var L=0;32>L;L+=8)M[k++]=this.g[R]>>>L&255;return M};function a(M,R){var k=h;return Object.prototype.hasOwnProperty.call(k,M)?k[M]:k[M]=R(M)}function u(M,R){this.h=R;for(var k=[],L=!0,x=M.length-1;0<=x;x--){var b=M[x]|0;L&&b==R||(k[x]=b,L=!1)}this.g=k}var h={};function f(M){return-128<=M&&128>M?a(M,function(R){return new u([R|0],0>R?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return D(m(-M));for(var R=[],k=1,L=0;M>=k;L++)R[L]=M/k|0,k*=4294967296;return new u(R,0)}function _(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return D(_(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=m(Math.pow(R,8)),L=E,x=0;x<M.length;x+=8){var b=Math.min(8,M.length-x),C=parseInt(M.substring(x,x+b),R);8>b?(b=m(Math.pow(R,b)),L=L.j(b).add(m(C))):(L=L.j(k),L=L.add(m(C)))}return L}var E=f(0),I=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(U(this))return-D(this).m();for(var M=0,R=1,k=0;k<this.g.length;k++){var L=this.i(k);M+=(0<=L?L:4294967296+L)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(U(this))return"-"+D(this).toString(M);for(var R=m(Math.pow(M,6)),k=this,L="";;){var x=H(k,R).g;k=Q(k,x.j(R));var b=((0<k.g.length?k.g[0]:k.h)>>>0).toString(M);if(k=x,O(k))return b+L;for(;6>b.length;)b="0"+b;L=b+L}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=Q(this,M),U(M)?-1:O(M)?0:1};function D(M){for(var R=M.g.length,k=[],L=0;L<R;L++)k[L]=~M.g[L];return new u(k,~M.h).add(I)}n.abs=function(){return U(this)?D(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],L=0,x=0;x<=R;x++){var b=L+(this.i(x)&65535)+(M.i(x)&65535),C=(b>>>16)+(this.i(x)>>>16)+(M.i(x)>>>16);L=C>>>16,b&=65535,C&=65535,k[x]=C<<16|b}return new u(k,k[k.length-1]&-2147483648?-1:0)};function Q(M,R){return M.add(D(R))}n.j=function(M){if(O(this)||O(M))return E;if(U(this))return U(M)?D(this).j(D(M)):D(D(this).j(M));if(U(M))return D(this.j(D(M)));if(0>this.l(A)&&0>M.l(A))return m(this.m()*M.m());for(var R=this.g.length+M.g.length,k=[],L=0;L<2*R;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(var x=0;x<M.g.length;x++){var b=this.i(L)>>>16,C=this.i(L)&65535,se=M.i(x)>>>16,ae=M.i(x)&65535;k[2*L+2*x]+=C*ae,te(k,2*L+2*x),k[2*L+2*x+1]+=b*ae,te(k,2*L+2*x+1),k[2*L+2*x+1]+=C*se,te(k,2*L+2*x+1),k[2*L+2*x+2]+=b*se,te(k,2*L+2*x+2)}for(L=0;L<R;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=R;L<2*R;L++)k[L]=0;return new u(k,0)};function te(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function W(M,R){this.g=M,this.h=R}function H(M,R){if(O(R))throw Error("division by zero");if(O(M))return new W(E,E);if(U(M))return R=H(D(M),R),new W(D(R.g),D(R.h));if(U(R))return R=H(M,D(R)),new W(D(R.g),R.h);if(30<M.g.length){if(U(M)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var k=I,L=R;0>=L.l(M);)k=pe(k),L=pe(L);var x=_e(k,1),b=_e(L,1);for(L=_e(L,2),k=_e(k,2);!O(L);){var C=b.add(L);0>=C.l(M)&&(x=x.add(k),b=C),L=_e(L,1),k=_e(k,1)}return R=Q(M,x.j(R)),new W(x,R)}for(x=E;0<=M.l(R);){for(k=Math.max(1,Math.floor(M.m()/R.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),b=m(k),C=b.j(R);U(C)||0<C.l(M);)k-=L,b=m(k),C=b.j(R);O(b)&&(b=I),x=x.add(b),M=Q(M,C)}return new W(x,M)}n.A=function(M){return H(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)&M.i(L);return new u(k,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)|M.i(L);return new u(k,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),k=[],L=0;L<R;L++)k[L]=this.i(L)^M.i(L);return new u(k,this.h^M.h)};function pe(M){for(var R=M.g.length+1,k=[],L=0;L<R;L++)k[L]=M.i(L)<<1|M.i(L-1)>>>31;return new u(k,M.h)}function _e(M,R){var k=R>>5;R%=32;for(var L=M.g.length-k,x=[],b=0;b<L;b++)x[b]=0<R?M.i(b+k)>>>R|M.i(b+k+1)<<32-R:M.i(b+k);return new u(x,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,dT=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Vi=u}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,vl,pT,Lc,hp,mT,gT,yT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var w=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var F=c[S];if(!(F in w))break e;w=w[F]}c=c[c.length-1],S=w[c],g=g(S),g!=S&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,S=!1,F={next:function(){if(!S&&w<c.length){var K=w++;return{value:g(K,c[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,w){return c.call.apply(c.bind,arguments)}function E(c,g,w){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),c.apply(g,F)}}return function(){return c.apply(g,arguments)}}function I(c,g,w){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,I.apply(null,arguments)}function A(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function O(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(S,F,K){for(var le=Array(arguments.length-2),He=2;He<arguments.length;He++)le[He-2]=arguments[He];return g.prototype[F].apply(S,le)}}function U(c){const g=c.length;if(0<g){const w=Array(g);for(let S=0;S<g;S++)w[S]=c[S];return w}return[]}function D(c,g){for(let w=1;w<arguments.length;w++){const S=arguments[w];if(f(S)){const F=c.length||0,K=S.length||0;c.length=F+K;for(let le=0;le<K;le++)c[F+le]=S[le]}else c.push(S)}}class Q{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var pe=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function _e(c,g,w){for(const S in c)g.call(w,c[S],S,c)}function M(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function R(c){const g={};for(const w in c)g[w]=c[w];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,g){let w,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(w in S)c[w]=S[w];for(let K=0;K<k.length;K++)w=k[K],Object.prototype.hasOwnProperty.call(S,w)&&(c[w]=S[w])}}function x(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function b(c){h.setTimeout(()=>{throw c},0)}function C(){var c=ue;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,w){const S=ae.get();S.set(g,w),this.h?this.h.next=S:this.g=S,this.h=S}}var ae=new Q(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,ue=new se,ie=()=>{const c=h.Promise.resolve(void 0);q=()=>{c.then(V)}};var V=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(w){b(w)}var g=ae;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}G=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};h.addEventListener("test",w,g),h.removeEventListener("test",w,g)}catch{}return c}();function be(c,g){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(pe){e:{try{H(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:De[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&be.aa.h.call(this)}}O(be,me);var De={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),qe=0;function Ke(c,g,w,S,F){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!S,this.ha=F,this.key=++qe,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Cr(c){this.src=c,this.g={},this.h=0}Cr.prototype.add=function(c,g,w,S,F){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var le=ti(c,g,S,F);return-1<le?(g=c[le],w||(g.fa=!1)):(g=new Ke(g,this.src,K,!!S,F),g.fa=w,c.push(g)),g};function Qs(c,g){var w=g.type;if(w in c.g){var S=c.g[w],F=Array.prototype.indexOf.call(S,g,void 0),K;(K=0<=F)&&Array.prototype.splice.call(S,F,1),K&&(Ct(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ti(c,g,w,S){for(var F=0;F<c.length;++F){var K=c[F];if(!K.da&&K.listener==g&&K.capture==!!w&&K.ha==S)return F}return-1}var es="closure_lm_"+(1e6*Math.random()|0),Ys={};function ya(c,g,w,S,F){if(Array.isArray(g)){for(var K=0;K<g.length;K++)ya(c,g[K],w,S,F);return null}return w=wa(w),c&&c[Fe]?c.K(g,w,m(S)?!!S.capture:!1,F):va(c,g,w,!1,S,F)}function va(c,g,w,S,F,K){if(!g)throw Error("Invalid event type");var le=m(F)?!!F.capture:!!F,He=Js(c);if(He||(c[es]=He=new Cr(c)),w=He.add(g,w,S,le,K),w.proxy)return w;if(S=nu(),w.proxy=S,S.src=c,S.listener=w,c.addEventListener)Pe||(F=le),F===void 0&&(F=!1),c.addEventListener(g.toString(),S,F);else if(c.attachEvent)c.attachEvent(Pr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function nu(){function c(w){return g.call(c.src,c.listener,w)}const g=_a;return c}function Xs(c,g,w,S,F){if(Array.isArray(g))for(var K=0;K<g.length;K++)Xs(c,g[K],w,S,F);else S=m(S)?!!S.capture:!!S,w=wa(w),c&&c[Fe]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],w=ti(K,w,S,F),-1<w&&(Ct(K[w]),Array.prototype.splice.call(K,w,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=Js(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ti(g,w,S,F)),(w=-1<c?g[c]:null)&&Rr(w))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Fe])Qs(g.i,c);else{var w=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(w,S,c.capture):g.detachEvent?g.detachEvent(Pr(w),S):g.addListener&&g.removeListener&&g.removeListener(S),(w=Js(g))?(Qs(w,c),w.h==0&&(w.src=null,g[es]=null)):Ct(c)}}}function Pr(c){return c in Ys?Ys[c]:Ys[c]="on"+c}function _a(c,g){if(c.da)c=!0;else{g=new be(g,this);var w=c.listener,S=c.ha||c.src;c.fa&&Rr(c),c=w.call(S,g)}return c}function Js(c){return c=c[es],c instanceof Cr?c:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function wa(c){return typeof c=="function"?c:(c[Zs]||(c[Zs]=function(g){return c.handleEvent(g)}),c[Zs])}function _t(){Y.call(this),this.i=new Cr(this),this.M=this,this.F=null}O(_t,Y),_t.prototype[Fe]=!0,_t.prototype.removeEventListener=function(c,g,w,S){Xs(this,c,g,w,S)};function wt(c,g){var w,S=c.F;if(S)for(w=[];S;S=S.F)w.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new me(g,c);else if(g instanceof me)g.target=g.target||c;else{var F=g;g=new me(S,c),L(g,F)}if(F=!0,w)for(var K=w.length-1;0<=K;K--){var le=g.g=w[K];F=kr(le,S,!0,g)&&F}if(le=g.g=c,F=kr(le,S,!0,g)&&F,F=kr(le,S,!1,g)&&F,w)for(K=0;K<w.length;K++)le=g.g=w[K],F=kr(le,S,!1,g)&&F}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],S=0;S<w.length;S++)Ct(w[S]);delete c.g[g],c.h--}}this.F=null},_t.prototype.K=function(c,g,w,S){return this.i.add(String(c),g,!1,w,S)},_t.prototype.L=function(c,g,w,S){return this.i.add(String(c),g,!0,w,S)};function kr(c,g,w,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,K=0;K<g.length;++K){var le=g[K];if(le&&!le.da&&le.capture==w){var He=le.listener,Et=le.ha||le.src;le.fa&&Qs(c.i,le),F=He.call(Et,S)!==!1&&F}}return F&&!S.defaultPrevented}function Ea(c,g,w){if(typeof c=="function")w&&(c=I(c,w));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function ni(c){c.g=Ea(()=>{c.g=null,c.i&&(c.i=!1,ni(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class ts extends Y{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ni(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(c){Y.call(this),this.h=c,this.g={}}O(ns,Y);var Ta=[];function Ia(c){_e(c.g,function(g,w){this.g.hasOwnProperty(w)&&Rr(g)},c),c.g={}}ns.prototype.N=function(){ns.aa.N.call(this),Ia(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sa=h.JSON.stringify,Aa=h.JSON.parse,Ca=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function rs(){}rs.prototype.h=null;function eo(c){return c.h||(c.h=c.i())}function to(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lr(){me.call(this,"d")}O(lr,me);function no(){me.call(this,"c")}O(no,me);var ur={},Ra=null;function is(){return Ra=Ra||new _t}ur.La="serverreachability";function Pa(c){me.call(this,ur.La,c)}O(Pa,me);function xr(c){const g=is();wt(g,new Pa(g))}ur.STAT_EVENT="statevent";function ka(c,g){me.call(this,ur.STAT_EVENT,c),this.stat=g}O(ka,me);function ct(c){const g=is();wt(g,new ka(g,c))}ur.Ma="timingevent";function ro(c,g){me.call(this,ur.Ma,c),this.size=g}O(ro,me);function Fn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function os(c,g,w,S,F,K){c.info(function(){if(c.g)if(K)for(var le="",He=K.split("&"),Et=0;Et<He.length;Et++){var je=He[Et].split("=");if(1<je.length){var Rt=je[0];je=je[1];var mt=Rt.split("_");le=2<=mt.length&&mt[1]=="type"?le+(Rt+"="+je+"&"):le+(Rt+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+g+`
`+w+`
`+le})}function io(c,g,w,S,F,K,le){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+g+`
`+w+`
`+K+" "+le})}function Bn(c,g,w,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fh(c,w)+(S?" "+S:"")})}function xa(c,g){c.info(function(){return"TIMEOUT: "+g})}ss.prototype.info=function(){};function Fh(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var S=w[c];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var K=F[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<F.length;le++)F[le]=""}}}}return Sa(w)}catch{return g}}var so={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ru={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function as(){}O(as,rs),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},zn=new as;function qn(c,g,w,S){this.j=c,this.i=g,this.l=w,this.R=S||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iu}function iu(){this.i=null,this.g="",this.h=!1}var ba={},oo={};function ao(c,g,w){c.L=1,c.v=ai(gn(g)),c.m=w,c.P=!0,Na(c,null)}function Na(c,g){c.F=Date.now(),Ge(c),c.A=gn(c.v);var w=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ui(w.i,"t",S),c.C=0,w=c.j.J,c.h=new iu,c.g=Tu(c.j,w?g:null,!c.m),0<c.O&&(c.M=new ts(I(c.Y,c,c.g),c.O)),g=c.U,w=c.g,S=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ta[0]=F.toString()),F=Ta);for(var K=0;K<F.length;K++){var le=ya(w,F[K],S||g.handleEvent,!1,g.h||g);if(!le)break;g.g[le.key]=le}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),xr(),os(c.i,c.u,c.A,c.l,c.R,c.m)}qn.prototype.ca=function(c){c=c.target;const g=this.M;g&&tn(c)==3?g.j():this.Y(c)},qn.prototype.Y=function(c){try{if(c==this.g)e:{const mt=tn(this.g);var g=this.g.Ba();const Pn=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||ja(this.g)))){this.J||mt!=4||g==7||(g==8||0>=Pn?xr(3):xr(2)),ls(this);var w=this.g.Z();this.X=w;t:if(su(this)){var S=ja(this.g);c="";var F=S.length,K=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),ri(this);var le="";break t}this.h.i=new h.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(K&&g==F-1)});S.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=w==200,io(this.i,this.u,this.A,this.l,this.R,mt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Et=this.g;if((He=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(He)){var je=He;break t}}je=null}if(w=je)Bn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,w);else{this.o=!1,this.s=3,ct(12),Cn(this),ri(this);break e}}if(this.P){w=!0;let vn;for(;!this.J&&this.C<le.length;)if(vn=Bh(this,le),vn==oo){mt==4&&(this.s=4,ct(14),w=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==ba){this.s=4,ct(15),Bn(this.i,this.l,le,"[Invalid Chunk]"),w=!1;break}else Bn(this.i,this.l,vn,null),Oa(this,vn);if(su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||le.length!=0||this.h.h||(this.s=1,ct(16),w=!1),this.o=this.o&&w,!w)Bn(this.i,this.l,le,"[Invalid Chunked Response]"),Cn(this),ri(this);else if(0<le.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Fa(Rt),Rt.M=!0,ct(11))}}else Bn(this.i,this.l,le,null),Oa(this,le);mt==4&&Cn(this),this.o&&!this.J&&(mt==4?_o(this.j,this):(this.o=!1,Ge(this)))}else po(this.g),w==400&&0<le.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Cn(this),ri(this)}}}catch{}finally{}};function su(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Bh(c,g){var w=c.C,S=g.indexOf(`
`,w);return S==-1?oo:(w=Number(g.substring(w,S)),isNaN(w)?ba:(S+=1,S+w>g.length?oo:(g=g.slice(S,S+w),c.C=S+w,g)))}qn.prototype.cancel=function(){this.J=!0,Cn(this)};function Ge(c){c.S=Date.now()+c.I,ou(c,c.I)}function ou(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fn(I(c.ba,c),g)}function ls(c){c.B&&(h.clearTimeout(c.B),c.B=null)}qn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xa(this.i,this.A),this.L!=2&&(xr(),ct(17)),Cn(this),this.s=2,ri(this)):ou(this,this.S-c)};function ri(c){c.j.G==0||c.J||_o(c.j,c)}function Cn(c){ls(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ia(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Oa(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||Gt(w.h,c))){if(!c.K&&Gt(w.h,c)&&w.G==3){try{var S=w.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)vo(w),Gn(w);else break e;yo(w),ct(18)}}else w.za=F[1],0<w.za-w.T&&37500>F[2]&&w.F&&w.v==0&&!w.C&&(w.C=Fn(I(w.Za,w),6e3));if(1>=lu(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Lr(w,11)}else if((c.K||w.g==c)&&vo(w),!te(g))for(F=w.Da.g.parse(g),g=0;g<F.length;g++){let je=F[g];if(w.T=je[0],je=je[1],w.G==2)if(je[0]=="c"){w.K=je[1],w.ia=je[2];const Rt=je[3];Rt!=null&&(w.la=Rt,w.j.info("VER="+w.la));const mt=je[4];mt!=null&&(w.Aa=mt,w.j.info("SVER="+w.Aa));const Pn=je[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(S=1.5*Pn,w.L=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const vn=c.g;if(vn){const ms=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ms){var K=S.h;K.g||ms.indexOf("spdy")==-1&&ms.indexOf("quic")==-1&&ms.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Da(K,K.h),K.h=null))}if(S.D){const Eo=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(S.ya=Eo,We(S.I,S.D,Eo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),S=w;var le=c;if(S.qa=Eu(S,S.J?S.ia:null,S.W),le.K){uu(S.h,le);var He=le,Et=S.L;Et&&(He.I=Et),He.B&&(ls(He),Ge(He)),S.g=le}else ps(S);0<w.i.length&&fr(w)}else je[0]!="stop"&&je[0]!="close"||Lr(w,7);else w.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Lr(w,7):Dt(w):je[0]!="noop"&&w.l&&w.l.ta(je),w.v=0)}}xr(4)}catch{}}var au=class{constructor(c,g){this.g=c,this.map=g}};function us(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lu(c){return c.h?1:c.g?c.g.size:0}function Gt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Da(c,g){c.g?c.g.add(g):c.h=g}function uu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}us.prototype.cancel=function(){if(this.i=cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function cu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return U(c.i)}function lo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,S=0;S<w;S++)g.push(c[S]);return g}g=[],w=0;for(S in c)g[w++]=c[S];return g}function uo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const S in c)g[w++]=S;return g}}}function ii(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=uo(c),S=lo(c),F=S.length,K=0;K<F;K++)g.call(void 0,S[K],w&&w[K],c)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zh(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var S=c[w].indexOf("="),F=null;if(0<=S){var K=c[w].substring(0,S);F=c[w].substring(S+1)}else K=c[w];g(K,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function br(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof br){this.h=c.h,hs(this,c.j),this.o=c.o,this.g=c.g,si(this,c.s),this.l=c.l;var g=c.i,w=new cr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),oi(this,w),this.m=c.m}else c&&(g=String(c).match(cs))?(this.h=!1,hs(this,g[1]||"",!0),this.o=Ve(g[2]||""),this.g=Ve(g[3]||"",!0),si(this,g[4]),this.l=Ve(g[5]||"",!0),oi(this,g[6]||"",!0),this.m=Ve(g[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}br.prototype.toString=function(){var c=[],g=this.j;g&&c.push(li(g,co,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(li(g,co,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(li(w,w.charAt(0)=="/"?fu:du,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",li(w,La)),c.join("")};function gn(c){return new br(c)}function hs(c,g,w){c.j=w?Ve(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function si(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function oi(c,g,w){g instanceof cr?(c.i=g,hr(c.i,c.h)):(w||(g=li(g,pu)),c.i=new cr(g,c.h))}function We(c,g,w){c.i.set(g,w)}function ai(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function li(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,hu),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var co=/[#\/\?@]/g,du=/[#\?:]/g,fu=/[#\?]/g,pu=/[#\?@]/g,La=/#/g;function cr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ot(c){c.g||(c.g=new Map,c.h=0,c.i&&zh(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=cr.prototype,n.add=function(c,g){Ot(this),this.i=null,c=Rn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function $n(c,g){Ot(c),g=Rn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Hn(c,g){return Ot(c),g=Rn(c,g),c.g.has(g)}n.forEach=function(c,g){Ot(this),this.g.forEach(function(w,S){w.forEach(function(F){c.call(g,F,S,this)},this)},this)},n.na=function(){Ot(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let S=0;S<g.length;S++){const F=c[S];for(let K=0;K<F.length;K++)w.push(g[S])}return w},n.V=function(c){Ot(this);let g=[];if(typeof c=="string")Hn(this,c)&&(g=g.concat(this.g.get(Rn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Ot(this),this.i=null,c=Rn(this,c),Hn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ui(c,g,w){$n(c,g),0<w.length&&(c.i=null,c.g.set(Rn(c,g),U(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var S=g[w];const K=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var F=K;le[S]!==""&&(F+="="+encodeURIComponent(String(le[S]))),c.push(F)}}return this.i=c.join("&")};function Rn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function hr(c,g){g&&!c.j&&(Ot(c),c.i=null,c.g.forEach(function(w,S){var F=S.toLowerCase();S!=F&&($n(this,S),ui(this,F,w))},c)),c.j=g}function qh(c,g){const w=new ss;if(h.Image){const S=new Image;S.onload=A(en,w,"TestLoadImage: loaded",!0,g,S),S.onerror=A(en,w,"TestLoadImage: error",!1,g,S),S.onabort=A(en,w,"TestLoadImage: abort",!1,g,S),S.ontimeout=A(en,w,"TestLoadImage: timeout",!1,g,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function mu(c,g){const w=new ss,S=new AbortController,F=setTimeout(()=>{S.abort(),en(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(K=>{clearTimeout(F),K.ok?en(w,"TestPingServer: ok",!0,g):en(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),en(w,"TestPingServer: error",!1,g)})}function en(c,g,w,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(w)}catch{}}function $h(){this.g=new Ca}function gu(c,g,w){const S=w||"";try{ii(c,function(F,K){let le=F;m(F)&&(le=Sa(F)),g.push(S+K+"="+encodeURIComponent(le))})}catch(F){throw g.push(S+"type="+encodeURIComponent("_badmap")),F}}function Nr(c){this.l=c.Ub||null,this.j=c.eb||!1}O(Nr,rs),Nr.prototype.g=function(){return new ds(this.l,this.j)},Nr.prototype.i=function(c){return function(){return c}}({});function ds(c,g){_t.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ds,_t),n=ds.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Kn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Wn(this):Kn(this),this.readyState==3&&yu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Wn(this))},n.Qa=function(c){this.g&&(this.response=c,Wn(this))},n.ga=function(){this.g&&Wn(this)};function Wn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Kn(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function Kn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Or(c){let g="";return _e(c,function(w,S){g+=S,g+=":",g+=w,g+=`\r
`}),g}function ci(c,g,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=Or(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):We(c,g,w))}function Ze(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ze,_t);var Hh=/^https?$/i,Ma=["POST","PUT"];n=Ze.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?eo(this.o):eo(zn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){fs(this,K);return}if(c=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)w.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())w.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),F=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ma,g,void 0))||S||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of w)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fo(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){fs(this,K)}};function fs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ho(c),yn(c)}function ho(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Va(this):this.bb())},n.bb=function(){Va(this)};function Va(c){if(c.h&&typeof u<"u"&&(!c.v[1]||tn(c)!=4||c.Z()!=2)){if(c.u&&tn(c)==4)Ea(c.Ea,0,c);else if(wt(c,"readystatechange"),tn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var S;if(S=le===0){var F=String(c.D).match(cs)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),S=!Hh.test(F?F.toLowerCase():"")}w=S}if(w)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var K=2<tn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",ho(c)}}finally{yn(c)}}}}function yn(c,g){if(c.g){fo(c);const w=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||wt(c,"ready");try{w.onreadystatechange=S}catch{}}}function fo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Aa(g)}};function ja(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function po(c){const g={};c=(c.g&&2<=tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(te(c[S]))continue;var w=x(c[S]);const F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=g[F]||[];g[F]=K,K.push(w)}M(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Ua(c){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dr("baseRetryDelayMs",5e3,c),this.cb=dr("retryDelaySeedMs",1e4,c),this.Wa=dr("forwardChannelMaxRetries",2,c),this.wa=dr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new us(c&&c.concurrentRequestLimit),this.Da=new $h,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ua.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,S){ct(0),this.W=c,this.H=g||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.I=Eu(this,null,this.W),fr(this)};function Dt(c){if(mo(c),c.G==3){var g=c.U++,w=gn(c.I);if(We(w,"SID",c.K),We(w,"RID",g),We(w,"TYPE","terminate"),Dr(c,w),g=new qn(c,c.j,g),g.L=2,g.v=ai(gn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=g.v,w=!0),w||(g.g=Tu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ge(g)}wu(c)}function Gn(c){c.g&&(Fa(c),c.g.cancel(),c.g=null)}function mo(c){Gn(c),c.u&&(h.clearTimeout(c.u),c.u=null),vo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function fr(c){if(!mn(c.h)&&!c.s){c.s=!0;var g=c.Ga;q||ie(),G||(q(),G=!0),ue.add(g,c),c.B=0}}function Wh(c,g){return lu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fn(I(c.Ga,c,g),_u(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new qn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=R(K),L(K,this.S)):K=this.S),this.m!==null||this.O||(F.H=K,K=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=hi(this,F,g),w=gn(this.I),We(w,"RID",c),We(w,"CVER",22),this.D&&We(w,"X-HTTP-Session-Id",this.D),Dr(this,w),K&&(this.O?g="headers="+encodeURIComponent(String(Or(K)))+"&"+g:this.m&&ci(w,this.m,K)),Da(this.h,F),this.Ua&&We(w,"TYPE","init"),this.P?(We(w,"$req",g),We(w,"SID","null"),F.T=!0,ao(F,w,null)):ao(F,w,g),this.G=2}}else this.G==3&&(c?go(this,c):this.i.length==0||mn(this.h)||go(this))};function go(c,g){var w;g?w=g.l:w=c.U++;const S=gn(c.I);We(S,"SID",c.K),We(S,"RID",w),We(S,"AID",c.T),Dr(c,S),c.m&&c.o&&ci(S,c.m,c.o),w=new qn(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=hi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Da(c.h,w),ao(w,S,g)}function Dr(c,g){c.H&&_e(c.H,function(w,S){We(g,S,w)}),c.l&&ii({},function(w,S){We(g,S,w)})}function hi(c,g,w){w=Math.min(c.i.length,w);var S=c.l?I(c.l.Na,c.l,c):null;e:{var F=c.i;let K=-1;for(;;){const le=["count="+w];K==-1?0<w?(K=F[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let He=!0;for(let Et=0;Et<w;Et++){let je=F[Et].g;const Rt=F[Et].map;if(je-=K,0>je)K=Math.max(0,F[Et].g-100),He=!1;else try{gu(Rt,le,"req"+je+"_")}catch{S&&S(Rt)}}if(He){S=le.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,S}function ps(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;q||ie(),G||(q(),G=!0),ue.add(g,c),c.v=0}}function yo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fn(I(c.Fa,c),_u(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fn(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Gn(this),vu(this))};function Fa(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function vu(c){c.g=new qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gn(c.qa);We(g,"RID","rpc"),We(g,"SID",c.K),We(g,"AID",c.T),We(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(g,"TO",c.ja),We(g,"TYPE","xmlhttp"),Dr(c,g),c.m&&c.o&&ci(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=ai(gn(g)),w.m=null,w.P=!0,Na(w,c)}n.Za=function(){this.C!=null&&(this.C=null,Gn(this),yo(this),ct(19))};function vo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function _o(c,g){var w=null;if(c.g==g){vo(c),Fa(c),c.g=null;var S=2}else if(Gt(c.h,g))w=g.D,uu(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var F=c.B;S=is(),wt(S,new ro(S,w)),fr(c)}else ps(c);else if(F=g.s,F==3||F==0&&0<g.X||!(S==1&&Wh(c,g)||S==2&&yo(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),F){case 1:Lr(c,5);break;case 4:Lr(c,10);break;case 3:Lr(c,6);break;default:Lr(c,2)}}}function _u(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function Lr(c,g){if(c.j.info("Error code "+g),g==2){var w=I(c.fb,c),S=c.Xa;const F=!S;S=new br(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||hs(S,"https"),ai(S),F?qh(S.toString(),w):mu(S.toString(),w)}else ct(2);c.G=0,c.l&&c.l.sa(g),wu(c),mo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function wu(c){if(c.G=0,c.ka=[],c.l){const g=cu(c.h);(g.length!=0||c.i.length!=0)&&(D(c.ka,g),D(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function Eu(c,g,w){var S=w instanceof br?gn(w):new br(w);if(S.g!="")g&&(S.g=g+"."+S.g),si(S,S.s);else{var F=h.location;S=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var K=new br(null);S&&hs(K,S),g&&(K.g=g),F&&si(K,F),w&&(K.l=w),S=K}return w=c.D,g=c.ya,w&&g&&We(S,w,g),We(S,"VER",c.la),Dr(c,S),S}function Tu(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ze(new Nr({eb:w})):new Ze(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ba(){}n=Ba.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wo(){}wo.prototype.g=function(c,g){return new Qt(c,g)};function Qt(c,g){_t.call(this),this.g=new Ua(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!te(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new pr(this)}O(Qt,_t),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Dt(this.g)},Qt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=Sa(c),c=w);g.i.push(new au(g.Ya++,c)),g.G==3&&fr(g)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Qt.aa.N.call(this)};function Iu(c){lr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}O(Iu,lr);function Su(){no.call(this),this.status=1}O(Su,no);function pr(c){this.g=c}O(pr,Ba),pr.prototype.ua=function(){wt(this.g,"a")},pr.prototype.ta=function(c){wt(this.g,new Iu(c))},pr.prototype.sa=function(c){wt(this.g,new Su)},pr.prototype.ra=function(){wt(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,yT=function(){return new wo},gT=function(){return is()},mT=ur,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,Lc=so,ru.COMPLETE="complete",pT=ru,to.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",_t.prototype.listen=_t.prototype.K,vl=to,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,fT=Ze}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const y_="@firebase/firestore",v_="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new dh("@firebase/firestore");function $o(){return Us.logLevel}function he(n,...e){if(Us.logLevel<=Le.DEBUG){const t=e.map(em);Us.debug(`Firestore (${da}): ${n}`,...t)}}function Jr(n,...e){if(Us.logLevel<=Le.ERROR){const t=e.map(em);Us.error(`Firestore (${da}): ${n}`,...t)}}function ta(n,...e){if(Us.logLevel<=Le.WARN){const t=e.map(em);Us.warn(`Firestore (${da}): ${n}`,...t)}}function em(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+n;throw Jr(e),new Error(e)}function $e(n,e){n||Ae()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Un{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}}class rb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ib{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qr,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},h=f=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string"),new vT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Ht(e)}}class sb{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ob{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new sb(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ab{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,hn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new __(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string"),this.R=t.token,new __(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=lb(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ne(n,e){return n<e?-1:n>e?1:0}function dp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ne(i,o);{const a=_T(),u=ub(a.encode(w_(n,t)),a.encode(w_(e,t)));return u!==0?u:Ne(i,o)}}t+=i>65535?2:1}return Ne(n.length,e.length)}function w_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ub(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function na(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-62135596800,T_=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*T_);return new St(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<E_)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-E_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new St(0,0))}static max(){return new Re(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="__name__";class wr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(),i===void 0?i=e.length-t:i>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=wr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ne(e.length,t.length)}static compareSegments(e,t){const i=wr.isNumericId(e),o=wr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?wr.extractNumericId(e).compare(wr.extractNumericId(t)):dp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vi.fromString(e.substring(4,e.length-2))}}class Je extends wr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const cb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends wr{construct(e,t,i){return new jt(e,t,i)}static isValidIdentifier(e){return cb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===I_}static keyField(){return new jt([I_])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(i+=h,o++):(a(),o++)}if(a(),u)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Je.fromString(e))}static fromName(e){return new we(Je.fromString(e).popFirst(5))}static empty(){return new we(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function hb(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new St(t+1,0):new St(t,i));return new Bi(o,we.empty(),e)}function db(n){return new Bi(n.readTime,n.key,Ll)}class Bi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Bi(Re.min(),we.empty(),Ll)}static max(){return new Bi(Re.max(),we.empty(),Ll)}}function fb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==pb)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let o=0,a=0,u=!1;e.forEach(h=>{++o,h.next(()=>{++a,u&&a===o&&t()},f=>i(f))}),u=!0,a===o&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(o=>o?J.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new J((i,o)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(_=>{u[m]=_,++h,h===a&&i(u)},_=>o(_))}})}static doWhile(e,t){return new J((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function gb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_h.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=-1;function wh(n){return n==null}function Zc(n){return n===0&&1/n==-1/0}function yb(n){return typeof n=="number"&&Number.isInteger(n)&&!Zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function vb(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S_(e)),e=_b(n.get(t),e);return S_(e)}function _b(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case ET:t+="";break;default:t+=a}}return t}function S_(n){return n+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ji(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=a??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,i,o,a){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new C_(this.data.getIterator())}getIteratorFrom(e){return new C_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new At(this.comparator);return t.data=e,t}}class C_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new At(jt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IT("Invalid base64 string: "+a):a}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const wb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(n){if($e(!!n),typeof n=="string"){let e=0;const t=wb.exec(n);if($e(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",CT="__previous_value__",RT="__local_write_time__";function nm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||t===void 0?void 0:t.stringValue)===ST}function Eh(n){const e=n.mapValue.fields[CT];return nm(e)?Eh(e):e}function Ml(n){const e=zi(n.mapValue.fields[RT].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,i,o,a,u,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}}const eh="(default)";class Vl{constructor(e,t){this.projectId=e,this.database=t||eh}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===eh}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__type__",Tb="__max__",Ac={mapValue:{}},kT="__vector__",th="value";function $i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nm(n)?4:Sb(n)?9007199254740991:Ib(n)?10:11:Ae()}function Ar(n,e){if(n===e)return!0;const t=$i(n);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ml(n).isEqual(Ml(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=zi(o.timestampValue),h=zi(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return qi(o.bytesValue).isEqual(qi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ft(o.geoPointValue.latitude)===ft(a.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ft(o.integerValue)===ft(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ft(o.doubleValue),h=ft(a.doubleValue);return u===h?Zc(u)===Zc(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return na(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},h=a.mapValue.fields||{};if(A_(u)!==A_(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ar(u[f],h[f])))return!1;return!0}(n,e);default:return Ae()}}function jl(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function ra(n,e){if(n===e)return 0;const t=$i(n),i=$i(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(a,u){const h=ft(a.integerValue||a.doubleValue),f=ft(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return R_(n.timestampValue,e.timestampValue);case 4:return R_(Ml(n),Ml(e));case 5:return dp(n.stringValue,e.stringValue);case 6:return function(a,u){const h=qi(a),f=qi(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=Ne(h[m],f[m]);if(_!==0)return _}return Ne(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Ne(ft(a.latitude),ft(u.latitude));return h!==0?h:Ne(ft(a.longitude),ft(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return P_(n.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,m,_;const E=a.fields||{},I=u.fields||{},A=(h=E[th])===null||h===void 0?void 0:h.arrayValue,O=(f=I[th])===null||f===void 0?void 0:f.arrayValue,U=Ne(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:P_(A,O)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===Ac.mapValue&&u===Ac.mapValue)return 0;if(a===Ac.mapValue)return 1;if(u===Ac.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const I=dp(f[E],_[E]);if(I!==0)return I;const A=ra(h[f[E]],m[_[E]]);if(A!==0)return A}return Ne(f.length,_.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function R_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=zi(n),i=zi(e),o=Ne(t.seconds,i.seconds);return o!==0?o:Ne(t.nanos,i.nanos)}function P_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=ra(t[o],i[o]);if(a)return a}return Ne(t.length,i.length)}function ia(n){return fp(n)}function fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=zi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return we.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=fp(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${fp(t.fields[u])}`;return o+"}"}(n.mapValue):Ae()}function Mc(n){switch($i(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(n);return e?16+Mc(e):16;case 5:return 2*n.stringValue.length;case 6:return qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Mc(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Ji(i.fields,(a,u)=>{o+=a.length+Mc(u)}),o}(n.mapValue);default:throw Ae()}}function k_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pp(n){return!!n&&"integerValue"in n}function rm(n){return!!n&&"arrayValue"in n}function x_(n){return!!n&&"nullValue"in n}function b_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vc(n){return!!n&&"mapValue"in n}function Ib(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||t===void 0?void 0:t.stringValue)===kT}function Sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ji(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Sl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Tb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=jt.emptyPath(),i={},o=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=h.popLast()}u?i[h.lastSegment()]=Sl(u):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Vc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ji(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new dn(Sl(this.value))}}function xT(n){const e=[];return Ji(n.fields,(t,i)=>{const o=new jt([t]);if(Vc(i)){const a=xT(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,i,o,a,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Wt(e,0,Re.min(),Re.min(),Re.min(),dn.empty(),0)}static newFoundDocument(e,t,i,o){return new Wt(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Re.min(),Re.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Re.min(),Re.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t){this.position=e,this.inclusive=t}}function N_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=ra(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function O_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ab(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{}class vt extends bT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Rb(e,t,i):t==="array-contains"?new xb(e,i):t==="in"?new bb(e,i):t==="not-in"?new Nb(e,i):t==="array-contains-any"?new Ob(e,i):new vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Pb(e,i):new kb(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ra(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends bT{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new or(e,t)}matches(e){return NT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function NT(n){return n.op==="and"}function OT(n){return Cb(n)&&NT(n)}function Cb(n){for(const e of n.filters)if(e instanceof or)return!1;return!0}function mp(n){if(n instanceof vt)return n.field.canonicalString()+n.op.toString()+ia(n.value);if(OT(n))return n.filters.map(e=>mp(e)).join(",");{const e=n.filters.map(t=>mp(t)).join(",");return`${n.op}(${e})`}}function DT(n,e){return n instanceof vt?function(i,o){return o instanceof vt&&i.op===o.op&&i.field.isEqual(o.field)&&Ar(i.value,o.value)}(n,e):n instanceof or?function(i,o){return o instanceof or&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,u,h)=>a&&DT(u,o.filters[h]),!0):!1}(n,e):void Ae()}function LT(n){return n instanceof vt?function(t){return`${t.field.canonicalString()} ${t.op} ${ia(t.value)}`}(n):n instanceof or?function(t){return t.op.toString()+" {"+t.getFilters().map(LT).join(" ,")+"}"}(n):"Filter"}class Rb extends vt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pb extends vt{constructor(e,t){super(e,"in",t),this.keys=MT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kb extends vt{constructor(e,t){super(e,"not-in",t),this.keys=MT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class xb extends vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rm(t)&&jl(t.arrayValue,this.value)}}class bb extends vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class Nb extends vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!jl(this.value.arrayValue,t)}}class Ob extends vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t=null,i=[],o=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=h,this.le=null}}function D_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new Db(n,e,t,i,o,a,u)}function im(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>mp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ia(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ia(i)).join(",")),e.le=t}return e.le}function sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ab(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!O_(n.startAt,e.startAt)&&O_(n.endAt,e.endAt)}function gp(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t=null,i=[],o=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Lb(n,e,t,i,o,a,u,h){return new Yl(n,e,t,i,o,a,u,h)}function om(n){return new Yl(n)}function L_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VT(n){return n.collectionGroup!==null}function Al(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new At(jt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new rh(a,i))}),t.has(jt.keyField().canonicalString())||e.he.push(new rh(jt.keyField(),i))}return e.he}function Ir(n){const e=ke(n);return e.Pe||(e.Pe=Mb(e,Al(n))),e.Pe}function Mb(n,e){if(n.limitType==="F")return D_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new rh(o.field,a)});const t=n.endAt?new nh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new nh(n.startAt.position,n.startAt.inclusive):null;return D_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function yp(n,e){const t=n.filters.concat([e]);return new Yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vp(n,e,t){return new Yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Th(n,e){return sm(Ir(n),Ir(e))&&n.limitType===e.limitType}function jT(n){return`${im(Ir(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>LT(o)).join(", ")}]`),wh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>ia(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>ia(o)).join(",")),`Target(${i})`}(Ir(n))}; limitType=${n.limitType})`}function Ih(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of Al(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(u,h,f){const m=N_(u,h,f);return u.inclusive?m<=0:m<0}(i.startAt,Al(i),o)||i.endAt&&!function(u,h,f){const m=N_(u,h,f);return u.inclusive?m>=0:m>0}(i.endAt,Al(i),o))}(n,e)}function Vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UT(n){return(e,t)=>{let i=!1;for(const o of Al(n)){const a=jb(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function jb(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(a,u,h){const f=u.data.field(a),m=h.data.field(a);return f!==null&&m!==null?ra(f,m):Ae()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=new ot(we.comparator);function Zr(){return Ub}const FT=new ot(we.comparator);function _l(...n){let e=FT;for(const t of n)e=e.insert(t.key,t);return e}function BT(n){let e=FT;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ns(){return Cl()}function zT(){return Cl()}function Cl(){return new Ws(n=>n.toString(),(n,e)=>n.isEqual(e))}const Fb=new ot(we.comparator),Bb=new At(we.comparator);function Me(...n){let e=Bb;for(const t of n)e=e.add(t);return e}const zb=new At(Ne);function qb(){return zb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function qT(n){return{integerValue:""+n}}function $b(n,e){return yb(e)?qT(e):am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function Hb(n,e,t){return n instanceof Ul?function(o,a){const u={fields:{[AT]:{stringValue:ST},[RT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&nm(a)&&(a=Eh(a)),a&&(u.fields[CT]=a),{mapValue:u}}(t,e):n instanceof Fl?HT(n,e):n instanceof Bl?WT(n,e):function(o,a){const u=$T(o,a),h=M_(u)+M_(o.Ie);return pp(u)&&pp(o.Ie)?qT(h):am(o.serializer,h)}(n,e)}function Wb(n,e,t){return n instanceof Fl?HT(n,e):n instanceof Bl?WT(n,e):t}function $T(n,e){return n instanceof ih?function(i){return pp(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Ul extends Sh{}class Fl extends Sh{constructor(e){super(),this.elements=e}}function HT(n,e){const t=KT(e);for(const i of n.elements)t.some(o=>Ar(o,i))||t.push(i);return{arrayValue:{values:t}}}class Bl extends Sh{constructor(e){super(),this.elements=e}}function WT(n,e){let t=KT(e);for(const i of n.elements)t=t.filter(o=>!Ar(o,i));return{arrayValue:{values:t}}}class ih extends Sh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function M_(n){return ft(n.integerValue||n.doubleValue)}function KT(n){return rm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,t){this.field=e,this.transform=t}}function Gb(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Fl&&o instanceof Fl||i instanceof Bl&&o instanceof Bl?na(i.elements,o.elements,Ar):i instanceof ih&&o instanceof ih?Ar(i.Ie,o.Ie):i instanceof Ul&&o instanceof Ul}(n.transform,e.transform)}class Qb{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ah{}function GT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lm(n.key,Mn.none()):new Xl(n.key,n.data,Mn.none());{const t=n.data,i=dn.empty();let o=new At(jt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Zi(n.key,i,new Tn(o.toArray()),Mn.none())}}function Yb(n,e,t){n instanceof Xl?function(o,a,u){const h=o.value.clone(),f=j_(o.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Zi?function(o,a,u){if(!jc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const h=j_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(QT(o)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Rl(n,e,t,i){return n instanceof Xl?function(a,u,h,f){if(!jc(a.precondition,u))return h;const m=a.value.clone(),_=U_(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof Zi?function(a,u,h,f){if(!jc(a.precondition,u))return h;const m=U_(a.fieldTransforms,f,u),_=u.data;return _.setAll(QT(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(a,u,h){return jc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function Xb(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=$T(i.transform,o||null);a!=null&&(t===null&&(t=dn.empty()),t.set(i.field,a))}return t||null}function V_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&na(i,o,(a,u)=>Gb(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xl extends Ah{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends Ah{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function QT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function j_(n,e,t){const i=new Map;$e(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,h=e.data.field(a.field);i.set(a.field,Wb(u,h,t[o]))}return i}function U_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,Hb(a,u,e))}return i}class lm extends Ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jb extends Ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&Yb(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Rl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=zT();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(o.key)?null:h;const f=GT(u,h);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,i)=>V_(t,i))&&na(this.baseMutations,e.baseMutations,(t,i)=>V_(t,i))}}class um{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){$e(e.mutations.length===i.length);let o=function(){return Fb}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new um(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ue;function nN(n){switch(n){case Z.OK:return Ae();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ae()}}function YT(n){if(n===void 0)return Jr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case yt.OK:return Z.OK;case yt.CANCELLED:return Z.CANCELLED;case yt.UNKNOWN:return Z.UNKNOWN;case yt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case yt.INTERNAL:return Z.INTERNAL;case yt.UNAVAILABLE:return Z.UNAVAILABLE;case yt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case yt.NOT_FOUND:return Z.NOT_FOUND;case yt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case yt.ABORTED:return Z.ABORTED;case yt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case yt.DATA_LOSS:return Z.DATA_LOSS;default:return Ae()}}(Ue=yt||(yt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Vi([4294967295,4294967295],0);function F_(n){const e=_T().encode(n),t=new dT;return t.update(e),new Uint8Array(t.digest())}function B_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Vi([t,i],0),new Vi([o,a],0)]}class cm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new wl(`Invalid padding: ${t}`);if(i<0)throw new wl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new wl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Vi.fromNumber(this.Ee)}Ae(e,t,i){let o=e.add(t.multiply(Vi.fromNumber(i)));return o.compare(rN)===1&&(o=new Vi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=F_(e),[i,o]=B_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(i,o,a);if(!this.Re(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new cm(a,o,t);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=F_(e),[i,o]=B_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(i,o,a);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ch(Re.min(),o,new ot(Ne),Zr(),Me())}}class Jl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jl(i,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,i,o){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=o}}class XT{constructor(e,t){this.targetId=e,this.ge=t}}class JT{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class z_{constructor(){this.pe=0,this.ye=q_(),this.we=Ut.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Me(),t=Me(),i=Me();return this.ye.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ae()}}),new Jl(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=q_()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,$e(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class iN{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Zr(),this.$e=Cc(),this.Ue=Cc(),this.Ke=new ot(Ne)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,i=e.ge.count,o=this.Xe(t);if(o){const a=o.target;if(gp(a))if(i===0){const u=new we(a.path);this.ze(t,u,Wt.newNoDocument(u,Re.min()))}else $e(i===1);else{const u=this.et(t);if(u!==i){const h=this.tt(e),f=h?this.nt(h,e,u):1;if(f!==0){this.Ye(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,h;try{u=qi(i).toUint8Array()}catch(f){if(f instanceof IT)return ta("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new cm(u,o,a)}catch(f){return ta(f instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,a,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((a,u)=>{const h=this.Xe(u);if(h){if(a.current&&gp(h.target)){const f=new we(h.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,Wt.newNoDocument(f,e))}a.ve&&(t.set(u,a.Fe()),a.Me())}});let i=Me();this.Ue.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const m=this.Xe(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const o=new Ch(e,t,this.Ke,this.Qe,i);return this.Qe=Zr(),this.$e=Cc(),this.Ue=Cc(),this.Ke=new ot(Ne),o}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new z_,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new At(Ne),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new At(Ne),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new z_),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Cc(){return new ot(we.comparator)}function q_(){return new ot(we.comparator)}const sN={asc:"ASCENDING",desc:"DESCENDING"},oN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aN={and:"AND",or:"OR"};class lN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _p(n,e){return n.useProto3Json||wh(e)?e:{value:e}}function sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uN(n,e){return sh(n,e.toTimestamp())}function Sr(n){return $e(!!n),Re.fromTimestamp(function(t){const i=zi(t);return new St(i.seconds,i.nanos)}(n))}function hm(n,e){return wp(n,e).canonicalString()}function wp(n,e){const t=function(o){return new Je(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function e0(n){const e=Je.fromString(n);return $e(s0(e)),e}function Ep(n,e){return hm(n.databaseId,e.path)}function jf(n,e){const t=e0(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(n0(t))}function t0(n,e){return hm(n.databaseId,e)}function cN(n){const e=e0(n);return e.length===4?Je.emptyPath():n0(e)}function Tp(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function n0(n){return $e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function $_(n,e,t){return{name:Ep(n,e),fields:t.value.mapValue.fields}}function hN(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,_){return m.useProto3Json?($e(_===void 0||typeof _=="string"),Ut.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Ut.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const _=m.code===void 0?Z.UNKNOWN:YT(m.code);return new fe(_,m.message||"")}(u);t=new JT(i,o,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=jf(n,i.document.name),a=Sr(i.document.updateTime),u=i.document.createTime?Sr(i.document.createTime):Re.min(),h=new dn({mapValue:{fields:i.document.fields}}),f=Wt.newFoundDocument(o,a,u,h),m=i.targetIds||[],_=i.removedTargetIds||[];t=new Uc(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=jf(n,i.document),a=i.readTime?Sr(i.readTime):Re.min(),u=Wt.newNoDocument(o,a),h=i.removedTargetIds||[];t=new Uc([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=jf(n,i.document),a=i.removedTargetIds||[];t=new Uc([],a,o,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new tN(o,a),h=i.targetId;t=new XT(h,u)}}return t}function dN(n,e){let t;if(e instanceof Xl)t={update:$_(n,e.key,e.value)};else if(e instanceof lm)t={delete:Ep(n,e.key)};else if(e instanceof Zi)t={update:$_(n,e.key,e.data),updateMask:EN(e.fieldMask)};else{if(!(e instanceof Jb))return Ae();t={verify:Ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,u){const h=u.transform;if(h instanceof Ul)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Bl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ih)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Ae()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:uN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()}(n,e.precondition)),t}function fN(n,e){return n&&n.length>0?($e(e!==void 0),n.map(t=>function(o,a){let u=o.updateTime?Sr(o.updateTime):Sr(a);return u.isEqual(Re.min())&&(u=Sr(a)),new Qb(u,o.transformResults||[])}(t,e))):[]}function pN(n,e){return{documents:[t0(n,e.path)]}}function mN(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=t0(n,o);const a=function(m){if(m.length!==0)return i0(or.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(_=>function(I){return{field:Wo(I.field),direction:vN(I.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=_p(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:o}}function gN(n){let e=cN(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){$e(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(E){const I=r0(E);return I instanceof or&&OT(I)?I.getFilters():[I]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(I=>function(O){return new rh(Ko(O.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(I))}(t.orderBy));let h=null;t.limit&&(h=function(E){let I;return I=typeof E=="object"?E.value:E,wh(I)?null:I}(t.limit));let f=null;t.startAt&&(f=function(E){const I=!!E.before,A=E.values||[];return new nh(A,I)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const I=!E.before,A=E.values||[];return new nh(A,I)}(t.endAt)),Lb(e,o,u,a,h,"F",f,m)}function yN(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ko(t.unaryFilter.field);return vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ko(t.unaryFilter.field);return vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ko(t.unaryFilter.field);return vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ko(t.unaryFilter.field);return vt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return vt.create(Ko(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return or.create(t.compositeFilter.filters.map(i=>r0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function vN(n){return sN[n]}function _N(n){return oN[n]}function wN(n){return aN[n]}function Wo(n){return{fieldPath:n.canonicalString()}}function Ko(n){return jt.fromServerFormat(n.fieldPath)}function i0(n){return n instanceof vt?function(t){if(t.op==="=="){if(b_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NAN"}};if(x_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(b_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NAN"}};if(x_(t.value))return{unaryFilter:{field:Wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(t.field),op:_N(t.op),value:t.value}}}(n):n instanceof or?function(t){const i=t.getFilters().map(o=>i0(o));return i.length===1?i[0]:{compositeFilter:{op:wN(t.op),filters:i}}}(n):Ae()}function EN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,i,o,a=Re.min(),u=Re.min(),h=Ut.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.Tt=e}}function IN(n){const e=gN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.Tn=new AN}addToCollectionParentIndex(e,t){return this.Tn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Bi.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class AN{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new At(Je.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new At(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o0=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(o0,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new sa(0)}static Kn(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="LruGarbageCollector",CN=1048576;function K_([n,e],[t,i]){const o=Ne(n,t);return o===0?Ne(e,i):o}class RN{constructor(e){this.Hn=e,this.buffer=new At(K_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();K_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PN{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(W_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pa(t)?he(W_,"Ignoring IndexedDB error during garbage collection: ",t):await fa(t)}await this.er(3e5)})}}class kN{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return J.resolve(_h.ae);const i=new RN(t);return this.tr.forEachTarget(e,o=>i.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>i.Zn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(H_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H_):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,o,a,u,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(i=E,h=Date.now(),this.removeTargets(e,i,t))).next(E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(m=Date.now(),$o()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E})))}}function xN(n,e){return new kN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.changes=new Ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Rl(i.mutation,o,Tn.empty(),St.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Me()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Me()){const o=Ns();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let u=_l();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Ns();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Me()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,o){let a=Zr();const u=Cl(),h=function(){return Cl()}();return t.forEach((f,m)=>{const _=i.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof Zi)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Rl(_.mutation,m,_.mutation.getFieldMask(),St.now())):u.set(m.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,_)=>u.set(m,_)),t.forEach((m,_)=>{var E;return h.set(m,new NN(_,(E=u.get(m))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,t){const i=Cl();let o=new ot((u,h)=>u-h),a=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let _=i.get(f)||Tn.empty();_=h.applyToLocalView(m,_),i.set(f,_);const E=(o.get(h.batchId)||Me()).add(f);o=o.insert(h.batchId,E)})}).next(()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,E=zT();_.forEach(I=>{if(!a.has(I)){const A=GT(t.get(I),i.get(I));A!==null&&E.set(I,A),a=a.add(I)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return J.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):J.resolve(Ns());let h=Ll,f=a;return u.next(m=>J.forEach(m,(_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next(I=>{f=f.insert(_,I)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Me())).next(_=>({batchId:h,changes:BT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let o=_l();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=_l();return this.indexManager.getCollectionParents(e,a).next(h=>J.forEach(h,f=>{const m=function(E,I){return new Yl(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next(_=>{_.forEach((E,I)=>{u=u.insert(E,I)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(u=>{a.forEach((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,Wt.newInvalidDocument(_)))});let h=_l();return u.forEach((f,m)=>{const _=a.get(f);_!==void 0&&Rl(_.mutation,m,Tn.empty(),St.now()),Ih(t,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return J.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Sr(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:IN(o.bundledQuery),readTime:Sr(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.overlays=new ot(we.comparator),this.Rr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ns();return J.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.Et(e,t,a)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Rr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=Ns(),a=t.length+1,u=new we(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new ot((m,_)=>m-_);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let _=a.get(m.largestBatchId);_===null&&(_=Ns(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=Ns(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=o)););return J.resolve(h)}Et(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Rr.get(o.largestBatchId).delete(i.key);this.Rr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new eN(t,i));let a=this.Rr.get(t);a===void 0&&(a=Me(),this.Rr.set(t,a)),this.Rr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Vr=new At(bt.mr),this.gr=new At(bt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new bt(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new bt(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new we(new Je([])),i=new bt(t,e),o=new bt(t,e+1),a=[];return this.gr.forEachInRange([i,o],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new we(new Je([])),i=new bt(t,e),o=new bt(t,e+1);let a=Me();return this.gr.forEachInRange([i,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new bt(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return we.comparator(e.key,t.key)||Ne(e.Cr,t.Cr)}static pr(e,t){return Ne(e.Cr,t.Cr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new At(bt.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Zb(a,t,i,o);this.mutationQueue.push(u);for(const h of o)this.Mr=this.Mr.add(new bt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Nr(i),a=o<0?0:o;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?tm:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new bt(t,0),o=new bt(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,o],u=>{const h=this.Or(u.Cr);a.push(h)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new At(Ne);return t.forEach(o=>{const a=new bt(o,0),u=new bt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],h=>{i=i.add(h.Cr)})}),J.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const u=new bt(new we(a),0);let h=new At(Ne);return this.Mr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(h=h.add(f.Cr)),!0)},u),J.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const o=this.Or(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){$e(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return J.forEach(t.mutations,o=>{const a=new bt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new bt(t,0),o=this.Mr.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.kr=e,this.docs=function(){return new ot(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let i=Zr();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Wt.newInvalidDocument(o))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Zr();const u=t.path,h=new we(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||fb(db(_),i)<=0||(o.has(_.key)||Ih(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ae()}qr(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new UN(this)}getSize(e){return J.resolve(this.size)}}class UN extends bN{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.persistence=e,this.Qr=new Ws(t=>im(t),sm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.$r=0,this.Ur=new dm,this.targetCount=0,this.Kr=sa.Un()}forEachTarget(e,t){return this.Qr.forEach((i,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),J.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new sa(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.zn(t),J.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),J.waitFor(a).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Ur.yr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Ur.Sr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ur.vr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new _h(0),this.zr=!1,this.zr=!0,this.jr=new MN,this.referenceDelegate=e(this),this.Hr=new FN(this),this.indexManager=new SN,this.remoteDocumentCache=function(o){return new jN(o)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new TN(t),this.Yr=new DN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new VN(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new BN(this.Gr.next());return this.referenceDelegate.Zr(),i(o).next(a=>this.referenceDelegate.Xr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}ei(e,t){return J.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class BN extends mb{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.ti=new dm,this.ni=null}static ri(e){return new fm(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),J.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,i=>{const o=we.fromPath(i);return this.si(e,o).next(a=>{a||t.removeEntry(o,Re.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return J.or([()=>J.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class oh{constructor(e,t){this.persistence=e,this.oi=new Ws(i=>vb(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=xN(this,t)}static ri(e,t){return new oh(e,t)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return J.forEach(this.oi,(i,o)=>this.ar(e,i,o).next(a=>a?J.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.qr(e,u=>this.ar(e,u,t).next(h=>{h||(i++,a.removeEntry(u,Re.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),J.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mc(e.data.value)),t}ar(e,t,i){return J.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return J.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=o}static Yi(e,t){let i=Me(),o=Me();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new pm(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eR()?8:gb(Kt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.rs(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,t,o,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new zN;return this._s(e,t,u).next(h=>{if(a.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>a.result)}us(e,t,i,o){return i.documentReadCount<this.es?($o()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):($o()<=Le.DEBUG&&he("QueryEngine","Query:",Ho(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ts*o?($o()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(t))):J.resolve())}rs(e,t){if(L_(t))return J.resolve(null);let i=Ir(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=vp(t,null,"F"),i=Ir(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const u=Me(...a);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.cs(t,h);return this.ls(t,m,u,f.readTime)?this.rs(e,vp(t,null,"F")):this.hs(e,m,t,f)}))})))}ss(e,t,i,o){return L_(t)||o.isEqual(Re.min())?J.resolve(null):this.ns.getDocuments(e,i).next(a=>{const u=this.cs(t,a);return this.ls(t,u,i,o)?J.resolve(null):($o()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ho(t)),this.hs(e,u,t,hb(o,Ll)).next(h=>h))})}cs(e,t){let i=new At(UT(e));return t.forEach((o,a)=>{Ih(e,a)&&(i=i.add(a))}),i}ls(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}_s(e,t,i){return $o()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.ns.getDocumentsMatchingQuery(e,t,Bi.min(),i)}hs(e,t,i,o){return this.ns.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="LocalStore",$N=3e8;class HN{constructor(e,t,i,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new ot(Ne),this.Is=new Ws(a=>im(a),sm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ON(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function WN(n,e,t,i){return new HN(n,e,t,i)}async function l0(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],h=[];let f=Me();for(const m of o){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:h}))})})}function KN(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,f,m,_){const E=m.batch,I=E.keys();let A=J.resolve();return I.forEach(O=>{A=A.next(()=>_.getEntry(f,O)).next(U=>{const D=m.docVersions.get(O);$e(D!==null),U.version.compareTo(D)<0&&(E.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),_.addEntry(U)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(f,E))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Me();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function u0(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function GN(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const h=[];e.targetChanges.forEach((_,E)=>{const I=o.get(E);if(!I)return;h.push(t.Hr.removeMatchingKeys(a,_.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(a,_.addedDocuments,E)));let A=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(Ut.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),o=o.insert(E,A),function(U,D,Q){return U.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=$N?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(I,A,_)&&h.push(t.Hr.updateTargetData(a,A))});let f=Zr(),m=Me();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),h.push(QN(a,u,e.documentUpdates).next(_=>{f=_.Vs,m=_.fs})),!i.isEqual(Re.min())){const _=t.Hr.getLastRemoteSnapshotVersion(a).next(E=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(_)}return J.waitFor(h).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.Ts=o,a))}function QN(n,e,t){let i=Me(),o=Me();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let u=Zr();return t.forEach((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(h)),f.isNoDocument()&&f.version.isEqual(Re.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):he(mm,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Vs:u,fs:o}})}function YN(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=tm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function XN(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Hr.getTargetData(i,e).next(a=>a?(o=a,J.resolve(o)):t.Hr.allocateTargetId(i).next(u=>(o=new Oi(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ts.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function Ip(n,e,t){const i=ke(n),o=i.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!pa(u))throw u;he(mm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(o.target)}function G_(n,e,t){const i=ke(n);let o=Re.min(),a=Me();return i.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,_){const E=ke(f),I=E.Is.get(_);return I!==void 0?J.resolve(E.Ts.get(I)):E.Hr.getTargetData(m,_)}(i,u,Ir(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:Me())).next(h=>(JN(i,Vb(e),h),{documents:h,gs:a})))}function JN(n,e,t){let i=n.Es.get(e)||Re.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Es.set(e,i)}class Q_{constructor(){this.activeTargetIds=qb()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZN{constructor(){this.ho=new Q_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Q_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="ConnectivityMonitor";class X_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(Y_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(Y_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function Sp(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RestConnection",tO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nO{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database===eh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}So(e,t,i,o,a){const u=Sp(),h=this.bo(e,t.toUriEncodedString());he(Uf,`Sending RPC '${e}' ${u}:`,h,i);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,o,a),this.vo(e,h,f,i).then(m=>(he(Uf,`Received RPC '${e}' ${u}: `,m),m),m=>{throw ta(Uf,`RPC '${e}' ${u} failed with error: `,m,"url: ",h,"request:",i),m})}Co(e,t,i,o,a,u){return this.So(e,t,i,o,a)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}bo(e,t){const i=tO[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class iO extends nO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,o){const a=Sp();return new Promise((u,h)=>{const f=new fT;f.setWithCredentials(!0),f.listenOnce(pT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Lc.NO_ERROR:const _=f.getResponseJson();he($t,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Lc.TIMEOUT:he($t,`RPC '${e}' ${a} timed out`),h(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const E=f.getStatus();if(he($t,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I==null?void 0:I.error;if(A&&A.status&&A.message){const O=function(D){const Q=D.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Q)>=0?Q:Z.UNKNOWN}(A.status);h(new fe(O,A.message))}else h(new fe(Z.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{he($t,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);he($t,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",m,i,15)})}Wo(e,t,i){const o=Sp(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yT(),h=gT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");he($t,`Creating RPC '${e}' stream ${o}: ${_}`,f);const E=u.createWebChannel(_,f);let I=!1,A=!1;const O=new rO({Fo:D=>{A?he($t,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(I||(he($t,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),he($t,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Mo:()=>E.close()}),U=(D,Q,te)=>{D.listen(Q,W=>{try{te(W)}catch(H){setTimeout(()=>{throw H},0)}})};return U(E,vl.EventType.OPEN,()=>{A||(he($t,`RPC '${e}' stream ${o} transport opened.`),O.Qo())}),U(E,vl.EventType.CLOSE,()=>{A||(A=!0,he($t,`RPC '${e}' stream ${o} transport closed`),O.Uo())}),U(E,vl.EventType.ERROR,D=>{A||(A=!0,ta($t,`RPC '${e}' stream ${o} transport errored:`,D),O.Uo(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),U(E,vl.EventType.MESSAGE,D=>{var Q;if(!A){const te=D.data[0];$e(!!te);const W=te,H=(W==null?void 0:W.error)||((Q=W[0])===null||Q===void 0?void 0:Q.error);if(H){he($t,`RPC '${e}' stream ${o} received error:`,H);const pe=H.status;let _e=function(k){const L=yt[k];if(L!==void 0)return YT(L)}(pe),M=H.message;_e===void 0&&(_e=Z.INTERNAL,M="Unknown error status: "+pe+" with message "+H.message),A=!0,O.Uo(new fe(_e,M)),E.close()}else he($t,`RPC '${e}' stream ${o} received:`,te),O.Ko(te)}}),U(h,mT.STAT_EVENT,D=>{D.stat===hp.PROXY?he($t,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===hp.NOPROXY&&he($t,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n){return new lN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=o,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="PersistentStream";class h0{constructor(e,t,i,o,a,u,h,f){this.Ti=e,this.n_=i,this.r_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new c0(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.i_===t&&this.V_(i,o)},i=>{e(()=>{const o=new fe(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(o)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{i(()=>this.m_(o))}),this.stream.onMessage(o=>{i(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(J_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(J_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sO extends h0{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=hN(this.serializer,e),i=function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Sr(u.readTime):Re.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(a,u){let h;const f=u.target;if(h=gp(f)?{documents:pN(a,f)}:{query:mN(a,f).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=ZT(a,u.resumeToken);const m=_p(a,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Re.min())>0){h.readTime=sh(a,u.snapshotVersion.toTimestamp());const m=_p(a,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=yN(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.I_(t)}}class oO extends h0{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=fN(e.writeResults,e.commitTime),i=Sr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Tp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>dN(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{}class lO extends aO{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.So(e,wp(t,i),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new fe(Z.UNKNOWN,a.toString())})}Co(e,t,i,o,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,wp(t,i),o,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(Z.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class uO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Jr(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class cO{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{i.enqueueAndForget(async()=>{Ks(this)&&(he(Fs,"Restarting streams for network reachability change."),await async function(f){const m=ke(f);m.W_.add(4),await Zl(m),m.j_.set("Unknown"),m.W_.delete(4),await Ph(m)}(this))})}),this.j_=new uO(i,o)}}async function Ph(n){if(Ks(n))for(const e of n.G_)await e(!0)}async function Zl(n){for(const e of n.G_)await e(!1)}function d0(n,e){const t=ke(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),_m(t)?vm(t):ma(t).c_()&&ym(t,e))}function gm(n,e){const t=ke(n),i=ma(t);t.K_.delete(e),i.c_()&&f0(t,e),t.K_.size===0&&(i.c_()?i.P_():Ks(t)&&t.j_.set("Unknown"))}function ym(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ma(n).y_(e)}function f0(n,e){n.H_.Ne(e),ma(n).w_(e)}function vm(n){n.H_=new iN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ma(n).start(),n.j_.B_()}function _m(n){return Ks(n)&&!ma(n).u_()&&n.K_.size>0}function Ks(n){return ke(n).W_.size===0}function p0(n){n.H_=void 0}async function hO(n){n.j_.set("Online")}async function dO(n){n.K_.forEach((e,t)=>{ym(n,e)})}async function fO(n,e){p0(n),_m(n)?(n.j_.q_(e),vm(n)):n.j_.set("Unknown")}async function pO(n,e,t){if(n.j_.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const h of a.targetIds)o.K_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.K_.delete(h),o.H_.removeTarget(h))}(n,e)}catch(i){he(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ah(n,i)}else if(e instanceof Uc?n.H_.We(e):e instanceof XT?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Re.min()))try{const i=await u0(n.localStore);t.compareTo(i)>=0&&await function(a,u){const h=a.H_.ot(u);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.K_.get(m);_&&a.K_.set(m,_.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,m)=>{const _=a.K_.get(f);if(!_)return;a.K_.set(f,_.withResumeToken(Ut.EMPTY_BYTE_STRING,_.snapshotVersion)),f0(a,f);const E=new Oi(_.target,f,m,_.sequenceNumber);ym(a,E)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){he(Fs,"Failed to raise snapshot:",i),await ah(n,i)}}async function ah(n,e,t){if(!pa(e))throw e;n.W_.add(1),await Zl(n),n.j_.set("Offline"),t||(t=()=>u0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(Fs,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Ph(n)})}function m0(n,e){return e().catch(t=>ah(n,t,e))}async function kh(n){const e=ke(n),t=Hi(e);let i=e.U_.length>0?e.U_[e.U_.length-1].batchId:tm;for(;mO(e);)try{const o=await YN(e.localStore,i);if(o===null){e.U_.length===0&&t.P_();break}i=o.batchId,gO(e,o)}catch(o){await ah(e,o)}g0(e)&&y0(e)}function mO(n){return Ks(n)&&n.U_.length<10}function gO(n,e){n.U_.push(e);const t=Hi(n);t.c_()&&t.S_&&t.b_(e.mutations)}function g0(n){return Ks(n)&&!Hi(n).u_()&&n.U_.length>0}function y0(n){Hi(n).start()}async function yO(n){Hi(n).C_()}async function vO(n){const e=Hi(n);for(const t of n.U_)e.b_(t.mutations)}async function _O(n,e,t){const i=n.U_.shift(),o=um.from(i,e,t);await m0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await kh(n)}async function wO(n,e){e&&Hi(n).S_&&await async function(i,o){if(function(u){return nN(u)&&u!==Z.ABORTED}(o.code)){const a=i.U_.shift();Hi(i).h_(),await m0(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await kh(i)}}(n,e),g0(n)&&y0(n)}async function Z_(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),he(Fs,"RemoteStore received new credentials");const i=Ks(t);t.W_.add(3),await Zl(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ph(t)}async function EO(n,e){const t=ke(n);e?(t.W_.delete(2),await Ph(t)):e||(t.W_.add(2),await Zl(t),t.j_.set("Unknown"))}function ma(n){return n.J_||(n.J_=function(t,i,o){const a=ke(t);return a.M_(),new sO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{xo:hO.bind(null,n),No:dO.bind(null,n),Lo:fO.bind(null,n),p_:pO.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),_m(n)?vm(n):n.j_.set("Unknown")):(await n.J_.stop(),p0(n))})),n.J_}function Hi(n){return n.Y_||(n.Y_=function(t,i,o){const a=ke(t);return a.M_(),new oO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:yO.bind(null,n),Lo:wO.bind(null,n),D_:vO.bind(null,n),v_:_O.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await kh(n)):(await n.Y_.stop(),n.U_.length>0&&(he(Fs,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,h=new wm(e,t,u,o,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(n,e){if(Jr("AsyncQueue",`${e}: ${n}`),pa(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=_l(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.Z_=new ot(we.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class oa{constructor(e,t,i,o,a,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new oa(e,t,Zo.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class IO{constructor(){this.queries=tw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const o=ke(t),a=o.queries;o.queries=tw(),a.forEach((u,h)=>{for(const f of h.ta)f.onError(i)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function tw(){return new Ws(n=>jT(n),Th)}async function v0(n,e){const t=ke(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.na()&&e.ra()&&(i=2):(a=new TO,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await t.onListen(o,!0);break;case 1:a.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=Em(u,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&Tm(t)}async function _0(n,e){const t=ke(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?o=e.ra()?0:1:!a.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SO(n,e){const t=ke(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const h of u.ta)h.oa(o)&&(i=!0);u.ea=o}}i&&Tm(t)}function AO(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const a of o.ta)a.onError(t);i.queries.delete(e)}function Tm(n){n.ia.forEach(e=>{e.next()})}var Ap,nw;(nw=Ap||(Ap={}))._a="default",nw.Cache="cache";class w0{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new oa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.key=e}}class T0{constructor(e){this.key=e}}class CO{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Me(),this.mutatedKeys=Me(),this.ya=UT(e),this.wa=new Zo(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new ew,o=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,E)=>{const I=o.get(_),A=Ih(this.query,E)?E:null,O=!!I&&this.mutatedKeys.has(I.key),U=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;I&&A?I.data.isEqual(A.data)?O!==U&&(i.track({type:3,doc:A}),D=!0):this.va(I,A)||(i.track({type:2,doc:A}),D=!0,(f&&this.ya(A,f)>0||m&&this.ya(A,m)<0)&&(h=!0)):!I&&A?(i.track({type:0,doc:A}),D=!0):I&&!A&&(i.track({type:1,doc:I}),D=!0,(f||m)&&(h=!0)),D&&(A?(u=u.add(A),a=U?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{wa:u,Da:i,ls:h,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((_,E)=>function(A,O){const U=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return U(A)-U(O)}(_.type,E.type)||this.ya(_.doc,E.doc)),this.Ca(i),o=o!=null&&o;const h=t&&!o?this.Fa():[],f=this.pa.size===0&&this.current&&!o?1:0,m=f!==this.ga;return this.ga=f,u.length!==0||m?{snapshot:new oa(this.query,e.wa,a,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ew,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Me(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new T0(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new E0(i))}),t}Oa(e){this.fa=e.gs,this.pa=Me();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return oa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Im="SyncEngine";class RO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class PO{constructor(e){this.key=e,this.Ba=!1}}class kO{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ws(h=>jT(h),Th),this.qa=new Map,this.Qa=new Set,this.$a=new ot(we.comparator),this.Ua=new Map,this.Ka=new dm,this.Wa={},this.Ga=new Map,this.za=sa.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function xO(n,e,t=!0){const i=P0(n);let o;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Na()):o=await I0(i,e,t,!0),o}async function bO(n,e){const t=P0(n);await I0(t,e,!0,!1)}async function I0(n,e,t,i){const o=await XN(n.localStore,Ir(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await NO(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&d0(n.remoteStore,o),h}async function NO(n,e,t,i,o){n.Ha=(E,I,A)=>async function(U,D,Q,te){let W=D.view.ba(Q);W.ls&&(W=await G_(U.localStore,D.query,!1).then(({documents:M})=>D.view.ba(M,W)));const H=te&&te.targetChanges.get(D.targetId),pe=te&&te.targetMismatches.get(D.targetId)!=null,_e=D.view.applyChanges(W,U.isPrimaryClient,H,pe);return iw(U,D.targetId,_e.Ma),_e.snapshot}(n,E,I,A);const a=await G_(n.localStore,e,!0),u=new CO(e,a.gs),h=u.ba(a.documents),f=Jl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(h,n.isPrimaryClient,f);iw(n,t,m.Ma);const _=new RO(e,t,u);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function OO(n,e,t){const i=ke(n),o=i.ka.get(e),a=i.qa.get(o.targetId);if(a.length>1)return i.qa.set(o.targetId,a.filter(u=>!Th(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ip(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&gm(i.remoteStore,o.targetId),Cp(i,o.targetId)}).catch(fa)):(Cp(i,o.targetId),await Ip(i.localStore,o.targetId,!0))}async function DO(n,e){const t=ke(n),i=t.ka.get(e),o=t.qa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gm(t.remoteStore,i.targetId))}async function LO(n,e,t){const i=zO(n);try{const o=await function(u,h){const f=ke(u),m=St.now(),_=h.reduce((A,O)=>A.add(O.key),Me());let E,I;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let O=Zr(),U=Me();return f.ds.getEntries(A,_).next(D=>{O=D,O.forEach((Q,te)=>{te.isValidDocument()||(U=U.add(Q))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,O)).next(D=>{E=D;const Q=[];for(const te of h){const W=Xb(te,E.get(te.key).overlayedDocument);W!=null&&Q.push(new Zi(te.key,W,xT(W.value.mapValue),Mn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,Q,h)}).next(D=>{I=D;const Q=D.applyToLocalDocumentSet(E,U);return f.documentOverlayCache.saveOverlays(A,D.batchId,Q)})}).then(()=>({batchId:I.batchId,changes:BT(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(u,h,f){let m=u.Wa[u.currentUser.toKey()];m||(m=new ot(Ne)),m=m.insert(h,f),u.Wa[u.currentUser.toKey()]=m}(i,o.batchId,t),await eu(i,o.changes),await kh(i.remoteStore)}catch(o){const a=Em(o,"Failed to persist write");t.reject(a)}}async function S0(n,e){const t=ke(n);try{const i=await GN(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Ua.get(a);u&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Ba=!0:o.modifiedDocuments.size>0?$e(u.Ba):o.removedDocuments.size>0&&($e(u.Ba),u.Ba=!1))}),await eu(t,i,e)}catch(i){await fa(i)}}function rw(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ka.forEach((a,u)=>{const h=u.view.sa(e);h.snapshot&&o.push(h.snapshot)}),function(u,h){const f=ke(u);f.onlineState=h;let m=!1;f.queries.forEach((_,E)=>{for(const I of E.ta)I.sa(h)&&(m=!0)}),m&&Tm(f)}(i.eventManager,e),o.length&&i.La.p_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MO(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ua.get(e),a=o&&o.key;if(a){let u=new ot(we.comparator);u=u.insert(a,Wt.newNoDocument(a,Re.min()));const h=Me().add(a),f=new Ch(Re.min(),new Map,new ot(Ne),u,h);await S0(i,f),i.$a=i.$a.remove(a),i.Ua.delete(e),Sm(i)}else await Ip(i.localStore,e,!1).then(()=>Cp(i,e,t)).catch(fa)}async function VO(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await KN(t.localStore,e);C0(t,i,null),A0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await eu(t,o)}catch(o){await fa(o)}}async function jO(n,e,t){const i=ke(n);try{const o=await function(u,h){const f=ke(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next(E=>($e(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(m,E))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>f.localDocuments.getDocuments(m,_))})}(i.localStore,e);C0(i,e,t),A0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await eu(i,o)}catch(o){await fa(o)}}function A0(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function C0(n,e,t){const i=ke(n);let o=i.Wa[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Wa[i.currentUser.toKey()]=o}}function Cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(i=>{n.Ka.containsKey(i)||R0(n,i)})}function R0(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(gm(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Sm(n))}function iw(n,e,t){for(const i of t)i instanceof E0?(n.Ka.addReference(i.key,e),UO(n,i)):i instanceof T0?(he(Im,"Document no longer in limbo: "+i.key),n.Ka.removeReference(i.key,e),n.Ka.containsKey(i.key)||R0(n,i.key)):Ae()}function UO(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(he(Im,"New document in limbo: "+t),n.Qa.add(i),Sm(n))}function Sm(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new we(Je.fromString(e)),i=n.za.next();n.Ua.set(i,new PO(t)),n.$a=n.$a.insert(t,i),d0(n.remoteStore,new Oi(Ir(om(t.path)),i,"TargetPurposeLimboResolution",_h.ae))}}async function eu(n,e,t){const i=ke(n),o=[],a=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,f)=>{u.push(i.Ha(f,e,t).then(m=>{var _;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){o.push(m);const E=pm.Yi(f.targetId,m);a.push(E)}}))}),await Promise.all(u),i.La.p_(o),await async function(f,m){const _=ke(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>J.forEach(m,I=>J.forEach(I.Hi,A=>_.persistence.referenceDelegate.addReference(E,I.targetId,A)).next(()=>J.forEach(I.Ji,A=>_.persistence.referenceDelegate.removeReference(E,I.targetId,A)))))}catch(E){if(!pa(E))throw E;he(mm,"Failed to update sequence numbers: "+E)}for(const E of m){const I=E.targetId;if(!E.fromCache){const A=_.Ts.get(I),O=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(O);_.Ts=_.Ts.insert(I,U)}}}(i.localStore,a))}async function FO(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){he(Im,"User change. New user:",e.toKey());const i=await l0(t.localStore,e);t.currentUser=e,function(a,u){a.Ga.forEach(h=>{h.forEach(f=>{f.reject(new fe(Z.CANCELLED,u))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await eu(t,i.Rs)}}function BO(n,e){const t=ke(n),i=t.Ua.get(e);if(i&&i.Ba)return Me().add(i.key);{let o=Me();const a=t.qa.get(e);if(!a)return o;for(const u of a){const h=t.ka.get(u);o=o.unionWith(h.view.Sa)}return o}}function P0(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=S0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MO.bind(null,e),e.La.p_=SO.bind(null,e.eventManager),e.La.Ja=AO.bind(null,e.eventManager),e}function zO(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jO.bind(null,e),e}class lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return WN(this.persistence,new qN,e.initialUser,this.serializer)}Xa(e){return new a0(fm.ri,this.serializer)}Za(e){return new ZN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lh.provider={build:()=>new lh};class qO extends lh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){$e(this.persistence.referenceDelegate instanceof oh);const i=this.persistence.referenceDelegate.garbageCollector;return new PN(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new a0(i=>oh.ri(i,t),this.serializer)}}class Rp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FO.bind(null,this.syncEngine),await EO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IO}()}createDatastore(e){const t=Rh(e.databaseInfo.databaseId),i=function(a){return new iO(a)}(e.databaseInfo);return function(a,u,h,f){return new lO(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,u,h){return new cO(i,o,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>rw(this.syncEngine,t,0),function(){return X_.D()?new X_:new eO}())}createSyncEngine(e,t){return function(o,a,u,h,f,m,_){const E=new kO(o,a,u,h,f,m);return _&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=ke(o);he(Fs,"RemoteStore shutting down."),a.W_.add(5),await Zl(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Rp.provider={build:()=>new Rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="FirestoreClient";class $O{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=wT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{he(Wi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(he(Wi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Em(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Bf(n,e){n.asyncQueue.verifyOperationInProgress(),he(Wi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await l0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function sw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HO(n);he(Wi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Z_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Z_(e.remoteStore,o)),n._onlineComponents=e}async function HO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Wi,"Using user provided OfflineComponentProvider");try{await Bf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ta("Error using user provided cache. Falling back to memory cache: "+t),await Bf(n,new lh)}}else he(Wi,"Using default OfflineComponentProvider"),await Bf(n,new qO(void 0));return n._offlineComponents}async function x0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Wi,"Using user provided OnlineComponentProvider"),await sw(n,n._uninitializedComponentsProvider._online)):(he(Wi,"Using default OnlineComponentProvider"),await sw(n,new Rp))),n._onlineComponents}function WO(n){return x0(n).then(e=>e.syncEngine)}async function b0(n){const e=await x0(n),t=e.eventManager;return t.onListen=xO.bind(null,e.syncEngine),t.onUnlisten=OO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DO.bind(null,e.syncEngine),t}function KO(n,e,t={}){const i=new Qr;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const _=new k0({next:I=>{_.su(),u.enqueueAndForget(()=>_0(a,E));const A=I.docs.has(h);!A&&I.fromCache?m.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&f&&f.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),E=new w0(om(h.path),_,{includeMetadataChanges:!0,Ta:!0});return v0(a,E)}(await b0(n),n.asyncQueue,e,t,i)),i.promise}function GO(n,e,t={}){const i=new Qr;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,m){const _=new k0({next:I=>{_.su(),u.enqueueAndForget(()=>_0(a,E)),I.fromCache&&f.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),E=new w0(h,_,{includeMetadataChanges:!0,Ta:!0});return v0(a,E)}(await b0(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QO(n,e,t,i){if(e===!0&&i===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aw(n){if(!we.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lw(n){if(we.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xh(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="firestore.googleapis.com",uw=!0;class cw{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D0,this.ssl=uw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:uw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CN)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nb;switch(i.type){case"firstParty":return new ob(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=ow.get(t);i&&(he("ComponentProvider","Removing Datastore"),ow.delete(t),i.terminate())}(this),Promise.resolve()}}function YO(n,e,t,i={}){var o;const a=(n=ar(n,bh))._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;a.host!==D0&&a.host!==h&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:h,ssl:!1,emulatorOptions:i});if(!Fi(f,u)&&(n._setSettings(f),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=Ht.MOCK_USER;else{m=tE(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ht(E)}n._authCredentials=new rb(new vT(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class Zt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class ji extends ga{constructor(e,t,i){super(e,t,om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new we(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function Nh(n,e,...t){if(n=st(n),O0("collection","path",e),n instanceof bh){const i=Je.fromString(e,...t);return lw(i),new ji(n,null,i)}{if(!(n instanceof Zt||n instanceof ji))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return lw(i),new ji(n.firestore,null,i)}}function zl(n,e,...t){if(n=st(n),arguments.length===1&&(e=wT.newId()),O0("doc","path",e),n instanceof bh){const i=Je.fromString(e,...t);return aw(i),new Zt(n,null,new we(i))}{if(!(n instanceof Zt||n instanceof ji))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return aw(i),new Zt(n.firestore,n instanceof ji?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="AsyncQueue";class dw{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new c0(this,"async_queue_retry"),this.Su=()=>{const i=Ff();i&&he(hw,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Qr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!pa(e))throw e;he(hw,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const o=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw Jr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=wm.createAndSchedule(this,e,t,i,a=>this.Fu(a));return this.fu.push(o),o}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Gs extends bh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new dw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dw(e),this._firestoreClient=void 0,await e}}}function XO(n,e){const t=typeof n=="object"?n:fh(),i=typeof n=="string"?n:eh,o=Gi(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Jw("firestore");a&&YO(o,...a)}return o}function Am(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JO(n),n._firestoreClient}function JO(n){var e,t,i;const o=n._freezeSettings(),a=function(h,f,m,_){return new Eb(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,N0(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new $O(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(Ut.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new aa(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^__.*__$/;class eD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}class L0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Pm{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.$u(e),o}Uu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return uh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(M0(this.Lu)&&ZO.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class tD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rh(e)}ju(e,t,i,o=!1){return new Pm({Lu:e,methodName:t,zu:i,path:jt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lh(n){const e=n._freezeSettings(),t=Rh(n._databaseId);return new tD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function V0(n,e,t,i,o,a={}){const u=n.ju(a.merge||a.mergeFields?2:0,e,t,o);xm("Data must be an object, but it was:",u,i);const h=j0(i,u);let f,m;if(a.merge)f=new Tn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const I=Pp(e,E,t);if(!u.contains(I))throw new fe(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);F0(_,I)||_.push(I)}f=new Tn(_),m=u.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,m=u.fieldTransforms;return new eD(new dn(h),f,m)}class Mh extends Dh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}class km extends Dh{_toFieldTransform(e){return new Kb(e.path,new Ul)}isEqual(e){return e instanceof km}}function nD(n,e,t,i){const o=n.ju(1,e,t);xm("Data must be an object, but it was:",o,i);const a=[],u=dn.empty();Ji(i,(f,m)=>{const _=bm(e,f,t);m=st(m);const E=o.Uu(_);if(m instanceof Mh)a.push(_);else{const I=tu(m,E);I!=null&&(a.push(_),u.set(_,I))}});const h=new Tn(a);return new L0(u,h,o.fieldTransforms)}function rD(n,e,t,i,o,a){const u=n.ju(1,e,t),h=[Pp(e,i,t)],f=[o];if(a.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(Pp(e,a[I])),f.push(a[I+1]);const m=[],_=dn.empty();for(let I=h.length-1;I>=0;--I)if(!F0(m,h[I])){const A=h[I];let O=f[I];O=st(O);const U=u.Uu(A);if(O instanceof Mh)m.push(A);else{const D=tu(O,U);D!=null&&(m.push(A),_.set(A,D))}}const E=new Tn(m);return new L0(_,E,u.fieldTransforms)}function iD(n,e,t,i=!1){return tu(t,n.ju(i?4:3,e))}function tu(n,e){if(U0(n=st(n)))return xm("Unsupported field value:",e,n),j0(n,e);if(n instanceof Dh)return function(i,o){if(!M0(o.Lu))throw o.Wu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,o){const a=[];let u=0;for(const h of i){let f=tu(h,o.Ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=st(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $b(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=St.fromDate(i);return{timestampValue:sh(o.serializer,a)}}if(i instanceof St){const a=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sh(o.serializer,a)}}if(i instanceof Cm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof aa)return{bytesValue:ZT(o.serializer,i._byteString)};if(i instanceof Zt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:hm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Rm)return function(u,h){return{mapValue:{fields:{[PT]:{stringValue:kT},[th]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Wu("VectorValues must only contain numeric values.");return am(h.serializer,m)})}}}}}}(i,o);throw o.Wu(`Unsupported field value: ${xh(i)}`)}(n,e)}function j0(n,e){const t={};return TT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(n,(i,o)=>{const a=tu(o,e.qu(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function U0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Cm||n instanceof aa||n instanceof Zt||n instanceof Dh||n instanceof Rm)}function xm(n,e,t){if(!U0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=xh(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function Pp(n,e,t){if((e=st(e))instanceof Oh)return e._internalPath;if(typeof e=="string")return bm(n,e);throw uh("Field path arguments must be of type string or ",n,!1,void 0,t)}const sD=new RegExp("[~\\*/\\[\\]]");function bm(n,e,t){if(e.search(sD)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Oh(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uh(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new fe(Z.INVALID_ARGUMENT,h+n+f)}function F0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oD extends B0{data(){return super.data()}}function Nm(n,e){return typeof e=="string"?bm(n,e):e instanceof Oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Om{}class lD extends Om{}function z0(n,e,...t){let i=[];e instanceof Om&&i.push(e),i=i.concat(t),function(a){const u=a.filter(f=>f instanceof Dm).length,h=a.filter(f=>f instanceof Vh).length;if(u>1||u>0&&h>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Vh extends lD{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Vh(e,t,i)}_apply(e){const t=this._parse(e);return $0(e._query,t),new ga(e.firestore,e.converter,yp(e._query,t))}_parse(e){const t=Lh(e.firestore);return function(a,u,h,f,m,_,E){let I;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){pw(E,_);const O=[];for(const U of E)O.push(fw(f,a,U));I={arrayValue:{values:O}}}else I=fw(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||pw(E,_),I=iD(h,u,E,_==="in"||_==="not-in");return vt.create(m,_,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function q0(n,e,t){const i=e,o=Nm("where",n);return Vh._create(o,i,t)}class Dm extends Om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dm(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:or.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const h=a.getFlattenedFilters();for(const f of h)$0(u,f),u=yp(u,f)}(e._query,t),new ga(e.firestore,e.converter,yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function fw(n,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!we.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return k_(n,new we(i))}if(t instanceof Zt)return k_(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(t)}.`)}function pw(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $0(n,e){const t=function(o,a){for(const u of o)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uD{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ji(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[th].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(u=>ft(u.doubleValue));return new Rm(a)}convertGeoPoint(e){return new Cm(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Eh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=zi(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);$e(s0(i));const o=new Vl(i.get(1),i.get(3)),a=new we(i.popFirst(5));return o.isEqual(t)||Jr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class W0 extends B0{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Nm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Fc extends W0{data(e={}){return super.data(e)}}class cD{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new El(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Fc(this._firestore,this._userDataWriter,i.key,i,new El(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(h=>{const f=new Fc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new El(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new Fc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new El(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),_=u.indexOf(h.doc.key)),{type:hD(h.type),doc:f,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(n){n=ar(n,Zt);const e=ar(n.firestore,Gs);return KO(Am(e),n._key).then(t=>yD(e,n,t))}class K0 extends uD{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function Lm(n){n=ar(n,ga);const e=ar(n.firestore,Gs),t=Am(e),i=new K0(e);return aD(n._query),GO(t,n._query).then(o=>new cD(e,i,n,o))}function fD(n,e,t){n=ar(n,Zt);const i=ar(n.firestore,Gs),o=H0(n.converter,e);return jh(i,[V0(Lh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Mn.none())])}function pD(n,e,t,...i){n=ar(n,Zt);const o=ar(n.firestore,Gs),a=Lh(o);let u;return u=typeof(e=st(e))=="string"||e instanceof Oh?rD(a,"updateDoc",n._key,e,t,i):nD(a,"updateDoc",n._key,e),jh(o,[u.toMutation(n._key,Mn.exists(!0))])}function mD(n){return jh(ar(n.firestore,Gs),[new lm(n._key,Mn.none())])}function gD(n,e){const t=ar(n.firestore,Gs),i=zl(n),o=H0(n.converter,e);return jh(t,[V0(Lh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Mn.exists(!1))]).then(()=>i)}function jh(n,e){return function(i,o){const a=new Qr;return i.asyncQueue.enqueueAndForget(async()=>LO(await WO(i),o,a)),a.promise}(Am(n),e)}function yD(n,e,t){const i=t.docs.get(e._key),o=new K0(n);return new W0(n,o,e._key,i,new El(t.hasPendingWrites,t.fromCache),e.converter)}function vD(){return new km("serverTimestamp")}(function(e,t=!0){(function(o){da=o})(Hs),sr(new Vn("firestore",(i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),h=new Gs(new ib(i.getProvider("auth-internal")),new ab(u,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(m.options.projectId,_)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),fn(y_,v_,e),fn(y_,v_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="firebasestorage.googleapis.com",Q0="storageBucket",_D=2*60*1e3,wD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends Un{constructor(e,t,i=0){super(zf(e),`Firebase Storage: ${t} (${zf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function zf(n){return"storage/"+n}function Mm(){const n="An unknown error occurred, please check the error payload for server response.";return new ut(lt.UNKNOWN,n)}function ED(n){return new ut(lt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function TD(n){return new ut(lt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ID(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(lt.UNAUTHENTICATED,n)}function SD(){return new ut(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AD(n){return new ut(lt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function CD(){return new ut(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RD(){return new ut(lt.CANCELED,"User canceled the upload/download.")}function PD(n){return new ut(lt.INVALID_URL,"Invalid URL '"+n+"'.")}function kD(n){return new ut(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function xD(){return new ut(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Q0+"' property when initializing the app?")}function bD(){return new ut(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ND(){return new ut(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OD(n){return new ut(lt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kp(n){return new ut(lt.INVALID_ARGUMENT,n)}function Y0(){return new ut(lt.APP_DELETED,"The Firebase app was deleted.")}function DD(n){return new ut(lt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pl(n,e){return new ut(lt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ml(n){throw new ut(lt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=In.makeFromUrl(e,t)}catch{return new In(e,"")}if(i.path==="")return i;throw kD(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function m(H){H.path_=decodeURIComponent(H.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",A=new RegExp(`^https?://${E}/${_}/b/${o}/o${I}`,"i"),O={bucket:1,path:3},U=t===G0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",Q=new RegExp(`^https?://${U}/${o}/${D}`,"i"),W=[{regex:h,indices:f,postModify:a},{regex:A,indices:O,postModify:m},{regex:Q,indices:{bucket:1,path:2},postModify:m}];for(let H=0;H<W.length;H++){const pe=W[H],_e=pe.regex.exec(e);if(_e){const M=_e[pe.indices.bucket];let R=_e[pe.indices.path];R||(R=""),i=new In(M,R),pe.postModify(i);break}}if(i==null)throw PD(e);return i}}class LD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(n,e,t){let i=1,o=null,a=null,u=!1,h=0;function f(){return h===2}let m=!1;function _(...D){m||(m=!0,e.apply(null,D))}function E(D){o=setTimeout(()=>{o=null,n(A,f())},D)}function I(){a&&clearTimeout(a)}function A(D,...Q){if(m){I();return}if(D){I(),_.call(null,D,...Q);return}if(f()||u){I(),_.call(null,D,...Q);return}i<64&&(i*=2);let W;h===1?(h=2,W=0):W=(i+Math.random())*1e3,E(W)}let O=!1;function U(D){O||(O=!0,I(),!m&&(o!==null?(D||(h=2),clearTimeout(o),E(0)):D||(h=1)))}return E(0),a=setTimeout(()=>{u=!0,U(!0)},t),U}function VD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(n){return n!==void 0}function UD(n){return typeof n=="object"&&!Array.isArray(n)}function Vm(n){return typeof n=="string"||n instanceof String}function mw(n){return jm()&&n instanceof Blob}function jm(){return typeof Blob<"u"}function gw(n,e,t,i){if(i<e)throw kp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw kp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function X0(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ds;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ds||(Ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,i,o,a,u,h,f,m,_,E,I=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=E,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,O)=>{this.resolve_=A,this.reject_=O,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Pc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===Ds.NO_ERROR,f=a.getStatus();if(!h||FD(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Ds.ABORT;i(!1,new Pc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;i(!0,new Pc(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());jD(f)?a(f):a()}catch(f){u(f)}else if(h!==null){const f=Mm();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(o.canceled){const f=this.appDelete_?Y0():RD();u(f)}else{const f=CD();u(f)}};this.canceled_?t(!1,new Pc(!1,null,!0)):this.backoffId_=MD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function zD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function qD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $D(n,e){e&&(n["X-Firebase-GMPID"]=e)}function HD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function WD(n,e,t,i,o,a,u=!0){const h=X0(n.urlParams),f=n.url+h,m=Object.assign({},n.headers);return $D(m,e),zD(m,t),qD(m,a),HD(m,i),new BD(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GD(...n){const e=KD();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(jm())return new Blob(n);throw new ut(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(n){if(typeof atob>"u")throw OD("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qf{constructor(e,t){this.data=e,this.contentType=t||null}}function XD(n,e){switch(n){case Er.RAW:return new qf(J0(e));case Er.BASE64:case Er.BASE64URL:return new qf(Z0(n,e));case Er.DATA_URL:return new qf(ZD(e),e2(e))}throw Mm()}function J0(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function JD(n){let e;try{e=decodeURIComponent(n)}catch{throw Pl(Er.DATA_URL,"Malformed data URL.")}return J0(e)}function Z0(n,e){switch(n){case Er.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw Pl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Er.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw Pl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=YD(e)}catch(o){throw o.message.includes("polyfill")?o:Pl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class eI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Pl(Er.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=t2(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function ZD(n){const e=new eI(n);return e.base64?Z0(Er.BASE64,e.rest):JD(e.rest)}function e2(n){return new eI(n).contentType}function t2(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){let i=0,o="";mw(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(mw(this.data_)){const i=this.data_,o=QD(i,e,t);return o===null?null:new bi(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new bi(i,!0)}}static getBlob(...e){if(jm()){const t=e.map(i=>i instanceof bi?i.data_:i);return new bi(GD.apply(null,t))}else{const t=e.map(u=>Vm(u)?XD(Er.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)o[a++]=u[h]}),new bi(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){let e;try{e=JSON.parse(n)}catch{return null}return UD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function r2(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function nI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n,e){return e}class Jt{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||i2}}let kc=null;function s2(n){return!Vm(n)||n.length<2?n:nI(n)}function rI(){if(kc)return kc;const n=[];n.push(new Jt("bucket")),n.push(new Jt("generation")),n.push(new Jt("metageneration")),n.push(new Jt("name","fullPath",!0));function e(a,u){return s2(u)}const t=new Jt("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new Jt("size");return o.xform=i,n.push(o),n.push(new Jt("timeCreated")),n.push(new Jt("updated")),n.push(new Jt("md5Hash",null,!0)),n.push(new Jt("cacheControl",null,!0)),n.push(new Jt("contentDisposition",null,!0)),n.push(new Jt("contentEncoding",null,!0)),n.push(new Jt("contentLanguage",null,!0)),n.push(new Jt("contentType",null,!0)),n.push(new Jt("metadata","customMetadata",!0)),kc=n,kc}function o2(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new In(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function a2(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return o2(i,n),i}function iI(n,e,t){const i=tI(e);return i===null?null:a2(n,i,t)}function l2(n,e,t,i){const o=tI(e);if(o===null||!Vm(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,E=n.fullPath,I="/b/"+u(_)+"/o/"+u(E),A=Um(I,t,i),O=X0({alt:"media",token:m});return A+O})[0]}function u2(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class sI{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){if(!n)throw Mm()}function c2(n,e){function t(i,o){const a=iI(n,o,e);return oI(a!==null),a}return t}function h2(n,e){function t(i,o){const a=iI(n,o,e);return oI(a!==null),l2(a,o,n.host,n._protocol)}return t}function aI(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=SD():o=ID():t.getStatus()===402?o=TD(n.bucket):t.getStatus()===403?o=AD(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function d2(n){const e=aI(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=ED(n.path)),a.serverResponse=o.serverResponse,a}return t}function f2(n,e,t){const i=e.fullServerUrl(),o=Um(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,h=new sI(o,a,h2(n,t),u);return h.errorHandler=d2(e),h}function p2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function m2(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=p2(null,e)),i}function g2(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let W="";for(let H=0;H<2;H++)W=W+Math.random().toString().slice(2);return W}const f=h();u["Content-Type"]="multipart/related; boundary="+f;const m=m2(e,i,o),_=u2(m,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,I=`\r
--`+f+"--",A=bi.getBlob(E,i,I);if(A===null)throw bD();const O={name:m.fullPath},U=Um(a,n.host,n._protocol),D="POST",Q=n.maxUploadRetryTime,te=new sI(U,D,c2(n,t),Q);return te.urlParams=O,te.headers=u,te.body=A.uploadData(),te.errorHandler=aI(e),te}class y2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o){if(this.sent_)throw ml("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ml("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ml("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ml("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ml("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class v2 extends y2{initXhr(){this.xhr_.responseType="text"}}function lI(){return new v2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t){this._service=e,t instanceof In?this._location=t:this._location=In.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bs(e,t)}get root(){const e=new In(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nI(this._location.path)}get storage(){return this._service}get parent(){const e=n2(this._location.path);if(e===null)return null;const t=new In(this._location.bucket,e);return new Bs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DD(e)}}function _2(n,e,t){n._throwIfRoot("uploadBytes");const i=g2(n.storage,n._location,rI(),new bi(e,!0),t);return n.storage.makeRequestWithTokens(i,lI).then(o=>({metadata:o,ref:n}))}function w2(n){n._throwIfRoot("getDownloadURL");const e=f2(n.storage,n._location,rI());return n.storage.makeRequestWithTokens(e,lI).then(t=>{if(t===null)throw ND();return t})}function E2(n,e){const t=r2(n._location.path,e),i=new In(n._location.bucket,t);return new Bs(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n){return/^[A-Za-z]+:\/\//.test(n)}function I2(n,e){return new Bs(n,e)}function uI(n,e){if(n instanceof Fm){const t=n;if(t._bucket==null)throw xD();const i=new Bs(t,t._bucket);return e!=null?uI(i,e):i}else return e!==void 0?E2(n,e):n}function S2(n,e){if(e&&T2(e)){if(n instanceof Fm)return I2(n,e);throw kp("To use ref(service, url), the first argument must be a Storage instance.")}else return uI(n,e)}function yw(n,e){const t=e==null?void 0:e[Q0];return t==null?null:In.makeFromBucketSpec(t,n)}function A2(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=i;o&&(n._overrideAuthToken=typeof o=="string"?o:tE(o,n.app.options.projectId))}class Fm{constructor(e,t,i,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=G0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_D,this._maxUploadRetryTime=wD,this._requests=new Set,o!=null?this._bucket=In.makeFromBucketSpec(o,this._host):this._bucket=yw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,e):this._bucket=yw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bs(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new LD(Y0());{const u=WD(e,this._appId,i,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const vw="@firebase/storage",_w="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="storage";function C2(n,e,t){return n=st(n),_2(n,e,t)}function R2(n){return n=st(n),w2(n)}function P2(n,e){return n=st(n),S2(n,e)}function k2(n=fh(),e){n=st(n);const i=Gi(n,cI).getImmediate({identifier:e}),o=Jw("storage");return o&&x2(i,...o),i}function x2(n,e,t,i={}){A2(n,e,t,i)}function b2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Fm(t,i,o,e,Hs)}function N2(){sr(new Vn(cI,b2,"PUBLIC").setMultipleInstances(!0)),fn(vw,_w,""),fn(vw,_w,"esm2017")}N2();const O2={apiKey:"AIzaSyDhdfarzymyr-UCwASM8nrVsz3EC8iQGZQ",authDomain:"tangledoak-8d36f.firebaseapp.com",projectId:"tangledoak-8d36f",storageBucket:"tangledoak-8d36f.firebasestorage.app",messagingSenderId:"144819822531",appId:"1:144819822531:web:108d19707a17aa5827e776",measurementId:"G-J5LX00LFE4"},Uh=lE(O2);J1(Uh);const ql=Ox(Uh),Ui=XO(Uh),D2=k2(Uh),L2=()=>{const[n,e]=X.useState(""),[t,i]=X.useState(""),[o,a]=X.useState(""),[u,h]=X.useState(""),[f,m]=X.useState(!1),_=qs(),E=async A=>{A.preventDefault(),a(""),h(""),m(!0);try{(await(await _k(ql,n,t)).user.getIdTokenResult()).claims.role==="vendor"?(a("Login successful! Redirecting to your dashboard..."),setTimeout(()=>_("/vendor-dashboard"),1e3)):h("Your account has not been approved as a vendor yet.")}catch(O){console.error(O),h("Invalid login. Please check your email and password.")}finally{m(!1)}},I=async()=>{a(""),h("");const A=new Hr;try{(await(await zk(ql,A)).user.getIdTokenResult()).claims.role==="vendor"?(a("Login successful! Redirecting to your dashboard..."),setTimeout(()=>_("/vendor-dashboard"),1e3)):h("Your account has not been approved as a vendor yet.")}catch(O){console.error(O),h("Google sign-in failed. Please try again.")}};return v.jsxs("div",{className:"login-container",children:[v.jsx("img",{src:"/logo.svg",alt:"Tangled Oak logo",style:{width:"60px",margin:"0 auto 1rem"}}),v.jsx("h2",{className:"login-title",children:"Vendor Login"}),v.jsx("p",{className:"login-subtitle",children:"Access your Tangled Oak dashboard"}),v.jsxs("form",{onSubmit:E,className:"login-form",children:[v.jsx("input",{type:"email",placeholder:"Email",className:"login-input",value:n,onChange:A=>e(A.target.value),required:!0}),v.jsx("input",{type:"password",placeholder:"Password",className:"login-input",value:t,onChange:A=>i(A.target.value),required:!0}),v.jsx("button",{type:"submit",disabled:f,className:`login-button ${f?"login-button-disabled":""}`,children:f?"Logging in...":"Login"})]}),v.jsx("button",{onClick:I,className:"login-button",style:{marginTop:"1rem"},children:"Sign in with Google"}),o&&v.jsx("p",{style:{color:"#4A3F35",marginTop:"1rem"},children:o}),u&&v.jsx("p",{className:"error-message",children:u}),v.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#4A3F35"},children:["Dont have a vendor account?"," ",v.jsx(Nt,{to:"/vendor-register",style:{color:"#C98B6A",fontWeight:"bold"},children:"Register here"})]})]})},M2=()=>{const[n,e]=X.useState(""),[t,i]=X.useState(""),[o,a]=X.useState(""),[u,h]=X.useState(""),[f,m]=X.useState(""),[_,E]=X.useState(!1),I=qs(),A=async O=>{O.preventDefault(),h(""),m(""),E(!0);try{const D=(await vk(ql,n,t)).user;await fD(zl(Ui,"vendorRequests",D.uid),{uid:D.uid,email:n,businessName:o,approved:!1,createdAt:new Date}),m("Registration successful! Awaiting admin approval."),setTimeout(()=>I("/vendor-login"),2e3)}catch(U){console.error(U),h("Registration failed. Try a different email or check your password.")}finally{E(!1)}};return v.jsxs("div",{className:"login-container",children:[v.jsx("img",{src:"/logo.svg",alt:"Tangled Oak logo",style:{width:"60px",margin:"0 auto 1rem"}}),v.jsx("h2",{className:"login-title",children:"Vendor Registration"}),v.jsx("p",{className:"login-subtitle",children:"Apply for a vendor account"}),v.jsxs("form",{onSubmit:A,className:"login-form",children:[v.jsx("input",{type:"text",placeholder:"Business Name",className:"login-input",value:o,onChange:O=>a(O.target.value),required:!0}),v.jsx("input",{type:"email",placeholder:"Email",className:"login-input",value:n,onChange:O=>e(O.target.value),required:!0}),v.jsx("input",{type:"password",placeholder:"Password",className:"login-input",value:t,onChange:O=>i(O.target.value),required:!0}),v.jsx("button",{type:"submit",disabled:_,className:`login-button ${_?"login-button-disabled":""}`,children:_?"Registering...":"Register"})]}),f&&v.jsx("p",{style:{color:"#4A3F35",marginTop:"1rem"},children:f}),u&&v.jsx("p",{className:"error-message",children:u}),v.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#4A3F35"},children:["Already have a vendor account?"," ",v.jsx(Nt,{to:"/vendor-login",style:{color:"#C98B6A",fontWeight:"bold"},children:"Login here"})]})]})},V2=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(!0),[o,a]=X.useState(""),u=async()=>{i(!0);try{const _=(await Lm(Nh(Ui,"vendorRequests"))).docs.map(E=>({id:E.id,...E.data()}));e(_)}catch(m){console.error("Error fetching vendor requests:",m)}i(!1)},h=async m=>{try{await pD(zl(Ui,"vendorRequests",m.id),{approved:!0}),(await fetch("/approveVendor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:m.id})})).ok?a(`Approved ${m.businessName}`):a(`Failed to approve ${m.businessName}`),await u()}catch(_){console.error("Approval error:",_)}},f=async m=>{try{await mD(zl(Ui,"vendorRequests",m)),a("Rejected vendor registration."),await u()}catch(_){console.error("Error deleting vendor request:",_)}};return X.useEffect(()=>{u()},[]),v.jsxs("div",{className:"admin-container",style:{padding:"2rem"},children:[v.jsx("h2",{children:"Pending Vendor Requests"}),o&&v.jsx("p",{style:{color:"#4A3F35"},children:o}),t?v.jsx("p",{children:"Loading..."}):n.length===0?v.jsx("p",{children:"No pending vendor requests."}):v.jsx("ul",{style:{listStyle:"none",padding:0},children:n.map(m=>v.jsxs("li",{style:{borderBottom:"1px solid #ccc",padding:"1rem 0"},children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Business:"})," ",m.businessName]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Email:"})," ",m.email]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Approved:"})," ",m.approved?"Yes":"No"]}),!m.approved&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>h(m),style:{marginRight:"1rem"},children:"Approve"}),v.jsx("button",{onClick:()=>f(m.id),style:{color:"red"},children:"Reject"})]})]},m.id))})]})};var xc={exports:{}},ww;function hI(){if(ww)return xc.exports;ww=1;var n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(n){var e=new Uint8Array(16);xc.exports=function(){return n(e),e}}else{var t=new Array(16);xc.exports=function(){for(var o=0,a;o<16;o++)(o&3)===0&&(a=Math.random()*4294967296),t[o]=a>>>((o&3)<<3)&255;return t}}return xc.exports}var $f,Ew;function dI(){if(Ew)return $f;Ew=1;for(var n=[],e=0;e<256;++e)n[e]=(e+256).toString(16).substr(1);function t(i,o){var a=o||0,u=n;return[u[i[a++]],u[i[a++]],u[i[a++]],u[i[a++]],"-",u[i[a++]],u[i[a++]],"-",u[i[a++]],u[i[a++]],"-",u[i[a++]],u[i[a++]],"-",u[i[a++]],u[i[a++]],u[i[a++]],u[i[a++]],u[i[a++]],u[i[a++]]].join("")}return $f=t,$f}var Hf,Tw;function j2(){if(Tw)return Hf;Tw=1;var n=hI(),e=dI(),t,i,o=0,a=0;function u(h,f,m){var _=f&&m||0,E=f||[];h=h||{};var I=h.node||t,A=h.clockseq!==void 0?h.clockseq:i;if(I==null||A==null){var O=n();I==null&&(I=t=[O[0]|1,O[1],O[2],O[3],O[4],O[5]]),A==null&&(A=i=(O[6]<<8|O[7])&16383)}var U=h.msecs!==void 0?h.msecs:new Date().getTime(),D=h.nsecs!==void 0?h.nsecs:a+1,Q=U-o+(D-a)/1e4;if(Q<0&&h.clockseq===void 0&&(A=A+1&16383),(Q<0||U>o)&&h.nsecs===void 0&&(D=0),D>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=U,a=D,i=A,U+=122192928e5;var te=((U&268435455)*1e4+D)%4294967296;E[_++]=te>>>24&255,E[_++]=te>>>16&255,E[_++]=te>>>8&255,E[_++]=te&255;var W=U/4294967296*1e4&268435455;E[_++]=W>>>8&255,E[_++]=W&255,E[_++]=W>>>24&15|16,E[_++]=W>>>16&255,E[_++]=A>>>8|128,E[_++]=A&255;for(var H=0;H<6;++H)E[_+H]=I[H];return f||e(E)}return Hf=u,Hf}var Wf,Iw;function U2(){if(Iw)return Wf;Iw=1;var n=hI(),e=dI();function t(i,o,a){var u=o&&a||0;typeof i=="string"&&(o=i==="binary"?new Array(16):null,i=null),i=i||{};var h=i.random||(i.rng||n)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,o)for(var f=0;f<16;++f)o[u+f]=h[f];return o||e(h)}return Wf=t,Wf}var Kf,Sw;function F2(){if(Sw)return Kf;Sw=1;var n=j2(),e=U2(),t=e;return t.v1=n,t.v4=e,Kf=t,Kf}var B2=F2();const z2=()=>{const[n,e]=X.useState(""),[t,i]=X.useState(""),[o,a]=X.useState("product"),[u,h]=X.useState(""),[f,m]=X.useState(!1),[_,E]=X.useState(""),[I,A]=X.useState(null),[O,U]=X.useState(""),[D,Q]=X.useState(""),te=qs(),W=async H=>{if(H.preventDefault(),U(""),Q(""),!n||!t||!_||!u&&!f){U("Please fill in all required fields.");return}try{let pe="";if(I){const _e=P2(D2,`listings/${B2.v4()}`);await C2(_e,I),pe=await R2(_e)}await gD(Nh(Ui,"listings"),{title:n,description:t,type:o,price:f?null:Number(u),trade:f,location:_,imageUrl:pe,createdAt:vD()}),Q("Listing submitted! Redirecting..."),setTimeout(()=>te("/home"),1200)}catch(pe){console.error(pe),U("Failed to create listing.")}};return v.jsxs("div",{className:"form-container",children:[v.jsx("h2",{className:"login-title",children:"Create a New Listing"}),v.jsx("p",{className:"login-subtitle",children:"Showcase your handmade product or trade supplies"}),v.jsxs("form",{onSubmit:W,className:"listing-form",children:[v.jsx("input",{type:"text",placeholder:"Title",value:n,onChange:H=>e(H.target.value),required:!0}),v.jsx("textarea",{placeholder:"Description",value:t,onChange:H=>i(H.target.value),required:!0}),v.jsxs("select",{value:o,onChange:H=>a(H.target.value),children:[v.jsx("option",{value:"product",children:"Product"}),v.jsx("option",{value:"supply",children:"Supply"})]}),v.jsx("input",{type:"number",placeholder:"Price (optional if trading)",value:u,onChange:H=>h(H.target.value)}),v.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("input",{type:"checkbox",checked:f,onChange:H=>m(H.target.checked)}),"Open to Trade"]}),v.jsx("input",{type:"text",placeholder:"Location (City, Province)",value:_,onChange:H=>E(H.target.value),required:!0}),v.jsx("input",{type:"file",accept:"image/*",onChange:H=>A(H.target.files[0])}),O&&v.jsx("p",{className:"error-message",children:O}),D&&v.jsx("p",{style:{color:"#4A3F35",marginTop:"1rem"},children:D}),v.jsx("button",{type:"submit",className:"login-button",children:"Submit Listing"})]})]})},q2=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(null),[o,a]=X.useState(!0);return X.useEffect(()=>{const u=Tk(ql,async h=>{if(h){i(h.uid);const f=z0(Nh(Ui,"listings"),q0("userId","==",h.uid)),_=(await Lm(f)).docs.map(E=>({id:E.id,...E.data()}));e(_),a(!1)}});return()=>u()},[]),o?v.jsx("p",{children:"Loading your listings..."}):v.jsxs("div",{className:"home-container",children:[v.jsx("h2",{className:"home-title",children:"My Listings"}),n.length===0?v.jsx("p",{className:"home-subtitle",children:"You havent added anything yet."}):v.jsx("div",{className:"home-grid",children:n.map(u=>v.jsxs(Nt,{to:`/listing/${u.id}`,className:"card",children:[u.imageUrl&&v.jsx("img",{src:u.imageUrl,alt:u.title,style:{width:"100%",height:"160px",objectFit:"cover",borderRadius:"0.5rem",marginBottom:"0.75rem"}}),v.jsx("h3",{children:u.title}),v.jsx("p",{style:{fontSize:"0.9rem",color:"#6B5F52"},children:u.price!==null?`$${u.price.toFixed(2)}`:"Trade Only"})]},u.id))})]})},$2=()=>{const{id:n}=bw(),e=qs(),[t,i]=X.useState(null),[o,a]=X.useState("");return X.useEffect(()=>{(async()=>{try{const h=zl(Ui,"listings",n),f=await dD(h);f.exists()?i(f.data()):a("Listing not found.")}catch(h){console.error(h),a("Failed to fetch listing.")}})()},[n]),o?v.jsx("p",{className:"error-message",children:o}):t?v.jsxs("div",{className:"form-container",children:[v.jsx("button",{className:"logout-button",onClick:()=>e(-1),children:" Back"}),v.jsx("h2",{className:"login-title",children:t.title}),t.imageUrl&&v.jsx("img",{src:t.imageUrl,alt:t.title,style:{maxWidth:"100%",borderRadius:"1rem",margin:"1rem 0",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"}}),v.jsx("p",{style:{marginBottom:"1rem"},children:t.description}),v.jsxs("p",{children:[v.jsx("strong",{children:"Type:"})," ",t.type==="supply"?"Supply":"Product"]}),t.price!==null&&v.jsxs("p",{children:[v.jsx("strong",{children:"Price:"})," $",t.price.toFixed(2)]}),t.trade&&v.jsxs("p",{children:[v.jsx("strong",{children:"Open to Trade"})," "]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Location:"})," ",t.location]})]}):v.jsx("p",{children:"Loading..."})},H2=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(!0);return X.useEffect(()=>{(async()=>{try{const a=z0(Nh(Ui,"listings"),q0("trade","==",!0)),h=(await Lm(a)).docs.map(f=>({id:f.id,...f.data()}));e(h),i(!1)}catch(a){console.error("Failed to load trade listings:",a),i(!1)}})()},[]),t?v.jsx("p",{children:"Loading tradeable listings..."}):v.jsxs("div",{className:"home-container",children:[v.jsx("h2",{className:"home-title",children:"Supply Swap"}),v.jsx("p",{className:"home-subtitle",children:"Items available for barter or trade"}),n.length===0?v.jsx("p",{children:"No listings available for trade at the moment."}):v.jsx("div",{className:"home-grid",children:n.map(o=>v.jsxs(Nt,{to:`/listing/${o.id}`,className:"card",children:[o.imageUrl&&v.jsx("img",{src:o.imageUrl,alt:o.title,style:{width:"100%",height:"160px",objectFit:"cover",borderRadius:"0.5rem",marginBottom:"0.75rem"}}),v.jsx("h3",{children:o.title}),v.jsx("p",{style:{fontSize:"0.9rem",color:"#6B5F52"},children:o.price!==null?`$${o.price.toFixed(2)}`:"Trade Only"}),v.jsx("p",{style:{fontSize:"0.8rem",color:"#888"},children:o.location})]},o.id))})]})},W2=()=>v.jsxs("div",{className:"confirmation-page",children:[v.jsx("h1",{children:" Thank You!"}),v.jsx("p",{children:"Your order has been placed successfully."}),v.jsx("p",{children:"We'll reach out when it's ready for pickup or shipment."}),v.jsx("a",{href:"/shop",className:"button",style:{marginTop:"1rem"},children:"Back to Shop"})]}),K2=()=>v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{children:"Our Blog"}),v.jsx("p",{children:"Check back soon for updates, craft tutorials, and more!"})]}),G2=()=>v.jsxs("div",{className:"context-box",children:[v.jsx("h1",{children:"Craft Ideas"}),v.jsx("p",{children:"Coming soon..."})]}),Q2=()=>v.jsxs("header",{className:"header",children:[v.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:v.jsx(Nt,{to:"/",children:v.jsx("img",{src:"/views/images/wordsLogo2.png",height:"130",width:"380",alt:"Tangled Oak Word Logo",style:{boxShadow:"none",border:"none"}})})}),v.jsxs("div",{className:"nav-links",children:[v.jsx(Nt,{to:"/",className:"nav-link",children:"Home"}),v.jsx(Nt,{to:"/shop",className:"nav-link",children:"Shop"}),v.jsx(Nt,{to:"/about",className:"nav-link",children:"About Us"}),v.jsx(Nt,{to:"/blog",className:"nav-link",children:"Blog"}),v.jsx(Nt,{to:"/craft",className:"nav-link",children:"Craft Ideas"}),v.jsx(Nt,{to:"/cart",className:"nav-link",children:" Cart"})]})]}),Y2=()=>v.jsxs("footer",{className:"footer",children:[v.jsxs("div",{className:"footer-container",children:[v.jsxs("div",{className:"footer-section social-media",children:[v.jsx("h2",{children:"Follow Us"}),v.jsxs("div",{className:"social-icons",children:[v.jsx("a",{href:"https://www.facebook.com/profile.php?id=61556577491923",target:"_blank",rel:"noopener noreferrer",children:v.jsx("img",{src:"/views/images/facebook.png",alt:"Facebook"})}),v.jsx("a",{href:"https://www.instagram.com/tangledoakcraft/",target:"_blank",rel:"noopener noreferrer",children:v.jsx("img",{src:"/views/images/instagram.png",alt:"Instagram"})}),v.jsx("a",{href:"https://www.pinterest.com/tangledoakcraft",target:"_blank",rel:"noopener noreferrer",children:v.jsx("img",{src:"/views/images/pinterest.png",alt:"Pinterest"})})]})]}),v.jsxs("div",{className:"footer-section quick-links",children:[v.jsx("h2",{children:"Quick Links"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(Nt,{to:"/contact",children:"Contact Us"})}),v.jsx("li",{children:v.jsx(Nt,{to:"/shipping-policy",children:"Shipping & Returns"})}),v.jsx("li",{children:v.jsx(Nt,{to:"/faq",children:"FAQ"})})]})]}),v.jsxs("div",{className:"footer-section legal",children:[v.jsx("h2",{children:"Legal"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(Nt,{to:"/privacy-policy",children:"Privacy Policy"})}),v.jsx("li",{children:v.jsx(Nt,{to:"/terms",children:"Terms & Conditions"})}),v.jsx("li",{children:v.jsx(Nt,{to:"/vendor-login",className:"nav-link",style:{fontSize:"0.8rem",opacity:.6},children:"Vendor Portal"})})]})]})]}),v.jsx("div",{className:"copyright",children:v.jsx("p",{style:{fontSize:"8px"},children:" 2024 The Tangled Oak + Craft Collective. All Rights Reserved."})})]}),Gf=({children:n,requiredRole:e})=>{const[t,i]=X.useState(null);return X.useEffect(()=>{const o=ql.onAuthStateChanged(async a=>{if(!a){i(!1);return}const h=(await a.getIdTokenResult(!0)).claims.role;i(!e||h===e)});return()=>o()},[e]),t===null?v.jsx("p",{children:"Loading..."}):t===!1?v.jsx(yA,{to:"/vendor-login",replace:!0}):n},X2=()=>v.jsxs(CA,{children:[v.jsx(Q2,{}),v.jsx("div",{className:"main-content",children:v.jsxs(_A,{children:[v.jsx(dt,{path:"/",element:v.jsx(dC,{})}),v.jsx(dt,{path:"/shop",element:v.jsx(RC,{})}),v.jsx(dt,{path:"/product/:productId",element:v.jsx(PC,{})}),v.jsx(dt,{path:"/cart",element:v.jsx(OC,{})}),v.jsx(dt,{path:"/about",element:v.jsx(DC,{})}),v.jsx(dt,{path:"/contact",element:v.jsx(LC,{})}),v.jsx(dt,{path:"/faq",element:v.jsx(MC,{})}),v.jsx(dt,{path:"/shipping-policy",element:v.jsx(VC,{})}),v.jsx(dt,{path:"/privacy-policy",element:v.jsx(jC,{})}),v.jsx(dt,{path:"/terms",element:v.jsx(UC,{})}),v.jsx(dt,{path:"/vendor-login",element:v.jsx(L2,{})}),v.jsx(dt,{path:"/vendor-register",element:v.jsx(M2,{})}),v.jsx(dt,{path:"/admin/approvals",element:v.jsx(Gf,{requiredRole:"vendor",children:v.jsx(V2,{})})}),v.jsx(dt,{path:"/my-listings/new",element:v.jsx(Gf,{requiredRole:"vendor",children:v.jsx(z2,{})})}),v.jsx(dt,{path:"/my-listings",element:v.jsx(Gf,{requiredRole:"vendor",children:v.jsx(q2,{})})}),v.jsx(dt,{path:"/listing/:listingId",element:v.jsx($2,{})}),v.jsx(dt,{path:"/supply-swap",element:v.jsx(H2,{})}),v.jsx(dt,{path:"/order-confirmation",element:v.jsx(W2,{})}),v.jsx(dt,{path:"/blog",element:v.jsx(K2,{})}),v.jsx(dt,{path:"/craft-ideas",element:v.jsx(G2,{})})]})}),v.jsx(Y2,{})]}),J2=RS.createRoot(document.getElementById("root"));J2.render(v.jsx(bC,{children:v.jsx(X2,{})}));
